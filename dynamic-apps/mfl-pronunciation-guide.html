<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pronunciation Rules Guide</title>
<style>
:root {
  --purple-900: #3b0764;
  --purple-800: #4a044e;
  --purple-700: #6b21a8;
  --purple-600: #7c3aed;
  --purple-500: #8b5cf6;
  --purple-400: #a78bfa;
  --purple-300: #c4b5fd;
  --purple-200: #ddd6fe;
  --purple-100: #ede9fe;
  --purple-50: #f5f3ff;
  --violet-600: #7c3aed;
  --violet-100: #ede9fe;
  --grey-50: #f9fafb;
  --grey-100: #f3f4f6;
  --grey-200: #e5e7eb;
  --grey-300: #d1d5db;
  --grey-400: #9ca3af;
  --grey-500: #6b7280;
  --grey-600: #4b5563;
  --grey-700: #374151;
  --grey-800: #1f2937;
  --grey-900: #111827;
  --white: #ffffff;
  --green-600: #059669;
  --green-100: #d1fae5;
  --red-600: #dc2626;
  --red-100: #fee2e2;
  --blue-600: #2563eb;
  --blue-100: #dbeafe;
  --amber-600: #d97706;
  --amber-100: #fef3c7;
  --radius: 10px;
  --shadow-sm: 0 1px 3px rgba(0,0,0,0.08);
  --shadow-md: 0 4px 12px rgba(0,0,0,0.1);
  --shadow-lg: 0 8px 24px rgba(0,0,0,0.12);
  --transition: 0.2s ease;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--grey-50); color: var(--grey-800); line-height: 1.6; }
header { position: sticky; top: 0; z-index: 100; background: linear-gradient(135deg, var(--purple-900), var(--purple-700)); color: var(--white); padding: 18px 24px; box-shadow: var(--shadow-lg); }
header h1 { font-size: 1.5rem; font-weight: 700; letter-spacing: -0.02em; }
header p { font-size: 0.88rem; opacity: 0.85; margin-top: 2px; }
.container { max-width: 1100px; margin: 0 auto; padding: 20px; }
.tab-bar { display: flex; gap: 6px; margin-bottom: 20px; flex-wrap: wrap; }
.tab-bar button { padding: 10px 22px; border: 2px solid var(--purple-300); border-radius: var(--radius); background: var(--white); color: var(--purple-700); font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: var(--transition); }
.tab-bar button:hover { background: var(--purple-100); }
.tab-bar button.active { background: var(--purple-600); color: var(--white); border-color: var(--purple-600); }
.mode-bar { display: flex; gap: 6px; margin-bottom: 20px; flex-wrap: wrap; }
.mode-bar button { padding: 8px 18px; border: 1px solid var(--grey-300); border-radius: var(--radius); background: var(--white); color: var(--grey-700); font-size: 0.85rem; font-weight: 500; cursor: pointer; transition: var(--transition); }
.mode-bar button:hover { background: var(--grey-100); }
.mode-bar button.active { background: var(--purple-100); color: var(--purple-700); border-color: var(--purple-400); }
.sound-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 10px; margin-bottom: 24px; }
.sound-card { background: var(--white); border: 2px solid var(--purple-200); border-radius: var(--radius); padding: 14px 8px; text-align: center; cursor: pointer; transition: var(--transition); box-shadow: var(--shadow-sm); }
.sound-card:hover { border-color: var(--purple-400); transform: translateY(-2px); box-shadow: var(--shadow-md); }
.sound-card.active { border-color: var(--purple-600); background: var(--purple-50); }
.sound-card .letters { font-size: 1.3rem; font-weight: 700; color: var(--purple-700); }
.sound-card .ipa { font-size: 0.8rem; color: var(--grey-500); margin-top: 4px; }
.detail-panel { background: var(--white); border-radius: var(--radius); padding: 28px; box-shadow: var(--shadow-md); margin-bottom: 24px; display: none; border-left: 4px solid var(--purple-600); }
.detail-panel.visible { display: block; animation: fadeIn 0.25s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
.detail-header { display: flex; align-items: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; }
.detail-letters { font-size: 2.4rem; font-weight: 800; color: var(--purple-700); }
.detail-ipa { font-size: 1.4rem; color: var(--grey-600); font-family: 'Segoe UI', sans-serif; }
.detail-badge { display: inline-block; padding: 3px 10px; border-radius: 20px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.04em; }

.badge-vowel { background: var(--blue-100); color: var(--blue-600); }
.badge-consonant { background: var(--green-100); color: var(--green-600); }
.badge-nasal { background: var(--amber-100); color: var(--amber-600); }
.badge-silent { background: var(--grey-100); color: var(--grey-500); }
.detail-section { margin-bottom: 18px; }
.detail-section h3 { font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.05em; color: var(--purple-600); margin-bottom: 8px; }
.detail-section p, .detail-section li { font-size: 0.95rem; color: var(--grey-700); }
.detail-section ul { padding-left: 20px; }
.detail-section li { margin-bottom: 4px; }
.example-word { display: inline-block; background: var(--purple-50); border: 1px solid var(--purple-200); border-radius: 6px; padding: 4px 12px; margin: 3px 4px; font-size: 0.95rem; }
.mouth-canvas-wrap { display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap; margin-bottom: 18px; }
.mouth-canvas-wrap canvas { border: 1px solid var(--grey-200); border-radius: 8px; background: var(--white); }
.approx-box { background: var(--amber-100); border-radius: 8px; padding: 12px 16px; font-size: 0.93rem; color: var(--grey-800); }
.mistake-box { background: var(--red-100); border-radius: 8px; padding: 12px 16px; font-size: 0.93rem; color: var(--grey-800); }
.tip-box { background: var(--blue-100); border-radius: 8px; padding: 12px 16px; font-size: 0.93rem; color: var(--grey-800); margin-top: 10px; }
.canvas-legend { display: flex; gap: 14px; flex-wrap: wrap; margin-top: 8px; font-size: 0.78rem; color: var(--grey-500); }
.canvas-legend span { display: flex; align-items: center; gap: 4px; }
.canvas-legend .swatch { display: inline-block; width: 12px; height: 3px; border-radius: 2px; }
.pairs-intro { font-size: 0.93rem; color: var(--grey-600); margin-bottom: 16px; line-height: 1.7; }
.pairs-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 12px; }
.pair-card { background: var(--white); border: 1px solid var(--grey-200); border-radius: var(--radius); padding: 16px; box-shadow: var(--shadow-sm); transition: var(--transition); }
.pair-card:hover { box-shadow: var(--shadow-md); border-color: var(--purple-300); }
.pair-card .pair-words { font-size: 1.15rem; font-weight: 700; color: var(--purple-700); margin-bottom: 4px; }
.pair-card .pair-sounds { font-size: 0.85rem; color: var(--grey-500); }
.pair-card .pair-meaning { font-size: 0.88rem; color: var(--grey-600); margin-top: 6px; }
.quiz-area { background: var(--white); border-radius: var(--radius); padding: 28px; box-shadow: var(--shadow-md); }
.quiz-header { display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 12px; margin-bottom: 20px; }
.quiz-header h2 { font-size: 1.1rem; color: var(--purple-700); }
.quiz-progress { display: flex; gap: 4px; }
.quiz-dot { width: 10px; height: 10px; border-radius: 50%; background: var(--grey-200); }
.quiz-dot.correct { background: var(--green-600); }
.quiz-dot.wrong { background: var(--red-600); }
.quiz-dot.current { background: var(--purple-400); }
.quiz-word { font-size: 1.8rem; font-weight: 700; color: var(--purple-700); text-align: center; margin-bottom: 20px; }
.quiz-instruction { text-align: center; font-size: 0.9rem; color: var(--grey-500); margin-bottom: 16px; }
.quiz-options { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; margin-bottom: 16px; }
.quiz-opt { padding: 12px; border: 2px solid var(--grey-200); border-radius: var(--radius); background: var(--white); font-size: 1rem; font-weight: 600; cursor: pointer; text-align: center; transition: var(--transition); }
.quiz-opt:hover { border-color: var(--purple-400); background: var(--purple-50); }
.quiz-opt.correct { border-color: var(--green-600); background: var(--green-100); }
.quiz-opt.wrong { border-color: var(--red-600); background: var(--red-100); }
.quiz-feedback { text-align: center; font-size: 1rem; margin-bottom: 12px; min-height: 24px; }
.quiz-score { text-align: center; font-size: 0.9rem; color: var(--grey-500); margin-bottom: 8px; }
.quiz-btn { display: block; margin: 12px auto 0; padding: 10px 28px; border: none; border-radius: var(--radius); background: var(--purple-600); color: var(--white); font-size: 0.95rem; font-weight: 600; cursor: pointer; transition: var(--transition); }
.quiz-btn:hover { background: var(--purple-700); }
.quiz-btn:disabled { background: var(--grey-300); cursor: not-allowed; }
.quiz-reset { display: block; margin: 8px auto 0; padding: 6px 20px; border: 1px solid var(--grey-300); border-radius: var(--radius); background: var(--white); color: var(--grey-600); font-size: 0.85rem; cursor: pointer; transition: var(--transition); }
.quiz-reset:hover { background: var(--grey-100); }
.info-panel { background: var(--white); border-radius: var(--radius); padding: 28px; box-shadow: var(--shadow-md); }
.info-panel h2 { font-size: 1.2rem; color: var(--purple-700); margin-bottom: 12px; }
.info-panel h3 { font-size: 1rem; color: var(--purple-600); margin: 20px 0 8px; }
.info-panel p, .info-panel li { font-size: 0.93rem; color: var(--grey-700); margin-bottom: 6px; }
.info-panel ul { padding-left: 20px; }
.info-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px; margin: 16px 0; }
.info-card { background: var(--purple-50); border: 1px solid var(--purple-200); border-radius: var(--radius); padding: 16px; }
.info-card h4 { font-size: 0.95rem; color: var(--purple-700); margin-bottom: 6px; }
.info-card p { font-size: 0.88rem; color: var(--grey-600); }
.artic-table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 0.82rem; }
.artic-table th, .artic-table td { border: 1px solid var(--grey-200); padding: 6px 10px; text-align: center; }
.artic-table th { background: var(--purple-100); color: var(--purple-700); font-weight: 600; }
.artic-table td { color: var(--grey-700); }

.hidden { display: none; }

/* Responsive */
@media (max-width: 768px) {
  .container { padding: 14px; }
  .sound-grid { grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 8px; }
  .detail-panel { padding: 20px; }
  .detail-letters { font-size: 2rem; }
  .quiz-options { grid-template-columns: repeat(2, 1fr); }
  .pairs-grid { grid-template-columns: 1fr; }
  .info-grid { grid-template-columns: 1fr; }
}

@media (max-width: 480px) {
  header { padding: 14px 16px; }
  header h1 { font-size: 1.15rem; }
  header p { font-size: 0.8rem; }
  .container { padding: 10px; }
  .sound-grid { grid-template-columns: repeat(auto-fill, minmax(70px, 1fr)); gap: 6px; }
  .sound-card { padding: 10px 6px; }
  .sound-card .letters { font-size: 1.1rem; }
  .detail-panel { padding: 16px; }
  .detail-letters { font-size: 1.6rem; }
  .detail-ipa { font-size: 1.1rem; }
  .tab-bar button { padding: 8px 14px; font-size: 0.88rem; }
  .mode-bar button { padding: 6px 12px; font-size: 0.8rem; }
}
</style>
</head>
<body>

<header>
  <h1>Pronunciation Rules Guide</h1>
  <p>Interactive phonics rules for French, German, and Spanish sounds</p>
</header>

<div class="container">
  <div class="tab-bar" id="langTabs"></div>
  <div class="mode-bar" id="modeTabs"></div>

  <!-- Explore Mode -->
  <div id="exploreMode">
    <div class="sound-grid" id="soundGrid"></div>
    <div class="detail-panel" id="detailPanel">
      <div class="detail-header">
        <span class="detail-letters" id="detLetters"></span>
        <span class="detail-ipa" id="detIPA"></span>
        <span class="detail-badge" id="detBadge"></span>
      </div>
      <div class="mouth-canvas-wrap">
        <div>
          <canvas id="mouthCanvas" width="220" height="180"></canvas>
          <div class="canvas-legend">
            <span><span class="swatch" style="background:#7c3aed"></span> Palate/jaw</span>
            <span><span class="swatch" style="background:#dc2626"></span> Tongue</span>
            <span><span class="swatch" style="background:#e11d48"></span> Lips</span>
            <span><span class="swatch" style="background:#3b82f6"></span> Airflow</span>
            <span><span class="swatch" style="background:#059669"></span> Nasal</span>
          </div>
        </div>
        <div style="flex:1;min-width:200px">
          <div class="approx-box detail-section" id="detApprox"></div>
          <div class="mistake-box detail-section" style="margin-top:10px" id="detMistake"></div>
          <div class="tip-box detail-section" id="detTip"></div>
        </div>
      </div>
      <div class="detail-section">
        <h3>Example Words</h3>
        <div id="detExamples"></div>
      </div>
    </div>
  </div>

  <!-- Minimal Pairs Mode -->
  <div id="pairsMode" class="hidden">
    <h2 style="font-size:1.1rem;color:var(--purple-700);margin-bottom:8px;">Minimal Pairs</h2>
    <p class="pairs-intro">Minimal pairs are words that differ by just one sound. Practising them trains your ear to hear the difference and your mouth to produce each sound distinctly. Try saying both words in each pair and listen carefully for the contrast.</p>
    <div class="pairs-grid" id="pairsGrid"></div>
  </div>

  <!-- Quiz Mode -->
  <div id="quizMode" class="hidden">
    <div class="quiz-area">
      <div class="quiz-header">
        <h2>Quiz: Identify the Sound Rule</h2>
        <div class="quiz-progress" id="quizProgress"></div>
      </div>
      <div class="quiz-instruction" id="quizInstruction">Which sound rule is highlighted in this word?</div>
      <div class="quiz-word" id="quizWord"></div>
      <div class="quiz-options" id="quizOpts"></div>
      <div class="quiz-feedback" id="quizFeedback"></div>
      <div class="quiz-score" id="quizScore"></div>
      <button class="quiz-btn" id="quizNext">Next Question</button>
      <button class="quiz-reset" id="quizReset">Reset Score</button>
    </div>
  </div>

  <!-- Info Mode -->
  <div id="infoMode" class="hidden">
    <div class="info-panel">
      <h2>Why Pronunciation Matters</h2>
      <p>Clear pronunciation is essential for being understood. Even with perfect grammar and vocabulary, mispronouncing key sounds can cause confusion or misunderstanding. In some cases a single sound change alters meaning entirely: consider Spanish "pero" (but) versus "perro" (dog), or French "dessus" (above) versus "dessous" (below).</p>
      <p>Training your ear and mouth to produce unfamiliar sounds builds confidence and helps you communicate naturally. Pronunciation is not about achieving a perfect accent; it is about making yourself understood and showing respect for the language you are learning.</p>

      <h3>IPA Basics</h3>
      <p>The International Phonetic Alphabet (IPA) provides one symbol for each distinct sound in human languages. Unlike English spelling (where "ough" can be pronounced at least six different ways), IPA is consistent: each symbol always represents exactly the same sound. Key conventions:</p>
      <ul>
        <li><strong>/slashes/</strong> denote phonemes (the abstract sound category a language uses)</li>
        <li><strong>[brackets]</strong> denote precise phonetic realisations (the exact sound produced)</li>
        <li>A colon <strong>:</strong> after a vowel means it is long (e.g. /i:/ versus /i/)</li>
        <li>A tilde <strong>~</strong> above a vowel marks nasalisation (e.g. French /a~/)</li>
        <li>Stress is marked with <strong>'</strong> before the stressed syllable</li>
      </ul>

      <h3>How Sounds Are Produced</h3>
      <p>Every speech sound is described by three features:</p>

      <div class="info-grid">
        <div class="info-card">
          <h4>Voicing</h4>
          <p>Whether the vocal cords vibrate. Place your fingers on your throat and compare /s/ (voiceless, no vibration) with /z/ (voiced, vibration). Many sounds come in voiced/voiceless pairs: /p/ and /b/, /t/ and /d/, /f/ and /v/.</p>
        </div>
        <div class="info-card">
          <h4>Place of Articulation</h4>
          <p>Where in the mouth the airflow is obstructed. Key places: bilabial (both lips), labiodental (teeth and lip), dental (tongue on teeth), alveolar (tongue behind top teeth), palatal (tongue on hard palate), velar (back of tongue on soft palate), uvular (uvula), glottal (throat).</p>
        </div>
        <div class="info-card">
          <h4>Manner of Articulation</h4>
          <p>How the airflow is obstructed. Key manners: plosive (full block then release), fricative (narrow gap creating friction), affricate (plosive followed by fricative), nasal (air through the nose), trill (vibrating articulator), approximant (close but no friction), lateral (air around the tongue sides).</p>
        </div>
      </div>

      <h3>Key Places of Articulation</h3>
      <div style="overflow-x:auto">
        <table class="artic-table">
          <thead>
            <tr>
              <th>Place</th>
              <th>Where</th>
              <th>Example Sounds</th>
              <th>Language Examples</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Bilabial</td><td>Both lips together</td><td>/p/, /b/, /m/</td><td>Spanish b/v between vowels</td></tr>
            <tr><td>Labiodental</td><td>Top teeth on lower lip</td><td>/f/, /v/</td><td>German w = /v/</td></tr>
            <tr><td>Dental</td><td>Tongue on upper teeth</td><td>/&theta;/, /&eth;/</td><td>Spanish c/z, intervocalic d</td></tr>
            <tr><td>Alveolar</td><td>Tongue on ridge behind teeth</td><td>/t/, /d/, /n/, /r/</td><td>Spanish rr (trill)</td></tr>
            <tr><td>Palato-alveolar</td><td>Tongue behind alveolar ridge</td><td>/&int;/, /&Zcaron;/</td><td>French ch, German sch</td></tr>
            <tr><td>Palatal</td><td>Tongue on hard palate</td><td>/&ccedil;/, /&ntilde;/</td><td>German ich-laut, Spanish &ntilde;</td></tr>
            <tr><td>Velar</td><td>Back of tongue on soft palate</td><td>/k/, /g/, /x/</td><td>German ach-laut, Spanish j</td></tr>
            <tr><td>Uvular</td><td>Back of tongue near uvula</td><td>/&Rcy;/</td><td>French r</td></tr>
          </tbody>
        </table>
      </div>

      <h3>Vowel Sounds</h3>
      <p>Vowels are described by three features: height (how open the jaw is: close, mid, open), backness (where the highest point of the tongue is: front, central, back), and rounding (whether the lips are rounded). English has around 12 vowel sounds, but French, German, and Spanish each have vowels that do not occur in English.</p>
      <p>The most challenging new vowels for English speakers are the front rounded vowels: French u /y/ and eu /&oslash;/, and German &uuml; /y/ and &ouml; /&oslash;/. These combine a tongue position you know (front, as for "ee" or "ay") with lip rounding you know (as for "oo"), but in a combination English never uses.</p>

      <h3>Nasal Vowels</h3>
      <p>French has four nasal vowels, where air passes simultaneously through the mouth and the nose. These do not exist in English, German, or Spanish. The key rule: the written n or m is not pronounced as a consonant; it signals that the preceding vowel is nasalised. To produce a nasal vowel, lower your soft palate (the back of the roof of your mouth) while keeping your tongue in position for the vowel.</p>

      <h3>Tips for Practice</h3>
      <ul>
        <li>Use a mirror to check your mouth and lip position</li>
        <li>Record yourself and compare with native speakers</li>
        <li>Practise minimal pairs to train your ear for contrasts</li>
        <li>Exaggerate new sounds at first, then relax into a natural position</li>
        <li>Focus on one sound at a time rather than trying to fix everything at once</li>
        <li>Pay attention to what your tongue, lips, and jaw are doing; pronunciation is physical</li>
        <li>Listen actively: before producing a sound, spend time just listening to it in context</li>
        <li>Use the IPA as a guide; it tells you exactly what your mouth should be doing</li>
      </ul>
    </div>
  </div>
</div>

<script>
const DATA = {
french: {
  sounds: [
    { id:'ou', letters:'ou', ipa:'/u/', type:'vowel',
      approx:"Like 'oo' in 'food'",
      tip:"Keep your lips firmly rounded in a small circle. The tongue is high and pulled back.",
      mouth:'close-back-rounded',
      examples:[{w:'b<b>ou</b>che',m:'mouth'},{w:'t<b>ou</b>t',m:'all'},{w:'r<b>ou</b>ge',m:'red'},{w:'j<b>ou</b>r',m:'day'}],
      mistake:"English speakers often use the diphthong from 'go'. Keep lips firmly rounded and the sound pure, not gliding." },
    { id:'au', letters:'au / eau', ipa:'/o/', type:'vowel',
      approx:"Like 'o' in 'go' but without the glide to 'w'",
      tip:"Hold the vowel steady. English 'oh' moves; French /o/ stays in one place.",
      mouth:'mid-back-rounded',
      examples:[{w:'<b>eau</b>',m:'water'},{w:'ch<b>au</b>d',m:'hot'},{w:'be<b>au</b>',m:'beautiful'},{w:'g<b>Ã¢</b>te<b>au</b>',m:'cake'}],
      mistake:"English 'oh' glides into a 'w' shape. French /o/ is a pure, steady vowel. Hold your lip shape still." },
    { id:'oi', letters:'oi', ipa:'/wa/', type:'vowel',
      approx:"Like 'wa' in 'wand'",
      tip:"Start with rounded lips for /w/ then open quickly to /a/. It is one smooth movement.",
      mouth:'open-back-unrounded',
      examples:[{w:'m<b>oi</b>',m:'me'},{w:'v<b>oi</b>ture',m:'car'},{w:'b<b>oi</b>re',m:'to drink'},{w:'tr<b>oi</b>s',m:'three'}],
      mistake:"Do not say 'oy' as in 'boy'. The sound starts with /w/ and opens to /a/." },
    { id:'eu', letters:'eu', ipa:'/\u00f8/', type:'vowel',
      approx:"Say 'ay' but with rounded lips, like blowing a kiss",
      tip:"Tongue forward as for 'ay', lips rounded as for 'oh'. Hold both positions at once.",
      mouth:'mid-front-rounded',
      examples:[{w:'f<b>eu</b>',m:'fire'},{w:'bl<b>eu</b>',m:'blue'},{w:'j<b>eu</b>',m:'game'},{w:'d<b>eu</b>x',m:'two'}],
      mistake:"This sound does not exist in English. Try saying /e/ (as in 'bed') but round your lips at the same time." },
    { id:'u', letters:'u', ipa:'/y/', type:'vowel',
      approx:"Say 'ee' with tightly rounded lips",
      tip:"Position your tongue for 'ee' (high and forward). Now round your lips tightly. That is /y/.",
      mouth:'close-front-rounded',
      examples:[{w:'t<b>u</b>',m:'you'},{w:'r<b>u</b>e',m:'street'},{w:'l<b>u</b>ne',m:'moon'},{w:'v<b>u</b>',m:'seen'}],
      mistake:"English speakers substitute /u/ (oo). The tongue must be forward (as for 'ee') while lips are rounded." },
    { id:'r', letters:'r', ipa:'/\u0281/', type:'consonant',
      approx:"A soft gargle at the back of the throat, like a gentle 'h'",
      tip:"Raise the back of your tongue towards the uvula. Let air pass with a gentle friction. Do not use your tongue tip.",
      mouth:'uvular-fricative',
      examples:[{w:'<b>r</b>ouge',m:'red'},{w:'pa<b>r</b>is',m:'Paris'},{w:'<b>r</b>ien',m:'nothing'},{w:'me<b>r</b>ci',m:'thank you'}],
      mistake:"Do not use the English 'r' (tongue curled back). French r is produced at the uvula, similar to gargling." },
    { id:'ch', letters:'ch', ipa:'/\u0283/', type:'consonant',
      approx:"Like 'sh' in 'ship'",
      tip:"Lips slightly forward and rounded. Tongue blade near the roof just behind the alveolar ridge.",
      mouth:'palato-alveolar-fricative',
      examples:[{w:'<b>ch</b>at',m:'cat'},{w:'<b>ch</b>aud',m:'hot'},{w:'bou<b>ch</b>e',m:'mouth'},{w:'<b>ch</b>ocolat',m:'chocolate'}],
      mistake:"Unlike English 'ch' in 'church' (which has a /t/ at the start), French ch is a pure fricative with no plosive onset." },
    { id:'gn', letters:'gn', ipa:'/\u0272/', type:'consonant',
      approx:"Like 'ny' in 'canyon'",
      tip:"Press the flat middle of your tongue against the hard palate. It is one sound, not g + n.",
      mouth:'palatal-nasal',
      examples:[{w:'a<b>gn</b>eau',m:'lamb'},{w:'campa<b>gn</b>e',m:'countryside'},{w:'si<b>gn</b>e',m:'sign'},{w:'espa<b>gn</b>ol',m:'Spanish'}],
      mistake:"Do not pronounce the g and n separately. Press the middle of your tongue to the roof of your mouth." },
    { id:'ille', letters:'ille', ipa:'/ij/', type:'consonant',
      approx:"Like 'ee-y' in 'bee yard'",
      tip:"The double l produces a /j/ (y) sound. Exceptions: 'ville', 'mille', and 'tranquille' keep the /l/ sound.",
      mouth:'palatal-approximant',
      examples:[{w:'f<b>ille</b>',m:'girl'},{w:'fam<b>ille</b>',m:'family'},{w:'van<b>ille</b>',m:'vanilla'},{w:'b<b>ille</b>t',m:'ticket'}],
      mistake:"Do not pronounce the double l as English 'l'. It produces a /j/ (y) sound. Exception: 'ville' and 'mille' keep the /l/." },
    { id:'tion', letters:'-tion', ipa:'/sj\u0254\u0303/', type:'consonant',
      approx:"Like 'see-on' said quickly, with a nasal ending",
      tip:"The t becomes /s/, and the -on is the nasal vowel. Say 'syoh' with air through your nose on the final vowel.",
      mouth:'alveolar-fricative',
      examples:[{w:'na<b>tion</b>',m:'nation'},{w:'atten<b>tion</b>',m:'attention'},{w:'ques<b>tion</b>',m:'question'},{w:'solu<b>tion</b>',m:'solution'}],
      mistake:"English speakers say 'shun'. In French, the t is pronounced /s/, and the ending is nasal." },
    { id:'ent', letters:'-ent', ipa:'(silent)', type:'silent',
      approx:"The -ent ending on third person plural verbs is silent",
      tip:"This only applies to verb endings. The word 'lent' (slow) or 'vent' (wind) does pronounce the final consonant cluster.",
      mouth:'none',
      examples:[{w:'ils parl<b>ent</b>',m:'they speak'},{w:'ils mang<b>ent</b>',m:'they eat'},{w:'elles chant<b>ent</b>',m:'they sing'}],
      mistake:"English speakers tend to pronounce the final -ent. In third person plural verb forms, it is completely silent." },
    { id:'an', letters:'an / en', ipa:'/\u0251\u0303/', type:'nasal',
      approx:"A nasal 'ah': say 'ah' and let air through your nose",
      tip:"Lower your soft palate so air flows through your nose. The consonant n/m is never pronounced; it only signals nasalisation.",
      mouth:'nasal-open',
      examples:[{w:'<b>en</b>fant',m:'child'},{w:'gr<b>an</b>d',m:'big'},{w:'d<b>en</b>t',m:'tooth'},{w:'ch<b>an</b>ter',m:'to sing'}],
      mistake:"Do not pronounce the n or m. The consonant nasalises the vowel. Your tongue should not touch the roof of your mouth." },
    { id:'on', letters:'on', ipa:'/\u0254\u0303/', type:'nasal',
      approx:"A nasal 'oh': say 'oh' and let air through your nose",
      tip:"Round your lips for /o/ and simultaneously send air through your nose. Keep your tongue away from the alveolar ridge.",
      mouth:'nasal-mid',
      examples:[{w:'b<b>on</b>',m:'good'},{w:'mais<b>on</b>',m:'house'},{w:'n<b>om</b>',m:'name'},{w:'l<b>on</b>g',m:'long'}],
      mistake:"Do not say 'on' as in English 'gone'. The vowel is rounder and the n is not pronounced; instead it nasalises the vowel." },
    { id:'in', letters:'in / un', ipa:'/\u025b\u0303/', type:'nasal',
      approx:"A nasal 'eh': say the vowel in 'pet' through your nose",
      tip:"Open your mouth as for /e/ in 'pet', then nasalise. Some dialects distinguish /in/ from /un/ but most modern French does not.",
      mouth:'nasal-front',
      examples:[{w:'v<b>in</b>',m:'wine'},{w:'mat<b>in</b>',m:'morning'},{w:'l<b>un</b>di',m:'Monday'},{w:'pa<b>in</b>',m:'bread'}],
      mistake:"English speakers often add an audible 'n'. Keep the tongue away from the roof and push air through the nose." }
  ],
  pairs: [
    { a:'dessus', b:'dessous', soundA:'/y/', soundB:'/u/', meaning:'above vs below' },
    { a:'tu', b:'tout', soundA:'/y/', soundB:'/u/', meaning:'you vs all' },
    { a:'le', b:'les', soundA:'/\u0259/', soundB:'/e/', meaning:'the (sg) vs the (pl)' },
    { a:'bon', b:'bonne', soundA:'/\u0254\u0303/', soundB:'/\u0254n/', meaning:'good (m) vs good (f): nasal vs oral' },
    { a:'vin', b:'vain', soundA:'/\u025b\u0303/', soundB:'/\u025b\u0303/', meaning:'wine vs vain (same sound, different spelling)' },
    { a:'rue', b:'roue', soundA:'/y/', soundB:'/u/', meaning:'street vs wheel' },
    { a:'feu', b:'fou', soundA:'/\u00f8/', soundB:'/u/', meaning:'fire vs crazy' },
    { a:'poisson', b:'poison', soundA:'/s/', soundB:'/z/', meaning:'fish vs poison (voiceless vs voiced s)' },
    { a:'au-dessus', b:'au-dessous', soundA:'/y/', soundB:'/u/', meaning:'above vs below (with preposition)' }
  ]
},
german: {
  sounds: [
    { id:'ch-ich', letters:'ch (ich)', ipa:'/\u00e7/', type:'consonant',
      approx:"Like the 'h' in 'huge' or a whispered 'y'",
      tip:"After front vowels (e, i, ei, eu) and consonants. Raise the middle of your tongue close to the hard palate.",
      mouth:'palatal-fricative',
      examples:[{w:'i<b>ch</b>',m:'I'},{w:'ni<b>ch</b>t',m:'not'},{w:'Mi<b>lch</b>',m:'milk'},{w:'re<b>ch</b>t',m:'right'}],
      mistake:"After front vowels and consonants, ch is soft. Do not use the English 'k' or the 'ach' sound here." },
    { id:'ch-ach', letters:'ch (ach)', ipa:'/x/', type:'consonant',
      approx:"Like clearing your throat gently, a Scottish 'loch'",
      tip:"After back vowels (a, o, u, au). Raise the back of your tongue towards the soft palate. Continuous airflow, not a stop.",
      mouth:'velar-fricative',
      examples:[{w:'a<b>ch</b>',m:'oh'},{w:'Bu<b>ch</b>',m:'book'},{w:'ko<b>ch</b>en',m:'to cook'},{w:'Na<b>ch</b>t',m:'night'}],
      mistake:"After back vowels (a, o, u) ch is guttural. Do not substitute with 'k'; maintain continuous airflow." },
    { id:'sch', letters:'sch', ipa:'/\u0283/', type:'consonant',
      approx:"Like 'sh' in 'ship'",
      tip:"Always spelled with three letters in German. The sound is identical to French ch and English sh.",
      mouth:'palato-alveolar-fricative',
      examples:[{w:'<b>Sch</b>ule',m:'school'},{w:'<b>Sch</b>nee',m:'snow'},{w:'Ti<b>sch</b>',m:'table'},{w:'<b>Sch</b>laf',m:'sleep'}],
      mistake:"Always three letters together. Unlike English, German never uses 'sh' spelling." },
    { id:'sp-st', letters:'sp / st', ipa:'/\u0283p/, /\u0283t/', type:'consonant',
      approx:"'shp' and 'sht' at the start of words or syllables",
      tip:"Only at the beginning of a word or syllable. In the middle or end of a word, sp and st keep their normal sounds.",
      mouth:'palato-alveolar-fricative',
      examples:[{w:'<b>Sp</b>iel',m:'game'},{w:'<b>St</b>adt',m:'city'},{w:'<b>sp</b>rechen',m:'to speak'},{w:'<b>St</b>ra\u00dfe',m:'street'}],
      mistake:"At the start of a word or syllable, s before p or t becomes 'sh'. Do not say 'sp' or 'st' as in English." },
    { id:'z', letters:'z', ipa:'/ts/', type:'consonant',
      approx:"Like 'ts' in 'cats'",
      tip:"A quick /t/ immediately followed by /s/. The tongue tip touches the alveolar ridge then releases into a fricative.",
      mouth:'alveolar-affricate',
      examples:[{w:'<b>Z</b>eit',m:'time'},{w:'<b>z</b>ehn',m:'ten'},{w:'<b>Z</b>ug',m:'train'},{w:'<b>z</b>wei',m:'two'}],
      mistake:"German z is never like English 'z' (which is voiced). It is always the voiceless /ts/ combination." },
    { id:'w', letters:'w', ipa:'/v/', type:'consonant',
      approx:"Like English 'v' in 'vine'",
      tip:"Upper teeth rest on lower lip. German has no /w/ sound at all; their w is always English v.",
      mouth:'labiodental-fricative',
      examples:[{w:'<b>W</b>asser',m:'water'},{w:'<b>w</b>as',m:'what'},{w:'<b>W</b>elt',m:'world'},{w:'<b>w</b>enn',m:'when'}],
      mistake:"German w is never like English 'w'. It is a labiodental fricative (teeth on lower lip), identical to English 'v'." },
    { id:'v', letters:'v', ipa:'/f/', type:'consonant',
      approx:"Like English 'f' in 'fun' (in native German words)",
      tip:"In native German words, v = /f/. In loanwords from Latin/French (Violine, Vase), it is pronounced /v/.",
      mouth:'labiodental-fricative-vl',
      examples:[{w:'<b>V</b>ater',m:'father'},{w:'<b>v</b>iel',m:'much'},{w:'<b>V</b>ogel',m:'bird'},{w:'<b>v</b>or',m:'before'}],
      mistake:"In native German words, v sounds like /f/. In loanwords (Vase, Violine) it may be /v/." },
    { id:'ei', letters:'ei', ipa:'/a\u026a/', type:'vowel',
      approx:"Like 'eye' or 'I' in English",
      tip:"The golden rule: ei = 'eye', ie = 'ee'. The second letter of the pair determines the sound.",
      mouth:'diphthong-open',
      examples:[{w:'<b>ei</b>n',m:'one'},{w:'kl<b>ei</b>n',m:'small'},{w:'m<b>ei</b>n',m:'my'},{w:'Z<b>ei</b>t',m:'time'}],
      mistake:"Do not confuse with 'ie'. The rule: ei = 'eye', ie = 'ee'. Remember: the second letter gives the sound." },
    { id:'ie', letters:'ie', ipa:'/i:/', type:'vowel',
      approx:"Like 'ee' in 'see'",
      tip:"The golden rule: ie = 'ee', ei = 'eye'. The second letter of the pair determines the sound.",
      mouth:'close-front-unrounded',
      examples:[{w:'L<b>ie</b>be',m:'love'},{w:'Sp<b>ie</b>l',m:'game'},{w:'v<b>ie</b>l',m:'much'},{w:'B<b>ie</b>r',m:'beer'}],
      mistake:"Do not confuse with 'ei'. The second letter determines the sound: ie = 'ee', ei = 'eye'." },
    { id:'au', letters:'au', ipa:'/a\u028a/', type:'vowel',
      approx:"Like 'ow' in 'how'",
      tip:"Start with a wide open mouth /a/ and glide to rounded /u/. Similar to English 'ow' in 'cow'.",
      mouth:'diphthong-back',
      examples:[{w:'H<b>au</b>s',m:'house'},{w:'<b>au</b>ch',m:'also'},{w:'Fr<b>au</b>',m:'woman'},{w:'bl<b>au</b>',m:'blue'}],
      mistake:"Similar to English 'ow'. Keep the lips rounded at the end." },
    { id:'eu-au2', letters:'eu / \u00e4u', ipa:'/\u0254\u028a/', type:'vowel',
      approx:"Like 'oy' in 'boy'",
      tip:"Both eu and \u00e4u produce the same 'oy' sound. \u00e4u typically appears in words related to a base form with au.",
      mouth:'diphthong-rounded',
      examples:[{w:'n<b>eu</b>',m:'new'},{w:'h<b>eu</b>te',m:'today'},{w:'L<b>\u00e4u</b>fer',m:'runner'},{w:'B<b>\u00e4u</b>me',m:'trees'}],
      mistake:"Both eu and \u00e4u produce the same 'oy' sound. Do not pronounce them as separate vowels." },
    { id:'uml-a', letters:'\u00e4', ipa:'/\u025b/', type:'vowel',
      approx:"Like 'e' in 'bed'",
      tip:"Short \u00e4 is like English 'bed'. Long \u00e4 (before h or single consonant) is closer to 'air' without the r.",
      mouth:'mid-front-unrounded',
      examples:[{w:'M<b>\u00e4</b>dchen',m:'girl'},{w:'<b>\u00c4</b>pfel',m:'apples'},{w:'K<b>\u00e4</b>se',m:'cheese'},{w:'sp<b>\u00e4</b>t',m:'late'}],
      mistake:"This is not the 'a' in 'cat'. It is an open-mid front vowel, like the e in 'bed'." },
    { id:'uml-o', letters:'\u00f6', ipa:'/\u00f8/', type:'vowel',
      approx:"Say 'ay' with rounded lips (same as French eu)",
      tip:"Identical to French /\u00f8/. Tongue for 'ay', lips for 'oh'. Practise switching between 'ay' and this sound.",
      mouth:'mid-front-rounded',
      examples:[{w:'sch<b>\u00f6</b>n',m:'beautiful'},{w:'h<b>\u00f6</b>ren',m:'to hear'},{w:'k<b>\u00f6</b>nnen',m:'can'},{w:'<b>\u00d6</b>l',m:'oil'}],
      mistake:"Does not exist in English. Say /e/ but round your lips firmly. Practise alternating between 'ay' and 'oo'." },
    { id:'uml-u', letters:'\u00fc', ipa:'/y/', type:'vowel',
      approx:"Say 'ee' with rounded lips (same as French u)",
      tip:"Identical to French /y/. Tongue for 'ee', lips for 'oo'. This is the most common error for English speakers.",
      mouth:'close-front-rounded',
      examples:[{w:'<b>\u00fc</b>ber',m:'over'},{w:'gr<b>\u00fc</b>n',m:'green'},{w:'T<b>\u00fc</b>r',m:'door'},{w:'f<b>\u00fc</b>nf',m:'five'}],
      mistake:"Like French u. Tongue forward for 'ee', lips rounded for 'oo'. Do not substitute English 'oo'." },
    { id:'ig', letters:'-ig', ipa:'/\u00e7/', type:'consonant',
      approx:"Pronounced like '-ich' (the soft ch)",
      tip:"At the end of a word, -ig becomes the ich-sound /\u00e7/. Before a vowel suffix, it reverts to /g/: 'fertige'.",
      mouth:'palatal-fricative',
      examples:[{w:'fert<b>ig</b>',m:'finished'},{w:'lust<b>ig</b>',m:'funny'},{w:'richt<b>ig</b>',m:'correct'},{w:'wicht<b>ig</b>',m:'important'}],
      mistake:"At the end of a word, -ig is pronounced as -ich /\u00e7/, not as English '-ig'." }
  ],
  pairs: [
    { a:'Wein', b:'Wien', soundA:'/a\u026a/', soundB:'/i:/', meaning:'wine vs Vienna (ei vs ie)' },
    { a:'Stahl', b:'Stall', soundA:'/\u0283ta:l/', soundB:'/\u0283tal/', meaning:'steel vs stable (long vs short a)' },
    { a:'Buch', b:'B\u00fccher', soundA:'/x/', soundB:'/\u00e7/', meaning:'book vs books (ach vs ich sound)' },
    { a:'Hut', b:'H\u00fcte', soundA:'/u:/', soundB:'/y:/', meaning:'hat vs hats (u vs \u00fc)' },
    { a:'Ofen', b:'\u00d6fen', soundA:'/o:/', soundB:'/\u00f8:/', meaning:'oven vs ovens (o vs \u00f6)' },
    { a:'schwer', b:'Schwert', soundA:'/\u0283ve:\u0281/', soundB:'/\u0283ve:\u0281t/', meaning:'heavy vs sword' },
    { a:'Bein', b:'Biene', soundA:'/a\u026a/', soundB:'/i:/', meaning:'leg vs bee (ei vs ie)' },
    { a:'Kirche', b:'Kirsche', soundA:'/\u00e7/', soundB:'/\u0283/', meaning:'church vs cherry (ch vs sch)' }
  ]
},
spanish: {
  sounds: [
    { id:'rr', letters:'rr', ipa:'/r/', type:'consonant',
      approx:"A rolled/trilled r: tongue tip vibrates against the ridge behind your top teeth",
      tip:"Relax your tongue tip and let air make it vibrate. Practise by saying 'butter' or 'ladder' very fast, then extend the tap into a trill.",
      mouth:'alveolar-trill',
      examples:[{w:'pe<b>rr</b>o',m:'dog'},{w:'ca<b>rr</b>o',m:'car'},{w:'tie<b>rr</b>a',m:'earth'},{w:'co<b>rr</b>er',m:'to run'}],
      mistake:"English r uses no contact. For the trill, the tongue tip must be relaxed enough to vibrate. Practise by saying 'butter' very fast." },
    { id:'j', letters:'j', ipa:'/x/', type:'consonant',
      approx:"Like a strong 'h', similar to Scottish 'loch'",
      tip:"A velar fricative. Raise the back of your tongue near the soft palate and push air through the gap.",
      mouth:'velar-fricative',
      examples:[{w:'<b>j</b>ugar',m:'to play'},{w:'traba<b>j</b>o',m:'work'},{w:'<b>j</b>am\u00f3n',m:'ham'},{w:'vie<b>j</b>o',m:'old'}],
      mistake:"Spanish j is much stronger than English 'h'. It is a velar fricative produced at the back of the mouth." },
    { id:'ll', letters:'ll', ipa:'/\u028e/ or /\u02a4/', type:'consonant',
      approx:"Like 'y' in 'yes' (or 'j' in 'jeans' in Argentine Spanish)",
      tip:"In most dialects, ll = /j/ (like English 'y'). This is called ye\u00edsmo. Only a few regions still distinguish ll from y.",
      mouth:'palatal-lateral',
      examples:[{w:'<b>ll</b>amar',m:'to call'},{w:'po<b>ll</b>o',m:'chicken'},{w:'ca<b>ll</b>e',m:'street'},{w:'<b>ll</b>uvia',m:'rain'}],
      mistake:"Never pronounce as English 'l'. In most dialects it sounds like 'y'; in Argentine Spanish like 'zh' or 'sh'." },
    { id:'n-tilde', letters:'\u00f1', ipa:'/\u0272/', type:'consonant',
      approx:"Like 'ny' in 'canyon'",
      tip:"A single palatal nasal sound. Press the blade of your tongue flat against the hard palate and let air through your nose.",
      mouth:'palatal-nasal',
      examples:[{w:'Espa<b>\u00f1</b>a',m:'Spain'},{w:'a<b>\u00f1</b>o',m:'year'},{w:'ni<b>\u00f1</b>o',m:'boy'},{w:'se<b>\u00f1</b>or',m:'sir'}],
      mistake:"Not 'n' followed by 'y'. It is a single sound: press the blade of your tongue flat against the hard palate." },
    { id:'cz', letters:'c/z', ipa:'/\u03b8/', type:'consonant',
      approx:"Like 'th' in 'think' (in Castilian Spanish)",
      tip:"Tongue tip between or just behind the teeth. In Latin America, this is /s/ instead (called seseo).",
      mouth:'dental-fricative',
      examples:[{w:'<b>c</b>ine',m:'cinema'},{w:'<b>z</b>apato',m:'shoe'},{w:'die<b>z</b>',m:'ten'},{w:'<b>c</b>ero',m:'zero'}],
      mistake:"c before e/i and z are /\u03b8/ in Castilian. In Latin American Spanish, these become /s/ instead. Know which accent you are learning." },
    { id:'bv', letters:'b / v', ipa:'/b/ or /\u03b2/', type:'consonant',
      approx:"Both letters produce the same sound. Between vowels, a soft bilabial where lips barely touch",
      tip:"After a pause or nasal: full /b/ (lips fully closed). Between vowels: /\u03b2/ (lips approach but do not fully close).",
      mouth:'bilabial',
      examples:[{w:'<b>b</b>ien',m:'well'},{w:'<b>v</b>ino',m:'wine'},{w:'ha<b>b</b>lar',m:'to speak'},{w:'nu<b>v</b>e',m:'cloud'}],
      mistake:"There is no distinction between b and v in Spanish. Between vowels, both become a soft /\u03b2/ where the lips barely touch." },
    { id:'d-inter', letters:'d (intervocalic)', ipa:'/\u00f0/', type:'consonant',
      approx:"Like 'th' in 'this' when between vowels",
      tip:"Between vowels, d softens. Place your tongue tip lightly between your teeth, like English 'the'. At word-final position, it is very weak or silent.",
      mouth:'dental-fricative-voiced',
      examples:[{w:'na<b>d</b>a',m:'nothing'},{w:'to<b>d</b>o',m:'all'},{w:'vi<b>d</b>a',m:'life'},{w:'ciu<b>d</b>ad',m:'city'}],
      mistake:"Between vowels, Spanish d softens to /\u00f0/ (like English 'the'). At the start of a phrase or after n/l, it is a full /d/." },
    { id:'h', letters:'h', ipa:'(silent)', type:'silent',
      approx:"Always silent in Spanish. Never pronounced.",
      tip:"Spanish h is a historical relic from Latin. It has no sound whatsoever. The word 'hola' is simply /ola/.",
      mouth:'none',
      examples:[{w:'<b>h</b>ola',m:'hello'},{w:'<b>h</b>acer',m:'to do'},{w:'<b>h</b>ombre',m:'man'},{w:'<b>h</b>ijo',m:'son'}],
      mistake:"English speakers often add a breathy 'h' sound. In Spanish, h is purely a spelling convention with no sound." },
    { id:'gu', letters:'gu', ipa:'/g/', type:'consonant',
      approx:"Before e/i, the u is silent: 'gu' = /g/. With diaeresis (g\u00fc), the u is pronounced.",
      tip:"Think of English 'guess' or 'guide': the u is there to keep the g hard. The diaeresis (\u00fc) signals that the u should be heard.",
      mouth:'velar-plosive',
      examples:[{w:'<b>gu</b>erra',m:'war'},{w:'<b>gu</b>\u00eda',m:'guide'},{w:'a<b>gu</b>a',m:'water'},{w:'ping<b>\u00fc</b>ino',m:'penguin'}],
      mistake:"Before e or i, the u in gu is silent (like English 'guess'). If you see g\u00fc with a diaeresis, pronounce the u." },
    { id:'qu', letters:'qu', ipa:'/k/', type:'consonant',
      approx:"Like 'k'. The u is always silent.",
      tip:"Spanish qu only appears before e and i. It is always /k/, never /kw/ as in English 'queen'.",
      mouth:'velar-plosive',
      examples:[{w:'<b>qu</b>e',m:'what'},{w:'<b>qu</b>iero',m:'I want'},{w:'par<b>qu</b>e',m:'park'},{w:'<b>qu</b>eso',m:'cheese'}],
      mistake:"Unlike English 'qu' which is /kw/, Spanish qu is simply /k/. Never pronounce the u." }
  ],
  pairs: [
    { a:'pero', b:'perro', soundA:'/\u027e/', soundB:'/r/', meaning:'but vs dog (single r vs trilled rr)' },
    { a:'caro', b:'carro', soundA:'/\u027e/', soundB:'/r/', meaning:'expensive vs car' },
    { a:'caza', b:'casa', soundA:'/\u03b8a/', soundB:'/sa/', meaning:'hunt vs house (Castilian)' },
    { a:'beso', b:'peso', soundA:'/b/', soundB:'/p/', meaning:'kiss vs weight' },
    { a:'hola', b:'ola', soundA:'(silent h)', soundB:'(no h)', meaning:'hello vs wave (sound identical)' },
    { a:'ano', b:'a\u00f1o', soundA:'/n/', soundB:'/\u0272/', meaning:'anus vs year (be careful with this one!)' },
    { a:'pollo', b:'polo', soundA:'/\u028e/', soundB:'/l/', meaning:'chicken vs polo shirt (ll vs l)' },
    { a:'cero', b:'cerro', soundA:'/\u027e/', soundB:'/r/', meaning:'zero vs hill' }
  ]
}
};

let currentLang = 'french';
let currentMode = 'explore';
let currentSound = null;
let quizState = { score: 0, total: 0, current: null, answered: false, history: [] };
const QUIZ_ROUND = 10;

function init() {
  renderLangTabs();
  renderModeTabs();
  renderSounds();
}

function renderLangTabs() {
  const bar = document.getElementById('langTabs');
  bar.innerHTML = '';
  ['french','german','spanish'].forEach(lang => {
    const btn = document.createElement('button');
    btn.textContent = lang.charAt(0).toUpperCase() + lang.slice(1);
    btn.className = lang === currentLang ? 'active' : '';
    btn.onclick = () => {
      currentLang = lang;
      currentSound = null;
      quizState = { score:0, total:0, current:null, answered:false, history:[] };
      renderLangTabs();
      renderContent();
    };
    bar.appendChild(btn);
  });
}

function renderModeTabs() {
  const bar = document.getElementById('modeTabs');
  bar.innerHTML = '';
  const modes = [
    {id:'explore', label:'Explore Sounds'},
    {id:'pairs', label:'Minimal Pairs'},
    {id:'quiz', label:'Quiz'},
    {id:'info', label:'How Sounds Work'}
  ];
  modes.forEach(m => {
    const btn = document.createElement('button');
    btn.textContent = m.label;
    btn.className = m.id === currentMode ? 'active' : '';
    btn.onclick = () => { currentMode = m.id; renderModeTabs(); renderContent(); };
    bar.appendChild(btn);
  });
}

function renderContent() {
  document.getElementById('exploreMode').classList.toggle('hidden', currentMode !== 'explore');
  document.getElementById('pairsMode').classList.toggle('hidden', currentMode !== 'pairs');
  document.getElementById('quizMode').classList.toggle('hidden', currentMode !== 'quiz');
  document.getElementById('infoMode').classList.toggle('hidden', currentMode !== 'info');
  if (currentMode === 'explore') renderSounds();
  else if (currentMode === 'pairs') renderPairs();
  else if (currentMode === 'quiz') renderQuiz();
}

function renderSounds() {
  const grid = document.getElementById('soundGrid');
  const data = DATA[currentLang].sounds;
  grid.innerHTML = '';
  data.forEach(s => {
    const card = document.createElement('div');
    card.className = 'sound-card' + (currentSound && currentSound.id === s.id ? ' active' : '');
    card.innerHTML = '<div class="letters">' + s.letters + '</div><div class="ipa">' + s.ipa + '</div>';
    card.onclick = () => { currentSound = s; renderSounds(); showDetail(s); };
    grid.appendChild(card);
  });
  if (!currentSound) document.getElementById('detailPanel').classList.remove('visible');
}

function showDetail(s) {
  const panel = document.getElementById('detailPanel');
  panel.classList.add('visible');
  document.getElementById('detLetters').textContent = s.letters;
  document.getElementById('detIPA').textContent = s.ipa;

  const badge = document.getElementById('detBadge');
  const badgeMap = { vowel:'badge-vowel', consonant:'badge-consonant', nasal:'badge-nasal', silent:'badge-silent' };
  badge.className = 'detail-badge ' + (badgeMap[s.type] || 'badge-consonant');
  badge.textContent = s.type;

  document.getElementById('detApprox').innerHTML = '<h3>English Approximation</h3><p>' + s.approx + '</p>';
  document.getElementById('detMistake').innerHTML = '<h3>Common Mistake</h3><p>' + s.mistake + '</p>';
  document.getElementById('detTip').innerHTML = '<h3>Practice Tip</h3><p>' + (s.tip || '') + '</p>';
  document.getElementById('detTip').style.display = s.tip ? '' : 'none';

  const exDiv = document.getElementById('detExamples');
  exDiv.innerHTML = s.examples.map(function(e) {
    return '<span class="example-word">' + e.w + ' <small style="color:var(--grey-500)">(' + e.m + ')</small></span>';
  }).join('');

  drawMouth(s.mouth);
  panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

/* ==================== MOUTH DIAGRAM DRAWING ==================== */

function drawMouth(type) {
  var c = document.getElementById('mouthCanvas');
  var ctx = c.getContext('2d');
  ctx.clearRect(0, 0, 220, 180);

  if (type === 'none') {
    ctx.fillStyle = '#6b7280';
    ctx.font = '13px sans-serif';
    ctx.textAlign = 'center';
    ctx.fillText('No mouth movement', 110, 85);
    ctx.fillText('(silent sound)', 110, 105);
    return;
  }

  // Head outline
  ctx.strokeStyle = '#e5e7eb';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.ellipse(110, 90, 95, 78, 0, 0, Math.PI * 2);
  ctx.stroke();

  // Nasal cavity
  ctx.strokeStyle = '#d1d5db';
  ctx.lineWidth = 1;
  ctx.beginPath();
  ctx.moveTo(48, 28);
  ctx.quadraticCurveTo(60, 20, 80, 25);
  ctx.quadraticCurveTo(95, 30, 100, 45);
  ctx.stroke();

  // Nose bridge
  ctx.strokeStyle = '#9ca3af';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(48, 28);
  ctx.quadraticCurveTo(35, 55, 32, 78);
  ctx.stroke();

  // Hard palate
  ctx.strokeStyle = '#7c3aed';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(32, 78);
  ctx.quadraticCurveTo(55, 58, 80, 62);
  ctx.quadraticCurveTo(100, 65, 115, 68);
  ctx.stroke();

  // Soft palate (velum)
  ctx.strokeStyle = '#a78bfa';
  ctx.lineWidth = 2;
  ctx.beginPath();
  ctx.moveTo(115, 68);
  ctx.quadraticCurveTo(125, 65, 135, 72);
  ctx.stroke();

  // Lower jaw
  ctx.strokeStyle = '#7c3aed';
  ctx.lineWidth = 2.5;
  ctx.beginPath();
  ctx.moveTo(32, 95);
  ctx.quadraticCurveTo(75, 118, 130, 102);
  ctx.stroke();

  // Lips area
  ctx.fillStyle = '#fca5a5';
  ctx.beginPath();
  ctx.ellipse(28, 86, 7, 12, 0, 0, Math.PI * 2);
  ctx.fill();

  // Uvula
  ctx.fillStyle = '#c4b5fd';
  ctx.beginPath();
  ctx.ellipse(135, 76, 5, 8, 0.2, 0, Math.PI * 2);
  ctx.fill();

  // Pharynx wall
  ctx.strokeStyle = '#d1d5db';
  ctx.lineWidth = 1.5;
  ctx.beginPath();
  ctx.moveTo(140, 60);
  ctx.quadraticCurveTo(150, 80, 145, 110);
  ctx.stroke();

  // Labels
  ctx.fillStyle = '#9ca3af';
  ctx.font = '8px sans-serif';
  ctx.textAlign = 'left';
  ctx.fillText('lips', 8, 118);
  ctx.fillText('hard palate', 55, 55);
  ctx.fillText('velum', 118, 60);
  ctx.fillText('uvula', 142, 72);
  ctx.fillText('pharynx', 148, 100);

  // Teeth markers
  ctx.fillStyle = '#e5e7eb';
  ctx.fillRect(30, 76, 4, 5); // upper teeth
  ctx.fillRect(30, 92, 4, 5); // lower teeth

  // Alveolar ridge marker
  ctx.fillStyle = '#d1d5db';
  ctx.beginPath();
  ctx.arc(38, 74, 3, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = '#9ca3af';
  ctx.font = '7px sans-serif';
  ctx.fillText('alv.', 26, 70);

  // Draw tongue and lip position based on type
  ctx.strokeStyle = '#dc2626';
  ctx.lineWidth = 3;
  ctx.lineCap = 'round';

  var positions = {
    'close-back-rounded':     function() { drawTongue(ctx,80,95,130,80); drawLips(ctx,'rounded'); },
    'mid-back-rounded':       function() { drawTongue(ctx,70,100,125,88); drawLips(ctx,'rounded'); },
    'open-back-unrounded':    function() { drawTongue(ctx,65,108,120,95); drawLips(ctx,'open'); },
    'mid-front-rounded':      function() { drawTongue(ctx,55,88,110,94); drawLips(ctx,'rounded'); },
    'close-front-rounded':    function() { drawTongue(ctx,50,76,110,90); drawLips(ctx,'rounded'); },
    'close-front-unrounded':  function() { drawTongue(ctx,50,76,110,90); drawLips(ctx,'spread'); },
    'mid-front-unrounded':    function() { drawTongue(ctx,55,88,110,94); drawLips(ctx,'spread'); },
    'uvular-fricative':       function() { drawTongue(ctx,65,100,135,78); drawLips(ctx,'neutral'); addAirflow(ctx,135,76); },
    'palato-alveolar-fricative': function() { drawTongue(ctx,55,82,110,95); drawLips(ctx,'rounded'); addAirflow(ctx,55,74); },
    'palatal-nasal':          function() { drawTongue(ctx,52,72,110,90); drawLips(ctx,'neutral'); addNasal(ctx); },
    'palatal-approximant':    function() { drawTongue(ctx,52,76,110,92); drawLips(ctx,'spread'); },
    'alveolar-fricative':     function() { drawTongue(ctx,45,78,110,95); drawLips(ctx,'spread'); addAirflow(ctx,45,75); },
    'nasal-open':             function() { drawTongue(ctx,65,106,120,95); drawLips(ctx,'open'); addNasal(ctx); },
    'nasal-mid':              function() { drawTongue(ctx,70,100,125,88); drawLips(ctx,'rounded'); addNasal(ctx); },
    'nasal-front':            function() { drawTongue(ctx,55,92,110,94); drawLips(ctx,'spread'); addNasal(ctx); },
    'palatal-fricative':      function() { drawTongue(ctx,52,74,110,92); drawLips(ctx,'spread'); addAirflow(ctx,52,68); },
    'velar-fricative':        function() { drawTongue(ctx,65,96,130,76); drawLips(ctx,'neutral'); addAirflow(ctx,128,74); },
    'alveolar-affricate':     function() { drawTongue(ctx,44,76,110,95); drawLips(ctx,'spread'); },
    'labiodental-fricative':  function() { drawTongue(ctx,60,98,110,95); drawLips(ctx,'labiodental'); addAirflow(ctx,28,84); },
    'labiodental-fricative-vl': function() { drawTongue(ctx,60,98,110,95); drawLips(ctx,'labiodental'); addAirflow(ctx,28,84); },
    'diphthong-open':         function() { drawTongue(ctx,60,106,115,92); drawLips(ctx,'open'); },
    'diphthong-back':         function() { drawTongue(ctx,70,104,125,88); drawLips(ctx,'open'); },
    'diphthong-rounded':      function() { drawTongue(ctx,65,100,120,90); drawLips(ctx,'rounded'); },
    'alveolar-trill':         function() { drawTongue(ctx,42,77,110,95); drawLips(ctx,'neutral'); addTrill(ctx); },
    'palatal-lateral':        function() { drawTongue(ctx,52,72,110,90); drawLips(ctx,'spread'); },
    'dental-fricative':       function() { drawTongue(ctx,36,82,110,95); drawLips(ctx,'spread'); addAirflow(ctx,34,78); },
    'dental-fricative-voiced': function() { drawTongue(ctx,36,82,110,95); drawLips(ctx,'spread'); addAirflow(ctx,34,78); },
    'bilabial':               function() { drawTongue(ctx,60,98,110,95); drawLips(ctx,'bilabial'); },
    'velar-plosive':          function() { drawTongue(ctx,65,96,130,72); drawLips(ctx,'neutral'); }
  };

  if (positions[type]) positions[type]();
  else { drawTongue(ctx,60,98,110,95); drawLips(ctx,'neutral'); }
}

function drawTongue(ctx, cx, cy, ex, ey) {
  // Tongue body outline
  ctx.strokeStyle = '#dc2626';
  ctx.lineWidth = 3;
  ctx.beginPath();
  ctx.moveTo(45, 108);
  ctx.quadraticCurveTo(cx, cy, ex, ey);
  ctx.stroke();

  // Tongue body fill
  ctx.fillStyle = 'rgba(220,38,38,0.08)';
  ctx.beginPath();
  ctx.moveTo(45, 108);
  ctx.quadraticCurveTo(cx, cy, ex, ey);
  ctx.lineTo(ex, 112);
  ctx.quadraticCurveTo(80, 120, 45, 116);
  ctx.closePath();
  ctx.fill();

  // Tongue tip highlight
  ctx.fillStyle = 'rgba(220,38,38,0.3)';
  ctx.beginPath();
  ctx.arc(45, 108, 3, 0, Math.PI * 2);
  ctx.fill();
}

function drawLips(ctx, type) {
  ctx.fillStyle = '#e11d48';
  if (type === 'rounded') {
    // Small rounded opening
    ctx.beginPath();
    ctx.ellipse(25, 86, 4, 5, 0, 0, Math.PI * 2);
    ctx.fill();
    ctx.beginPath();
    ctx.arc(25, 86, 6, 0, Math.PI * 2);
    ctx.strokeStyle = '#e11d48';
    ctx.lineWidth = 2;
    ctx.stroke();
  } else if (type === 'spread') {
    // Wide spread lips
    ctx.fillRect(20, 78, 3, 16);
    ctx.fillRect(29, 78, 3, 16);
  } else if (type === 'open') {
    // Wide open
    ctx.fillRect(20, 74, 3, 8);
    ctx.fillRect(20, 96, 3, 8);
  } else if (type === 'labiodental') {
    // Upper teeth on lower lip
    ctx.fillRect(20, 76, 3, 8);
    ctx.fillStyle = '#f3f4f6';
    ctx.fillRect(22, 84, 7, 4);
    ctx.fillStyle = '#e11d48';
    ctx.strokeStyle = '#e11d48';
    ctx.lineWidth = 1;
    ctx.strokeRect(22, 84, 7, 4);
    ctx.fillRect(20, 94, 3, 6);
  } else if (type === 'bilabial') {
    // Both lips close together
    ctx.beginPath();
    ctx.moveTo(20, 82);
    ctx.lineTo(32, 82);
    ctx.strokeStyle = '#e11d48';
    ctx.lineWidth = 3;
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(20, 90);
    ctx.lineTo(32, 90);
    ctx.stroke();
  }
}

function addAirflow(ctx, x, y) {
  ctx.strokeStyle = '#3b82f6';
  ctx.lineWidth = 1;
  ctx.setLineDash([3, 3]);
  for (var i = 0; i < 3; i++) {
    ctx.beginPath();
    ctx.moveTo(x, y + i * 6 - 6);
    ctx.lineTo(x - 20, y + i * 6 - 9);
    ctx.stroke();
  }
  ctx.setLineDash([]);
  // Arrow heads
  ctx.fillStyle = '#3b82f6';
  for (var j = 0; j < 3; j++) {
    ctx.beginPath();
    ctx.moveTo(x - 20, y + j * 6 - 9);
    ctx.lineTo(x - 16, y + j * 6 - 12);
    ctx.lineTo(x - 16, y + j * 6 - 6);
    ctx.closePath();
    ctx.fill();
  }
}

function addNasal(ctx) {
  ctx.strokeStyle = '#059669';
  ctx.lineWidth = 1.5;
  ctx.setLineDash([4, 3]);
  ctx.beginPath();
  ctx.moveTo(80, 55);
  ctx.quadraticCurveTo(60, 30, 42, 24);
  ctx.stroke();
  ctx.setLineDash([]);
  // Arrow head
  ctx.fillStyle = '#059669';
  ctx.beginPath();
  ctx.moveTo(42, 24);
  ctx.lineTo(48, 20);
  ctx.lineTo(46, 28);
  ctx.closePath();
  ctx.fill();
  ctx.font = '8px sans-serif';
  ctx.fillText('nasal airflow', 28, 18);
}

function addTrill(ctx) {
  ctx.strokeStyle = '#d97706';
  ctx.lineWidth = 1.5;
  // Vibration waves near tongue tip
  for (var i = 0; i < 5; i++) {
    ctx.beginPath();
    ctx.arc(42 + i * 5, 74, 2, 0, Math.PI * 2);
    ctx.stroke();
  }
  ctx.fillStyle = '#d97706';
  ctx.font = '7px sans-serif';
  ctx.fillText('vibration', 40, 68);
}

/* ==================== MINIMAL PAIRS ==================== */

function renderPairs() {
  var grid = document.getElementById('pairsGrid');
  var pairs = DATA[currentLang].pairs;
  grid.innerHTML = '';
  pairs.forEach(function(p) {
    var card = document.createElement('div');
    card.className = 'pair-card';
    card.innerHTML =
      '<div class="pair-words">' + p.a + ' / ' + p.b + '</div>' +
      '<div class="pair-sounds">' + p.soundA + ' vs ' + p.soundB + '</div>' +
      '<div class="pair-meaning">' + p.meaning + '</div>';
    grid.appendChild(card);
  });
}

/* ==================== QUIZ ==================== */

function renderQuiz() {
  renderQuizProgress();
  if (quizState.total >= QUIZ_ROUND) {
    showQuizResult();
    return;
  }
  generateQuizQuestion();
}

function renderQuizProgress() {
  var prog = document.getElementById('quizProgress');
  prog.innerHTML = '';
  for (var i = 0; i < QUIZ_ROUND; i++) {
    var dot = document.createElement('div');
    dot.className = 'quiz-dot';
    if (i < quizState.history.length) {
      dot.className += quizState.history[i] ? ' correct' : ' wrong';
    } else if (i === quizState.total && !quizState.answered) {
      dot.className += ' current';
    }
    prog.appendChild(dot);
  }
}

function generateQuizQuestion() {
  var sounds = DATA[currentLang].sounds.filter(function(s) { return s.examples.length >= 2; });
  var correct = sounds[Math.floor(Math.random() * sounds.length)];
  var example = correct.examples[Math.floor(Math.random() * correct.examples.length)];

  // Pick 3 wrong options
  var options = [correct];
  var others = sounds.filter(function(s) { return s.id !== correct.id; });
  while (options.length < Math.min(4, sounds.length)) {
    var pick = others[Math.floor(Math.random() * others.length)];
    if (!options.find(function(o) { return o.id === pick.id; })) options.push(pick);
  }

  // Shuffle
  for (var i = options.length - 1; i > 0; i--) {
    var j = Math.floor(Math.random() * (i + 1));
    var tmp = options[i];
    options[i] = options[j];
    options[j] = tmp;
  }

  quizState.current = { correct: correct, example: example, options: options };
  quizState.answered = false;

  document.getElementById('quizInstruction').textContent = 'Question ' + (quizState.total + 1) + ' of ' + QUIZ_ROUND + ': which sound rule is highlighted?';
  document.getElementById('quizWord').innerHTML = example.w + ' <small style="font-size:0.7em;color:var(--grey-500)">(' + example.m + ')</small>';

  var optsDiv = document.getElementById('quizOpts');
  optsDiv.innerHTML = '';
  options.forEach(function(o) {
    var btn = document.createElement('button');
    btn.className = 'quiz-opt';
    btn.textContent = o.letters + ' ' + o.ipa;
    btn.onclick = function() { handleQuizAnswer(o, correct, btn); };
    optsDiv.appendChild(btn);
  });

  document.getElementById('quizFeedback').textContent = '';
  document.getElementById('quizFeedback').style.color = '';
  document.getElementById('quizScore').textContent = 'Score: ' + quizState.score + ' / ' + quizState.total;
  document.getElementById('quizNext').textContent = 'Next Question';
  document.getElementById('quizNext').disabled = true;
  renderQuizProgress();
}

function handleQuizAnswer(selected, correct, btn) {
  if (quizState.answered) return;
  quizState.answered = true;
  quizState.total++;

  var isCorrect = selected.id === correct.id;
  quizState.history.push(isCorrect);
  if (isCorrect) quizState.score++;

  var allBtns = document.querySelectorAll('.quiz-opt');
  if (isCorrect) {
    btn.classList.add('correct');
    document.getElementById('quizFeedback').textContent = 'Correct! ' + correct.approx;
    document.getElementById('quizFeedback').style.color = 'var(--green-600)';
  } else {
    btn.classList.add('wrong');
    allBtns.forEach(function(b) {
      if (b.textContent.indexOf(correct.letters) !== -1) b.classList.add('correct');
    });
    document.getElementById('quizFeedback').textContent = 'Not quite. The answer is ' + correct.letters + ' ' + correct.ipa;
    document.getElementById('quizFeedback').style.color = 'var(--red-600)';
  }

  document.getElementById('quizScore').textContent = 'Score: ' + quizState.score + ' / ' + quizState.total;
  document.getElementById('quizNext').disabled = false;

  if (quizState.total >= QUIZ_ROUND) {
    document.getElementById('quizNext').textContent = 'See Results';
  }

  renderQuizProgress();
}

function showQuizResult() {
  var pct = Math.round((quizState.score / QUIZ_ROUND) * 100);
  var msg = '';
  if (pct === 100) msg = 'Perfect score! Excellent knowledge of ' + currentLang.charAt(0).toUpperCase() + currentLang.slice(1) + ' pronunciation rules.';
  else if (pct >= 80) msg = 'Great work! You have a strong grasp of these sound rules.';
  else if (pct >= 60) msg = 'Good effort. Review the sounds you missed and try again.';
  else msg = 'Keep practising! Go back to Explore Sounds to review, then try again.';

  document.getElementById('quizInstruction').textContent = 'Quiz Complete!';
  document.getElementById('quizWord').innerHTML = '<span style="font-size:2.2rem">' + quizState.score + '/' + QUIZ_ROUND + '</span><br><small style="font-size:0.8rem;color:var(--grey-500)">' + pct + '%</small>';
  document.getElementById('quizOpts').innerHTML = '';
  document.getElementById('quizFeedback').textContent = msg;
  document.getElementById('quizFeedback').style.color = pct >= 80 ? 'var(--green-600)' : pct >= 60 ? 'var(--amber-600)' : 'var(--red-600)';
  document.getElementById('quizScore').textContent = '';
  document.getElementById('quizNext').textContent = 'Play Again';
  document.getElementById('quizNext').disabled = false;
  renderQuizProgress();
}

document.getElementById('quizNext').onclick = function() {
  if (quizState.total >= QUIZ_ROUND) {
    quizState = { score:0, total:0, current:null, answered:false, history:[] };
  }
  renderQuiz();
};

document.getElementById('quizReset').onclick = function() {
  quizState = { score:0, total:0, current:null, answered:false, history:[] };
  renderQuiz();
};

init();
</script>
</body>
</html>