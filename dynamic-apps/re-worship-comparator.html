<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Worship Practices Comparator</title>
<style>
  :root {
    --bg-primary: #1a1025;
    --bg-secondary: #2a1a3e;
    --bg-card: #362a50;
    --bg-surface: #241840;
    --text-primary: #f0e6f0;
    --text-secondary: #c8b0d8;
    --text-muted: #907aa8;
    --accent: #d64a8a;
    --accent-light: #f07aaf;
    --accent-dim: #a03068;
    --christianity: #5a9ae0;
    --christianity-bg: rgba(90,154,224,0.12);
    --islam: #3eba7a;
    --islam-bg: rgba(62,186,122,0.12);
    --judaism: #e0b840;
    --judaism-bg: rgba(224,184,64,0.12);
    --hinduism: #e87040;
    --hinduism-bg: rgba(232,112,64,0.12);
    --buddhism: #c878e0;
    --buddhism-bg: rgba(200,120,224,0.12);
    --border-radius: 10px;
    --shadow: 0 4px 20px rgba(0,0,0,0.3);
    --transition: 0.3s ease;
  }

  *, *::before, *::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    line-height: 1.6;
  }

  .header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
    border-bottom: 2px solid var(--accent-dim);
    padding: 16px 24px;
    text-align: center;
  }
  .header h1 {
    font-size: 1.7rem;
    color: var(--accent-light);
    letter-spacing: 1px;
    margin-bottom: 2px;
  }
  .header p {
    font-size: 0.9rem;
    color: var(--text-secondary);
    max-width: 650px;
    margin: 0 auto;
  }

  .info-banner {
    background: linear-gradient(135deg, rgba(214,74,138,0.1), rgba(200,120,224,0.08));
    border: 1px solid rgba(214,74,138,0.2);
    border-radius: var(--border-radius);
    padding: 16px 20px;
    margin: 16px 20px;
    font-size: 0.88rem;
    color: var(--text-secondary);
    line-height: 1.7;
  }
  .info-banner strong {
    color: var(--accent-light);
  }

  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    padding: 14px 20px;
    background: var(--bg-surface);
    border-bottom: 1px solid rgba(214,74,138,0.15);
  }

  .toggle-btn {
    padding: 8px 18px;
    border: 2px solid;
    border-radius: 20px;
    background: transparent;
    color: var(--text-primary);
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
    user-select: none;
  }
  .toggle-btn.active {
    color: #fff;
  }
  .toggle-btn[data-religion="christianity"] { border-color: var(--christianity); }
  .toggle-btn[data-religion="christianity"].active { background: var(--christianity); }
  .toggle-btn[data-religion="islam"] { border-color: var(--islam); }
  .toggle-btn[data-religion="islam"].active { background: var(--islam); }
  .toggle-btn[data-religion="judaism"] { border-color: var(--judaism); }
  .toggle-btn[data-religion="judaism"].active { background: var(--judaism); }
  .toggle-btn[data-religion="hinduism"] { border-color: var(--hinduism); }
  .toggle-btn[data-religion="hinduism"].active { background: var(--hinduism); }
  .toggle-btn[data-religion="buddhism"] { border-color: var(--buddhism); }
  .toggle-btn[data-religion="buddhism"].active { background: var(--buddhism); }

  .toggle-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 10px rgba(0,0,0,0.3);
  }

  .denomination-label {
    font-size: 0.75rem;
    opacity: 0.7;
    margin-left: 4px;
  }

  .main-layout {
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 0;
    min-height: calc(100vh - 200px);
  }

  .chart-area {
    padding: 20px;
    overflow-x: auto;
  }

  .chart-container {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: var(--shadow);
    min-width: 600px;
  }

  .chart-title {
    font-size: 1rem;
    color: var(--accent-light);
    margin-bottom: 4px;
    font-weight: 600;
  }
  .chart-subtitle {
    font-size: 0.8rem;
    color: var(--text-muted);
    margin-bottom: 16px;
  }

  svg.parallel-chart {
    width: 100%;
    height: 420px;
    display: block;
  }

  .axis-label {
    fill: var(--text-secondary);
    font-size: 11px;
    font-weight: 600;
    text-anchor: middle;
  }
  .axis-label-sub {
    fill: var(--text-muted);
    font-size: 9px;
    text-anchor: middle;
  }
  .axis-line {
    stroke: rgba(200,180,220,0.2);
    stroke-width: 1;
  }
  .axis-tick {
    fill: var(--text-muted);
    font-size: 8.5px;
  }
  .axis-tick-low { text-anchor: middle; }
  .axis-tick-high { text-anchor: middle; }

  .thread {
    fill: none;
    stroke-width: 2.5;
    stroke-linecap: round;
    stroke-linejoin: round;
    cursor: pointer;
    transition: opacity 0.3s, stroke-width 0.3s;
  }
  .thread.dimmed {
    opacity: 0.12;
    stroke-width: 1.5;
  }
  .thread.highlighted {
    opacity: 1;
    stroke-width: 4;
    filter: drop-shadow(0 0 6px currentColor);
  }
  .thread-dot {
    cursor: pointer;
    transition: r 0.2s, opacity 0.3s;
  }
  .thread-dot:hover { r: 6; }
  .thread-dot.dimmed { opacity: 0.12; }
  .thread-dot.highlighted { opacity: 1; r: 5.5; }

  .thread-label {
    font-size: 9px;
    font-weight: 600;
    fill: var(--text-primary);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.3s;
  }
  .thread-label.visible { opacity: 1; }

  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-top: 14px;
    justify-content: center;
  }
  .legend-item {
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.78rem;
    color: var(--text-secondary);
    cursor: pointer;
    padding: 3px 8px;
    border-radius: 12px;
    transition: var(--transition);
  }
  .legend-item:hover { background: rgba(255,255,255,0.05); }
  .legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    flex-shrink: 0;
  }
  .legend-name { font-weight: 600; }
  .legend-denom { font-size: 0.7rem; opacity: 0.7; }

  .side-panel {
    background: var(--bg-secondary);
    border-left: 1px solid rgba(214,74,138,0.15);
    padding: 20px;
    overflow-y: auto;
    max-height: calc(100vh - 140px);
    position: sticky;
    top: 140px;
  }
  .side-panel h2 {
    font-size: 1.05rem;
    color: var(--accent-light);
    margin-bottom: 12px;
    padding-bottom: 8px;
    border-bottom: 1px solid rgba(214,74,138,0.2);
  }

  .detail-card {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 14px;
    margin-bottom: 12px;
    border-left: 3px solid var(--accent);
    transition: var(--transition);
  }
  .detail-card.active-card {
    border-left-width: 4px;
    box-shadow: 0 0 12px rgba(214,74,138,0.15);
  }
  .detail-card h3 {
    font-size: 0.92rem;
    margin-bottom: 2px;
  }
  .detail-card .denom-tag {
    font-size: 0.72rem;
    font-weight: 600;
    display: inline-block;
    padding: 1px 8px;
    border-radius: 10px;
    margin-bottom: 6px;
  }
  .detail-card p, .detail-card ul {
    font-size: 0.82rem;
    color: var(--text-secondary);
    line-height: 1.6;
  }
  .detail-card ul {
    padding-left: 16px;
    margin-top: 4px;
  }
  .detail-card li { margin-bottom: 3px; }

  .detail-section {
    margin-top: 8px;
  }
  .detail-section-title {
    font-size: 0.75rem;
    font-weight: 700;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 3px;
  }

  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--text-muted);
    font-size: 0.9rem;
  }

  .comparison-grid {
    display: grid;
    gap: 12px;
    margin-top: 16px;
  }
  .comparison-card {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 14px;
    border-left: 3px solid var(--accent-dim);
  }
  .comparison-card h3 {
    font-size: 0.88rem;
    color: var(--accent-light);
    margin-bottom: 6px;
  }
  .comparison-card p {
    font-size: 0.82rem;
    color: var(--text-secondary);
  }

  .key-terms {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 16px 20px;
    margin-top: 16px;
    box-shadow: var(--shadow);
  }
  .key-terms h3 {
    font-size: 1rem;
    color: var(--accent-light);
    margin-bottom: 10px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(214,74,138,0.2);
  }
  .terms-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 8px;
  }
  .term-item {
    padding: 8px 10px;
    border-radius: 6px;
    background: var(--bg-surface);
    font-size: 0.8rem;
  }
  .term-item strong {
    color: var(--accent-light);
    display: block;
    margin-bottom: 2px;
  }
  .term-item span {
    color: var(--text-secondary);
  }
  .term-item .term-religion {
    font-size: 0.7rem;
    opacity: 0.6;
    margin-left: 4px;
  }

  .reflection-box {
    background: linear-gradient(135deg, rgba(200,120,224,0.08), rgba(214,74,138,0.06));
    border: 1px solid rgba(200,120,224,0.2);
    border-radius: var(--border-radius);
    padding: 16px 20px;
    margin-top: 16px;
  }
  .reflection-box h3 {
    font-size: 0.95rem;
    color: var(--buddhism);
    margin-bottom: 10px;
  }
  .reflection-box ol {
    padding-left: 20px;
    font-size: 0.84rem;
    color: var(--text-secondary);
    line-height: 1.8;
  }
  .reflection-box li { margin-bottom: 4px; }

  .axis-guide {
    background: var(--bg-card);
    border-radius: var(--border-radius);
    padding: 16px 20px;
    margin-top: 16px;
    box-shadow: var(--shadow);
  }
  .axis-guide h3 {
    font-size: 1rem;
    color: var(--accent-light);
    margin-bottom: 10px;
    padding-bottom: 6px;
    border-bottom: 1px solid rgba(214,74,138,0.2);
  }
  .axis-explain {
    display: grid;
    gap: 8px;
  }
  .axis-explain-item {
    display: grid;
    grid-template-columns: 120px 1fr;
    gap: 10px;
    padding: 8px 10px;
    border-radius: 6px;
    background: var(--bg-surface);
    font-size: 0.82rem;
    align-items: start;
  }
  .axis-explain-item strong {
    color: var(--accent-light);
  }
  .axis-explain-item span {
    color: var(--text-secondary);
  }

  @media (max-width: 768px) {
    .main-layout {
      grid-template-columns: 1fr;
    }
    .side-panel {
      position: static;
      max-height: none;
      border-left: none;
      border-top: 1px solid rgba(214,74,138,0.15);
    }
    .header h1 { font-size: 1.3rem; }
    .chart-container { min-width: 500px; }
    svg.parallel-chart { height: 360px; }
    .controls { gap: 6px; }
    .toggle-btn { padding: 6px 12px; font-size: 0.8rem; }
  }
</style>
</head>
<body>

<div class="header">
  <h1>Worship Practices Comparator</h1>
  <p>Compare how different religions and traditions approach worship: from prayer rituals and sacred spaces to the role of music, meditation, and community.</p>
</div>

<div class="info-banner">
  <strong>About this tool:</strong> Worship takes many forms across the world's religions. Even within a single faith, different denominations and traditions can worship in strikingly different ways. This comparator maps worship practices across six dimensions, helping you spot similarities and differences. <strong>Click a thread</strong> on the chart or a religion in the legend to explore its practices in detail. Use the toggles below to filter which traditions are shown.
  <br><br>
  <strong>Note:</strong> The positions on each axis represent general tendencies, not absolutes. There is enormous diversity within every tradition, and individual congregations or practitioners may vary.
</div>

<div class="controls" id="controls"></div>

<div class="main-layout">
  <div class="chart-area">
    <div class="chart-container">
      <div class="chart-title">Parallel Coordinates: Worship Dimensions</div>
      <div class="chart-subtitle">Each thread represents a tradition. Click to highlight and view details.</div>
      <svg class="parallel-chart" id="chart" viewBox="0 0 760 420" preserveAspectRatio="xMidYMid meet"></svg>
      <div class="legend" id="legend"></div>
    </div>

    <div class="comparison-grid" id="comparisonGrid">
      <div class="comparison-card">
        <h3>Frequency of Worship</h3>
        <p>How often adherents are expected or encouraged to worship varies greatly. Muslims pray five times daily (salah), while many Christians attend weekly Sunday services. Buddhist meditation may be practised daily but is less rigidly timed. Judaism includes daily prayers (Shacharit, Mincha, Ma'ariv) alongside the central weekly Shabbat observance.</p>
      </div>
      <div class="comparison-card">
        <h3>Sacred Spaces</h3>
        <p>Churches, mosques, synagogues, mandirs, and temples each reflect distinct theological ideas. A mosque's open, unadorned prayer hall emphasises equality before Allah. A Catholic cathedral's statues and stained glass teach the faith visually. A Quaker meeting house is deliberately plain, reflecting the belief that God speaks directly to each person. Hindu mandirs house murtis (sacred images) as focal points for darshan.</p>
      </div>
      <div class="comparison-card">
        <h3>The Role of Music and Silence</h3>
        <p>Worship sound varies from exuberant gospel choirs and Sikh kirtan to the profound silence of Quaker meetings. Islamic worship avoids musical instruments in the mosque, though the melodic adhan (call to prayer) and Qur'anic recitation have their own beauty. Buddhist chanting creates a meditative atmosphere, while Hindu bhajans and arati ceremonies are vibrant and joyful.</p>
      </div>
      <div class="comparison-card">
        <h3>Community and Individual Practice</h3>
        <p>Some traditions emphasise congregational worship (Friday Jumu'ah prayers, Sunday Mass), while others focus on personal devotion (Buddhist meditation, Hindu puja at a home shrine). Most religions include both communal and private elements, but the balance differs significantly across traditions.</p>
      </div>
      <div class="axis-guide">
        <h3>Understanding the Axes</h3>
        <div class="axis-explain">
          <div class="axis-explain-item">
            <strong>Frequency</strong>
            <span>How often worship occurs, from weekly or occasional gatherings to multiple daily observances. A high score means worship is woven into the fabric of every day.</span>
          </div>
          <div class="axis-explain-item">
            <strong>Formality</strong>
            <span>The degree of set structure and ritual. High formality means fixed prayers, prescribed movements, and a defined liturgical order. Low formality means free, spontaneous worship.</span>
          </div>
          <div class="axis-explain-item">
            <strong>Community Focus</strong>
            <span>Whether worship is primarily a shared, congregational activity or a personal, individual practice. Most traditions include both, but the emphasis varies.</span>
          </div>
          <div class="axis-explain-item">
            <strong>Sacred Text Use</strong>
            <span>How central the reading, recitation, or study of holy scripture is to the act of worship itself. Some traditions revolve around the text; others focus on experience.</span>
          </div>
          <div class="axis-explain-item">
            <strong>Music/Sound</strong>
            <span>The prominence of music, singing, chanting, or instrumental sound in worship. Ranges from profound silence (Quaker, Zen) to vibrant, joyful music (bhajans, gospel).</span>
          </div>
          <div class="axis-explain-item">
            <strong>Meditation vs Prayer</strong>
            <span>Whether the dominant mode is spoken, directed prayer (to God or a deity) or inward contemplation, meditation, and mindfulness. Many traditions blend both.</span>
          </div>
        </div>
      </div>

      <div class="key-terms">
        <h3>Key Vocabulary</h3>
        <div class="terms-grid">
          <div class="term-item">
            <strong>Salah <span class="term-religion">(Islam)</span></strong>
            <span>The five daily prayers, performed facing Makkah, involving specific physical postures and Arabic recitations.</span>
          </div>
          <div class="term-item">
            <strong>Puja <span class="term-religion">(Hinduism)</span></strong>
            <span>Worship involving offerings of flowers, food, and incense to a murti (sacred image) of a deity.</span>
          </div>
          <div class="term-item">
            <strong>Zazen <span class="term-religion">(Buddhism)</span></strong>
            <span>Seated meditation in the Zen tradition, often practised facing a blank wall to minimise distraction.</span>
          </div>
          <div class="term-item">
            <strong>Eucharist <span class="term-religion">(Christianity)</span></strong>
            <span>The sacrament of bread and wine, central to Catholic and many other Christian services (also called Holy Communion or Mass).</span>
          </div>
          <div class="term-item">
            <strong>Shabbat <span class="term-religion">(Judaism)</span></strong>
            <span>The weekly day of rest from Friday evening to Saturday evening, marked by special prayers, meals, and abstaining from work.</span>
          </div>
          <div class="term-item">
            <strong>Dhikr <span class="term-religion">(Islam/Sufism)</span></strong>
            <span>The remembrance of God through repetitive chanting of divine names or phrases, central to Sufi devotion.</span>
          </div>
          <div class="term-item">
            <strong>Darshan <span class="term-religion">(Hinduism)</span></strong>
            <span>The auspicious sight of a deity's image or a holy person; the mutual beholding between worshipper and the divine.</span>
          </div>
          <div class="term-item">
            <strong>Liturgy <span class="term-religion">(Christianity)</span></strong>
            <span>A set form or order of public worship, especially in Catholic, Orthodox, and Anglican traditions.</span>
          </div>
          <div class="term-item">
            <strong>Siddur <span class="term-religion">(Judaism)</span></strong>
            <span>The Jewish prayer book containing the set order of daily, Shabbat, and festival prayers.</span>
          </div>
          <div class="term-item">
            <strong>Sangha <span class="term-religion">(Buddhism)</span></strong>
            <span>The Buddhist community, especially the monastic community of monks and nuns who preserve the teachings.</span>
          </div>
          <div class="term-item">
            <strong>Arati <span class="term-religion">(Hinduism)</span></strong>
            <span>A ritual in which a lighted lamp is waved before the murti as an offering of light to the deity.</span>
          </div>
          <div class="term-item">
            <strong>Khutbah <span class="term-religion">(Islam)</span></strong>
            <span>The sermon delivered by the imam during the Friday congregational prayer (Jumu'ah).</span>
          </div>
        </div>
      </div>

      <div class="reflection-box">
        <h3>Reflection Questions</h3>
        <ol>
          <li>What similarities can you identify between worship practices in different religions? Why might these shared features exist?</li>
          <li>How does the balance between community and individual worship differ across traditions? What might this tell us about each religion's understanding of the divine?</li>
          <li>Why do some traditions (such as Quaker and Zen) value silence, while others (such as Hindu bhajans and Christian gospel) celebrate music? What role does sound play in connecting with the sacred?</li>
          <li>Compare two traditions from the same religion (e.g. Catholic and Quaker, or Sunni and Sufi). What causes such different approaches to worship within the same faith?</li>
          <li>How do sacred spaces reflect the beliefs and values of each religion? Consider what is present and what is deliberately absent.</li>
          <li>Some scholars argue that meditation and prayer are fundamentally different activities, while others see them as two points on a spectrum. Using the traditions shown here, evaluate this claim.</li>
          <li>"The way people worship reveals what they believe about God." How far do you agree with this statement? Use specific examples from the comparator.</li>
        </ol>
      </div>
    </div>
  </div>

  <div class="side-panel" id="sidePanel">
    <h2>Tradition Details</h2>
    <div class="empty-state" id="emptyState">
      Select a tradition from the chart or legend to view detailed worship practices.
    </div>
    <div id="detailContent" style="display:none;"></div>
  </div>
</div>

<script>
(function() {
  'use strict';

  /* ========== DATA ========== */
  const AXES = [
    { key: 'frequency', label: 'Frequency', lowLabel: 'Weekly/occasional', highLabel: 'Multiple daily' },
    { key: 'formality', label: 'Formality', lowLabel: 'Informal/free', highLabel: 'Highly structured' },
    { key: 'community', label: 'Community Focus', lowLabel: 'Individual', highLabel: 'Congregational' },
    { key: 'sacredText', label: 'Sacred Text Use', lowLabel: 'Minimal', highLabel: 'Central' },
    { key: 'music', label: 'Music/Sound', lowLabel: 'Silence', highLabel: 'Rich music' },
    { key: 'meditation', label: 'Meditation vs Prayer', lowLabel: 'Spoken prayer', highLabel: 'Meditation/contemplation' }
  ];

  const TRADITIONS = [
    {
      id: 'catholic',
      religion: 'christianity',
      name: 'Christianity',
      denomination: 'Catholic',
      colour: 'var(--christianity)',
      colourHex: '#5a9ae0',
      values: { frequency: 0.55, formality: 0.9, community: 0.85, sacredText: 0.7, music: 0.75, meditation: 0.3 },
      details: {
        prayer: 'The Mass is the central act of Catholic worship, following a set liturgical structure. Prayers include the Our Father, Hail Mary, and the Rosary. The liturgical calendar shapes daily and seasonal worship.',
        space: 'Catholic churches feature altars, crucifixes, statues of saints, stained glass windows, and the tabernacle housing the consecrated Eucharist. Architecture often uses the cruciform (cross) layout.',
        frequency: 'Weekly Sunday Mass is obligatory; daily Mass is available. Many Catholics also pray the Rosary and the Liturgy of the Hours throughout the day.',
        artefacts: 'Rosary beads, crucifixes, holy water, candles, incense, vestments, chalice and paten for the Eucharist, and sacred images or icons.',
        roles: 'The priest presides over Mass, assisted by deacons, altar servers, lectors, and Eucharistic ministers. The congregation participates through responses, hymns, and receiving the sacraments.',
        music: 'Hymns, psalms, choral music, and organ. Gregorian chant is the traditional form. Modern parishes may use contemporary worship music.'
      }
    },
    {
      id: 'anglican',
      religion: 'christianity',
      name: 'Christianity',
      denomination: 'Anglican',
      colour: 'var(--christianity)',
      colourHex: '#5a9ae0',
      values: { frequency: 0.5, formality: 0.7, community: 0.75, sacredText: 0.75, music: 0.7, meditation: 0.35 },
      details: {
        prayer: 'Anglican worship centres on the Book of Common Prayer or Common Worship. Services include Holy Communion, Morning Prayer, and Evensong. The style ranges from "high church" (Anglo-Catholic) to "low church" (evangelical).',
        space: 'Anglican churches vary from grand cathedrals to simple parish churches. Most feature an altar, lectern, pulpit, font, and often stained glass. Some are plain, others richly decorated.',
        frequency: 'Sunday services are the main gathering. Daily Morning and Evening Prayer are part of the tradition, especially in cathedrals.',
        artefacts: 'The Book of Common Prayer, the Bible, hymn books, altar cloths, candles, and a cross (rather than crucifix in many parishes).',
        roles: 'Priests (vicars/rectors), deacons, lay readers, choir members, and churchwardens. The congregation joins in prayers, hymns, and the sharing of the Peace.',
        music: 'Strong choral tradition, especially in cathedrals (Evensong). Hymns old and new, organ, and increasingly guitars and bands in informal services.'
      }
    },
    {
      id: 'quaker',
      religion: 'christianity',
      name: 'Christianity',
      denomination: 'Quaker',
      colour: 'var(--christianity)',
      colourHex: '#5a9ae0',
      values: { frequency: 0.45, formality: 0.1, community: 0.7, sacredText: 0.3, music: 0.05, meditation: 0.85 },
      details: {
        prayer: 'Quaker worship is based on silent waiting. There is no set liturgy, sermon, or order of service. Members sit in silence, and anyone may speak if they feel moved by the Spirit ("ministry").',
        space: 'Meeting houses are deliberately plain, with no altar, pulpit, or religious imagery. Chairs or benches are arranged in a circle or square to reflect equality.',
        frequency: 'Weekly Meeting for Worship, typically on Sundays. Personal reflection and silent prayer are encouraged daily.',
        artefacts: 'None in formal worship. Quakers reject outward symbols and sacraments, believing the entire life is sacramental.',
        roles: 'No clergy. Elders and overseers care for the meeting community. All are equal; anyone may offer spoken ministry.',
        music: 'Traditionally none. Worship takes place in silence. Some liberal Quaker groups may occasionally include song.'
      }
    },
    {
      id: 'sunni',
      religion: 'islam',
      name: 'Islam',
      denomination: 'Sunni',
      colour: 'var(--islam)',
      colourHex: '#3eba7a',
      values: { frequency: 0.95, formality: 0.95, community: 0.8, sacredText: 0.95, music: 0.2, meditation: 0.25 },
      details: {
        prayer: 'Salah (five daily prayers) is the second Pillar of Islam. Each prayer involves specific rak\'ahs (cycles) of standing, bowing (ruku), and prostrating (sujud), all facing the Ka\'bah in Makkah. Prayers are recited in Arabic.',
        space: 'Mosques are oriented towards Makkah (qibla direction), marked by the mihrab (niche). They feature no images or statues, reflecting tawhid (the oneness of God). Worshippers pray on clean surfaces, often using prayer mats. The minbar (pulpit) is used for the Friday sermon.',
        frequency: 'Five times daily (Fajr, Dhuhr, Asr, Maghrib, Isha). Friday midday (Jumu\'ah) is the main congregational prayer with a sermon (khutbah).',
        artefacts: 'Prayer mat (sajjadah), prayer beads (misbaha/tasbih) for dhikr (remembrance of God), compass for qibla direction, the Qur\'an.',
        roles: 'The imam leads congregational prayer and delivers the khutbah. The muezzin calls the adhan. All Muslims pray in rows, shoulder to shoulder, symbolising equality before Allah.',
        music: 'No musical instruments in the mosque. The beauty of worship comes through melodic Qur\'anic recitation (tajwid) and the adhan. Nasheeds (vocal hymns) may be performed outside formal worship.'
      }
    },
    {
      id: 'sufi',
      religion: 'islam',
      name: 'Islam',
      denomination: 'Sufi',
      colour: 'var(--islam)',
      colourHex: '#3eba7a',
      values: { frequency: 0.85, formality: 0.55, community: 0.65, sacredText: 0.8, music: 0.55, meditation: 0.75 },
      details: {
        prayer: 'Sufis observe the five daily prayers and add devotional practices: dhikr (repetitive chanting of God\'s names), muraqaba (meditation), and sometimes the whirling sema ceremony (as practised by the Mevlevi order). The aim is to draw closer to God through love and direct experience.',
        space: 'Sufis worship in mosques for obligatory prayers but also gather in khanqahs (lodges) or tekkes for communal dhikr, poetry recitation, and sema.',
        frequency: 'Five daily prayers plus additional dhikr sessions, which may be daily or weekly gatherings.',
        artefacts: 'Prayer beads (tasbih) for dhikr, the Qur\'an, poetry collections (especially Rumi and Hafiz), and sometimes musical instruments.',
        roles: 'A shaykh or murshid (spiritual guide) leads the tariqa (order). Disciples (murids) follow a path of spiritual development. The shaykh guides meditation and interpretation.',
        music: 'Qawwali (devotional music, especially in South Asia), the ney (reed flute), frame drums, and vocal chanting feature prominently. Music is seen as a path to spiritual ecstasy.'
      }
    },
    {
      id: 'orthodox-judaism',
      religion: 'judaism',
      name: 'Judaism',
      denomination: 'Orthodox',
      colour: 'var(--judaism)',
      colourHex: '#e0b840',
      values: { frequency: 0.8, formality: 0.85, community: 0.8, sacredText: 0.95, music: 0.4, meditation: 0.2 },
      details: {
        prayer: 'Three daily prayer services: Shacharit (morning), Mincha (afternoon), and Ma\'ariv (evening). Prayers follow the Siddur (prayer book) and are largely in Hebrew. Shabbat services on Friday evening and Saturday morning are central.',
        space: 'Synagogues feature the Aron Kodesh (Holy Ark) housing the Torah scrolls, the bimah (raised platform for Torah reading), and the Ner Tamid (eternal light). Men and women sit separately in Orthodox synagogues.',
        frequency: 'Daily prayers (three times), with additional services on Shabbat and festivals. Study of Torah is itself a form of worship.',
        artefacts: 'Torah scrolls, the Siddur, tefillin (phylacteries worn during weekday morning prayer), tallit (prayer shawl), kippah (head covering), and the shofar (ram\'s horn, blown on Rosh Hashanah).',
        roles: 'The rabbi teaches and interprets Jewish law. The chazzan (cantor) leads singing and chanting. A minyan (quorum of ten adult men in Orthodoxy) is required for certain prayers. The congregation reads responsively.',
        music: 'Cantorial chanting (chazzanut) and congregational singing. No instruments on Shabbat (as playing is considered "work"). The choir features in many communities.'
      }
    },
    {
      id: 'reform-judaism',
      religion: 'judaism',
      name: 'Judaism',
      denomination: 'Reform',
      colour: 'var(--judaism)',
      colourHex: '#e0b840',
      values: { frequency: 0.5, formality: 0.5, community: 0.7, sacredText: 0.7, music: 0.65, meditation: 0.35 },
      details: {
        prayer: 'Reform services blend Hebrew and the vernacular language. Prayers are adapted for modern relevance, and the service is shorter and more accessible than Orthodox worship. Emphasis is on spiritual meaning rather than strict observance of halacha (Jewish law).',
        space: 'Reform synagogues (sometimes called temples) have mixed seating. The bimah and Ark remain central features. Decor tends to be simpler and more modern.',
        frequency: 'Friday evening (Erev Shabbat) is the main service. Saturday morning services are held but attendance is less strictly observed. Daily prayer is encouraged but not required.',
        artefacts: 'Torah scrolls, prayer books (often bilingual), kippah (optional for some), tallit worn by all genders. Musical instruments may be used.',
        roles: 'Rabbis (including women, ordained since 1972 in Reform Judaism), cantors, and lay leaders. Full participation of all genders.',
        music: 'Organ, guitar, choir, and congregational singing feature prominently. Musical instruments are permitted on Shabbat, unlike in Orthodox practice.'
      }
    },
    {
      id: 'hindu-mandir',
      religion: 'hinduism',
      name: 'Hinduism',
      denomination: 'Mandir worship',
      colour: 'var(--hinduism)',
      colourHex: '#e87040',
      values: { frequency: 0.7, formality: 0.65, community: 0.6, sacredText: 0.55, music: 0.8, meditation: 0.4 },
      details: {
        prayer: 'Puja (worship) in a mandir involves making offerings (flowers, fruit, incense) to the murti (sacred image) of a deity. Arati (waving a flame before the murti) is a central ritual. Devotees seek darshan: the blessing received by seeing and being seen by the deity.',
        space: 'Mandirs house murtis in an inner sanctum (garbhagriha). The temple is considered the home of the deity. Architecture follows sacred geometry, and the space is richly decorated with carvings, paintings, and bright colours.',
        frequency: 'Mandirs hold daily arati ceremonies (morning and evening). Festivals bring large gatherings. Many Hindus also worship daily at a home shrine.',
        artefacts: 'Murtis, arati lamp, incense, flowers, coconut, bell (ghanta), conch shell (shankha), sacred thread, kumkum and turmeric paste.',
        roles: 'Pujaris (temple priests) perform rituals and care for the murtis. Devotees participate by offering gifts, singing bhajans, and receiving prasad (blessed food). Gurus may guide spiritual practice.',
        music: 'Bhajans (devotional songs), kirtan (call-and-response chanting), and the sounds of bells, drums (mridangam, tabla), and the harmonium are integral to Hindu worship.'
      }
    },
    {
      id: 'hindu-yoga',
      religion: 'hinduism',
      name: 'Hinduism',
      denomination: 'Yogic/meditative',
      colour: 'var(--hinduism)',
      colourHex: '#e87040',
      values: { frequency: 0.75, formality: 0.35, community: 0.25, sacredText: 0.5, music: 0.3, meditation: 0.95 },
      details: {
        prayer: 'Yogic worship focuses on personal spiritual discipline: meditation (dhyana), breath control (pranayama), and mantra recitation (such as Om or the Gayatri Mantra). The aim is union (yoga) with Brahman, the ultimate reality.',
        space: 'Ashrams (spiritual retreats) and quiet, simple meditation spaces. A home shrine or even a natural setting may serve as the worship space. The emphasis is internal rather than on outward grandeur.',
        frequency: 'Daily practice is encouraged, often at dawn and dusk (sandhya). Serious practitioners may meditate for hours each day.',
        artefacts: 'Mala beads (for mantra counting), incense, a small murti or image, yoga mat, and sacred texts (Bhagavad Gita, Upanishads, Yoga Sutras).',
        roles: 'A guru (teacher) guides the disciple on the spiritual path. The relationship between guru and student is deeply important. Practice is largely individual.',
        music: 'Mantras chanted aloud or silently, the sound of Om, and the drone of the tanpura may accompany meditation. Music is secondary to inner silence.'
      }
    },
    {
      id: 'theravada',
      religion: 'buddhism',
      name: 'Buddhism',
      denomination: 'Theravada',
      colour: 'var(--buddhism)',
      colourHex: '#c878e0',
      values: { frequency: 0.7, formality: 0.5, community: 0.45, sacredText: 0.6, music: 0.25, meditation: 0.95 },
      details: {
        prayer: 'Theravada Buddhist worship centres on meditation (vipassana and samatha), chanting of Pali suttas, and paying respect to the Buddha. Worship is not prayer to a god, but a practice of mindfulness, ethical reflection, and devotion.',
        space: 'Temples (viharas) feature a Buddha image as a focal point for devotion. They are often serene and simple. Monks live in attached monasteries. Meditation halls are plain and calm.',
        frequency: 'Monks meditate and chant daily. Lay Buddhists may attend the temple weekly or on uposatha (observance) days. Personal meditation is encouraged daily.',
        artefacts: 'Buddha statues and images, incense, candles, lotus flowers offered at shrines, alms bowls (for monks), and palm-leaf manuscripts of the Pali Canon.',
        roles: 'The Sangha (community of monks and nuns) preserves teachings and leads by example. Lay people support monks through dana (giving). Monks lead chanting and give Dhamma talks.',
        music: 'Pali chanting (often low and rhythmic), bells, and gongs. Music is minimal; the emphasis is on the inner experience of meditation and mindfulness.'
      }
    },
    {
      id: 'zen',
      religion: 'buddhism',
      name: 'Buddhism',
      denomination: 'Zen (Mahayana)',
      colour: 'var(--buddhism)',
      colourHex: '#c878e0',
      values: { frequency: 0.75, formality: 0.6, community: 0.5, sacredText: 0.35, music: 0.15, meditation: 0.98 },
      details: {
        prayer: 'Zen practice centres on zazen (seated meditation), often facing a wall. The aim is direct insight into the nature of reality, beyond words and concepts. Koans (paradoxical riddles) may be used to break through conventional thinking.',
        space: 'Zendos (meditation halls) are austere and minimalist. A Buddha image and simple altar may be present, but the space is defined by emptiness and order. Gardens (such as rock gardens) embody Zen aesthetics.',
        frequency: 'Daily zazen sessions, often twice a day. Intensive retreats (sesshin) involve days of near-continuous meditation.',
        artefacts: 'Zafu (meditation cushion), keisu (bell), mokugyo (wooden fish drum for chanting rhythm), incense. The emphasis is on practice, not objects.',
        roles: 'A roshi (Zen master) guides practitioners through dokusan (private interviews). The community (sangha) supports practice through shared meditation and work (samu).',
        music: 'Minimal. Chanting of sutras (such as the Heart Sutra) is rhythmic and repetitive. Bells mark transitions. Silence is the predominant sound.'
      }
    }
  ];

  const RELIGIONS = [
    { id: 'christianity', name: 'Christianity', colour: 'var(--christianity)', hex: '#5a9ae0' },
    { id: 'islam', name: 'Islam', colour: 'var(--islam)', hex: '#3eba7a' },
    { id: 'judaism', name: 'Judaism', colour: 'var(--judaism)', hex: '#e0b840' },
    { id: 'hinduism', name: 'Hinduism', colour: 'var(--hinduism)', hex: '#e87040' },
    { id: 'buddhism', name: 'Buddhism', colour: 'var(--buddhism)', hex: '#c878e0' }
  ];

  /* ========== STATE ========== */
  let activeReligions = new Set(RELIGIONS.map(r => r.id));
  let highlightedTradition = null;

  /* ========== CONTROLS ========== */
  function buildControls() {
    const container = document.getElementById('controls');
    RELIGIONS.forEach(r => {
      const btn = document.createElement('button');
      btn.className = 'toggle-btn active';
      btn.dataset.religion = r.id;
      btn.textContent = r.name;
      btn.addEventListener('click', () => {
        if (activeReligions.has(r.id)) {
          activeReligions.delete(r.id);
          btn.classList.remove('active');
        } else {
          activeReligions.add(r.id);
          btn.classList.add('active');
        }
        renderChart();
        updateSidePanel();
      });
      container.appendChild(btn);
    });
  }

  /* ========== CHART ========== */
  const SVG_NS = 'http://www.w3.org/2000/svg';
  const CHART_PAD = { top: 50, bottom: 40, left: 50, right: 50 };
  const CHART_W = 760;
  const CHART_H = 420;
  const PLOT_W = CHART_W - CHART_PAD.left - CHART_PAD.right;
  const PLOT_H = CHART_H - CHART_PAD.top - CHART_PAD.bottom;

  function axisX(i) {
    return CHART_PAD.left + (i / (AXES.length - 1)) * PLOT_W;
  }
  function valueY(v) {
    return CHART_PAD.top + PLOT_H - (v * PLOT_H);
  }

  function createSVGEl(tag, attrs) {
    const el = document.createElementNS(SVG_NS, tag);
    for (const [k, v] of Object.entries(attrs || {})) el.setAttribute(k, v);
    return el;
  }

  function renderChart() {
    const svg = document.getElementById('chart');
    svg.innerHTML = '';

    // Axes
    AXES.forEach((axis, i) => {
      const x = axisX(i);
      svg.appendChild(createSVGEl('line', {
        x1: x, y1: CHART_PAD.top - 5, x2: x, y2: CHART_PAD.top + PLOT_H + 5,
        class: 'axis-line'
      }));
      // Ticks at 0, 0.25, 0.5, 0.75, 1
      for (let t = 0; t <= 1; t += 0.25) {
        const y = valueY(t);
        svg.appendChild(createSVGEl('line', {
          x1: x - 3, y1: y, x2: x + 3, y2: y,
          stroke: 'rgba(200,180,220,0.15)', 'stroke-width': '1'
        }));
      }
      // Label
      const label = createSVGEl('text', { x: x, y: CHART_PAD.top - 22, class: 'axis-label' });
      label.textContent = axis.label;
      svg.appendChild(label);
      // Low/high labels
      const low = createSVGEl('text', { x: x, y: CHART_PAD.top + PLOT_H + 18, class: 'axis-tick axis-tick-low' });
      low.textContent = axis.lowLabel;
      svg.appendChild(low);
      const high = createSVGEl('text', { x: x, y: CHART_PAD.top - 10, class: 'axis-tick axis-tick-high' });
      high.textContent = axis.highLabel;
      svg.appendChild(high);
    });

    // Threads
    const visibleTraditions = TRADITIONS.filter(t => activeReligions.has(t.religion));
    visibleTraditions.forEach(trad => {
      const points = AXES.map((axis, i) => {
        const x = axisX(i);
        const y = valueY(trad.values[axis.key]);
        return `${x},${y}`;
      });

      const isDimmed = highlightedTradition && highlightedTradition !== trad.id;
      const isHighlighted = highlightedTradition === trad.id;

      // Path
      const path = createSVGEl('path', {
        d: 'M' + points.join('L'),
        class: 'thread' + (isDimmed ? ' dimmed' : '') + (isHighlighted ? ' highlighted' : ''),
        stroke: trad.colourHex,
        'data-id': trad.id
      });
      path.style.color = trad.colourHex;
      path.addEventListener('click', () => selectTradition(trad.id));
      svg.appendChild(path);

      // Dots
      AXES.forEach((axis, i) => {
        const cx = axisX(i);
        const cy = valueY(trad.values[axis.key]);
        const dot = createSVGEl('circle', {
          cx: cx, cy: cy, r: 4,
          fill: trad.colourHex,
          class: 'thread-dot' + (isDimmed ? ' dimmed' : '') + (isHighlighted ? ' highlighted' : ''),
          'data-id': trad.id
        });
        dot.addEventListener('click', () => selectTradition(trad.id));
        svg.appendChild(dot);
      });

      // Label on first axis
      if (isHighlighted) {
        const lx = axisX(0) - 8;
        const ly = valueY(trad.values[AXES[0].key]);
        const lbl = createSVGEl('text', {
          x: lx, y: ly - 8,
          class: 'thread-label visible',
          fill: trad.colourHex,
          'text-anchor': 'end'
        });
        lbl.textContent = trad.denomination;
        svg.appendChild(lbl);
      }
    });

    buildLegend(visibleTraditions);
  }

  function buildLegend(traditions) {
    const container = document.getElementById('legend');
    container.innerHTML = '';
    traditions.forEach(trad => {
      const item = document.createElement('div');
      item.className = 'legend-item';
      item.innerHTML = `<span class="legend-dot" style="background:${trad.colourHex}"></span>
        <span class="legend-name">${trad.name}</span>
        <span class="legend-denom">${trad.denomination}</span>`;
      item.addEventListener('click', () => selectTradition(trad.id));
      container.appendChild(item);
    });
  }

  /* ========== SELECTION ========== */
  function selectTradition(id) {
    if (highlightedTradition === id) {
      highlightedTradition = null;
    } else {
      highlightedTradition = id;
    }
    renderChart();
    updateSidePanel();
  }

  function updateSidePanel() {
    const empty = document.getElementById('emptyState');
    const content = document.getElementById('detailContent');

    if (!highlightedTradition) {
      empty.style.display = 'block';
      content.style.display = 'none';
      return;
    }

    const trad = TRADITIONS.find(t => t.id === highlightedTradition);
    if (!trad || !activeReligions.has(trad.religion)) {
      highlightedTradition = null;
      empty.style.display = 'block';
      content.style.display = 'none';
      return;
    }

    empty.style.display = 'none';
    content.style.display = 'block';

    const bgVar = `var(--${trad.religion}-bg)`;
    const colVar = trad.colourHex;

    const sections = [
      { title: 'Prayer and Ritual', key: 'prayer' },
      { title: 'Sacred Space', key: 'space' },
      { title: 'Frequency', key: 'frequency' },
      { title: 'Artefacts', key: 'artefacts' },
      { title: 'Roles in Worship', key: 'roles' },
      { title: 'Music and Sound', key: 'music' }
    ];

    let html = `<div class="detail-card active-card" style="border-left-color:${colVar}; background:${bgVar}">
      <h3 style="color:${colVar}">${trad.name}</h3>
      <span class="denom-tag" style="background:${colVar}; color:#fff">${trad.denomination}</span>`;

    sections.forEach(sec => {
      html += `<div class="detail-section">
        <div class="detail-section-title">${sec.title}</div>
        <p>${trad.details[sec.key]}</p>
      </div>`;
    });

    // Axis values summary
    html += `<div class="detail-section">
      <div class="detail-section-title">Chart Values</div>
      <ul>`;
    AXES.forEach(axis => {
      const val = trad.values[axis.key];
      const pct = Math.round(val * 100);
      const bar = '\u2588'.repeat(Math.round(val * 10)) + '\u2591'.repeat(10 - Math.round(val * 10));
      html += `<li><strong>${axis.label}:</strong> ${bar} ${pct}%</li>`;
    });
    html += `</ul></div></div>`;

    // Show other traditions from same religion for comparison
    const siblings = TRADITIONS.filter(t => t.religion === trad.religion && t.id !== trad.id && activeReligions.has(t.religion));
    if (siblings.length > 0) {
      html += `<h2 style="margin-top:16px;">Other ${trad.name} Traditions</h2>`;
      siblings.forEach(sib => {
        html += `<div class="detail-card" style="border-left-color:${sib.colourHex}; cursor:pointer;" onclick="document.dispatchEvent(new CustomEvent('selectTrad',{detail:'${sib.id}'}))">
          <h3 style="color:${sib.colourHex}">${sib.denomination}</h3>
          <p>${sib.details.prayer.substring(0, 120)}...</p>
        </div>`;
      });
    }

    content.innerHTML = html;
  }

  document.addEventListener('selectTrad', function(e) {
    selectTradition(e.detail);
  });

  /* ========== INIT ========== */
  buildControls();
  renderChart();
})();
</script>
</body>
</html>