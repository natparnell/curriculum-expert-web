<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rights &amp; Responsibilities Balancer</title>
<style>
:root {
  --pink-50: #fdf2f8;
  --pink-100: #fce7f3;
  --pink-200: #fbcfe8;
  --pink-300: #f9a8d4;
  --pink-400: #f472b6;
  --pink-500: #ec4899;
  --pink-600: #db2777;
  --pink-700: #be185d;
  --pink-800: #9d174d;
  --pink-900: #831843;
  --magenta-500: #d946ef;
  --magenta-600: #c026d3;
  --magenta-700: #a21caf;
  --slate-50: #f8fafc;
  --slate-100: #f1f5f9;
  --slate-200: #e2e8f0;
  --slate-300: #cbd5e1;
  --slate-400: #94a3b8;
  --slate-500: #64748b;
  --slate-600: #475569;
  --slate-700: #334155;
  --slate-800: #1e293b;
  --slate-900: #0f172a;
  --rights-colour: #7c3aed;
  --resp-colour: #0891b2;
  --bg: var(--pink-50);
  --surface: #ffffff;
  --text: var(--slate-800);
  --text-muted: var(--slate-500);
  --border: var(--pink-200);
  --accent: var(--pink-600);
  --accent-light: var(--pink-100);
  --radius: 10px;
  --shadow: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg: 0 4px 16px rgba(0,0,0,0.12);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
}
header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: linear-gradient(135deg, var(--pink-700), var(--magenta-700));
  color: white;
  padding: 14px 24px;
  box-shadow: var(--shadow-lg);
}
header h1 { font-size: 1.35rem; font-weight: 700; }
header p { font-size: 0.82rem; opacity: 0.9; margin-top: 2px; }
.container { max-width: 1100px; margin: 0 auto; padding: 20px 16px 40px; }

/* Perspective Tabs */
.perspective-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 20px;
  justify-content: center;
}
.perspective-btn {
  padding: 8px 16px;
  border: 2px solid var(--border);
  border-radius: 24px;
  background: var(--surface);
  color: var(--text);
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}
.perspective-btn:hover { border-color: var(--pink-400); background: var(--pink-100); }
.perspective-btn.active {
  background: var(--accent);
  color: white;
  border-color: var(--accent);
}

/* Scenario Selector */
.scenario-bar {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-bottom: 24px;
  justify-content: center;
}
.scenario-btn {
  padding: 7px 14px;
  border: 2px solid var(--slate-200);
  border-radius: 8px;
  background: var(--surface);
  font-size: 0.8rem;
  cursor: pointer;
  transition: all 0.2s;
  font-weight: 500;
}
.scenario-btn:hover { border-color: var(--magenta-500); }
.scenario-btn.active { background: var(--magenta-600); color: white; border-color: var(--magenta-600); }

.scenario-desc {
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  padding: 16px 20px;
  margin-bottom: 24px;
  font-size: 0.9rem;
}
.scenario-desc h3 { color: var(--magenta-700); margin-bottom: 6px; font-size: 1rem; }

/* See-Saw Area */
.seesaw-area {
  position: relative;
  width: 100%;
  max-width: 700px;
  margin: 0 auto 30px;
  height: 320px;
}
.seesaw-svg {
  width: 100%;
  height: 100%;
}
.seesaw-beam {
  transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
  transform-origin: 350px 200px;
}
.fulcrum { fill: var(--slate-600); }
.beam-rect { fill: var(--slate-700); rx: 6; }
.drop-zone {
  fill: transparent;
  stroke: var(--slate-300);
  stroke-width: 2;
  stroke-dasharray: 6 4;
  rx: 8;
  cursor: pointer;
  transition: all 0.2s;
}
.drop-zone.hover { stroke: var(--accent); stroke-width: 3; fill: rgba(236, 72, 153, 0.08); }
.drop-zone-label {
  font-size: 13px;
  fill: var(--slate-400);
  text-anchor: middle;
  pointer-events: none;
  font-weight: 600;
}
.balance-label {
  font-size: 14px;
  font-weight: 700;
  text-anchor: middle;
  pointer-events: none;
}
.placed-card-text {
  font-size: 10px;
  fill: white;
  text-anchor: middle;
  pointer-events: none;
  font-weight: 600;
}
.placed-card-rect {
  rx: 4;
  cursor: grab;
}

/* Card Trays */
.card-trays {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin-bottom: 28px;
}
.card-tray {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 16px;
  box-shadow: var(--shadow);
  border-top: 4px solid var(--slate-300);
}
.card-tray.rights { border-top-color: var(--rights-colour); }
.card-tray.resp { border-top-color: var(--resp-colour); }
.card-tray h3 {
  font-size: 0.9rem;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 6px;
}
.card-tray.rights h3 { color: var(--rights-colour); }
.card-tray.resp h3 { color: var(--resp-colour); }
.tray-cards { display: flex; flex-wrap: wrap; gap: 8px; min-height: 40px; }

.card {
  padding: 7px 12px;
  border-radius: 6px;
  font-size: 0.78rem;
  font-weight: 600;
  cursor: grab;
  user-select: none;
  transition: transform 0.15s, box-shadow 0.15s;
  white-space: nowrap;
  position: relative;
}
.card:hover { transform: translateY(-2px); box-shadow: var(--shadow-lg); }
.card.dragging { opacity: 0.4; }
.card.rights-card {
  background: linear-gradient(135deg, #8b5cf6, #7c3aed);
  color: white;
}
.card.resp-card {
  background: linear-gradient(135deg, #06b6d4, #0891b2);
  color: white;
}
.card .weight-badge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: var(--slate-800);
  color: white;
  font-size: 0.65rem;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
}

/* Weighting Explanation */
.weighting-panel {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 18px 20px;
  box-shadow: var(--shadow);
  margin-bottom: 24px;
  border-left: 4px solid var(--accent);
}
.weighting-panel h3 { font-size: 0.95rem; color: var(--accent); margin-bottom: 8px; }
.weighting-panel p { font-size: 0.85rem; color: var(--slate-600); }

/* Controls Row */
.controls-row {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-bottom: 24px;
  flex-wrap: wrap;
}
.ctrl-btn {
  padding: 8px 18px;
  border: 2px solid var(--border);
  border-radius: 8px;
  background: var(--surface);
  font-size: 0.82rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
}
.ctrl-btn:hover { background: var(--pink-100); border-color: var(--pink-400); }
.ctrl-btn.primary { background: var(--accent); color: white; border-color: var(--accent); }
.ctrl-btn.primary:hover { background: var(--pink-700); }

/* Discussion Prompts */
.discussion-section {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 20px;
  box-shadow: var(--shadow);
  margin-bottom: 24px;
}
.discussion-section h3 {
  font-size: 1rem;
  color: var(--magenta-700);
  margin-bottom: 12px;
}
.discussion-prompts { list-style: none; }
.discussion-prompts li {
  padding: 10px 14px;
  background: var(--pink-50);
  border-radius: 8px;
  margin-bottom: 8px;
  font-size: 0.85rem;
  border-left: 3px solid var(--magenta-500);
  color: var(--slate-700);
}

/* Info Panel */
.info-panel {
  background: var(--surface);
  border-radius: var(--radius);
  padding: 20px;
  box-shadow: var(--shadow);
  margin-bottom: 24px;
}
.info-panel h3 {
  font-size: 1rem;
  color: var(--pink-700);
  margin-bottom: 12px;
}
.info-tabs { display: flex; gap: 6px; margin-bottom: 14px; flex-wrap: wrap; }
.info-tab {
  padding: 6px 12px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--surface);
  font-size: 0.78rem;
  cursor: pointer;
  font-weight: 600;
  transition: all 0.2s;
}
.info-tab:hover { background: var(--pink-100); }
.info-tab.active { background: var(--pink-600); color: white; border-color: var(--pink-600); }
.info-content { font-size: 0.85rem; color: var(--slate-600); line-height: 1.7; }
.info-content strong { color: var(--slate-800); }
.info-content p { margin-bottom: 8px; }

/* Score Display */
.score-display {
  text-align: center;
  margin-bottom: 16px;
  font-size: 0.9rem;
  color: var(--slate-600);
}
.score-display .side-score {
  display: inline-block;
  padding: 4px 14px;
  border-radius: 6px;
  font-weight: 700;
  margin: 0 8px;
}
.score-display .rights-score { background: rgba(124,58,237,0.12); color: var(--rights-colour); }
.score-display .resp-score { background: rgba(8,145,178,0.12); color: var(--resp-colour); }

@media (max-width: 768px) {
  header { padding: 12px 16px; }
  header h1 { font-size: 1.15rem; }
  .card-trays { grid-template-columns: 1fr; }
  .seesaw-area { height: 260px; }
  .perspective-btn { padding: 6px 12px; font-size: 0.78rem; }
  .scenario-btn { font-size: 0.75rem; padding: 6px 10px; }
  .container { padding: 14px 12px 30px; }
}
</style>
</head>
<body>

<header>
  <h1>Rights &amp; Responsibilities Balancer</h1>
  <p>Explore how religious and secular perspectives balance individual rights against community responsibilities</p>
</header>

<div class="container">

  <!-- Perspective Selector -->
  <div class="perspective-bar" id="perspectiveBar"></div>

  <!-- Scenario Selector -->
  <div class="scenario-bar" id="scenarioBar"></div>

  <!-- Scenario Description -->
  <div class="scenario-desc" id="scenarioDesc"></div>

  <!-- Weighting Explanation -->
  <div class="weighting-panel" id="weightingPanel"></div>

  <!-- Score Display -->
  <div class="score-display" id="scoreDisplay">
    <span class="side-score rights-score">Rights: 0</span>
    <span>vs</span>
    <span class="side-score resp-score">Responsibilities: 0</span>
  </div>

  <!-- See-Saw SVG -->
  <div class="seesaw-area">
    <svg class="seesaw-svg" viewBox="0 0 700 320" id="seesawSvg">
      <!-- Fulcrum -->
      <polygon class="fulcrum" points="350,280 320,230 380,230" />
      <g class="seesaw-beam" id="seesawBeam">
        <!-- Beam -->
        <rect class="beam-rect" x="50" y="195" width="600" height="12" />
        <!-- Left drop zone (Rights) -->
        <rect class="drop-zone" id="dropLeft" x="70" y="105" width="230" height="85" />
        <text class="drop-zone-label" x="185" y="155">Drop Rights Here</text>
        <!-- Right drop zone (Responsibilities) -->
        <rect class="drop-zone" id="dropRight" x="400" y="105" width="230" height="85" />
        <text class="drop-zone-label" x="515" y="155">Drop Responsibilities Here</text>
        <!-- Placed cards will be added here -->
        <g id="placedCardsLeft"></g>
        <g id="placedCardsRight"></g>
      </g>
      <!-- Balance indicator -->
      <text class="balance-label" id="balanceLabel" x="350" y="310" fill="var(--slate-500)">Balanced</text>
    </svg>
  </div>

  <!-- Controls -->
  <div class="controls-row">
    <button class="ctrl-btn primary" onclick="resetBoard()">Reset Board</button>
    <button class="ctrl-btn" onclick="autoPlace()">Auto-place All</button>
    <button class="ctrl-btn" onclick="toggleDiscussion()">Discussion Prompts</button>
  </div>

  <!-- Card Trays -->
  <div class="card-trays">
    <div class="card-tray rights">
      <h3><span>&#9733;</span> Rights Cards</h3>
      <div class="tray-cards" id="rightsTray"></div>
    </div>
    <div class="card-tray resp">
      <h3><span>&#9830;</span> Responsibilities Cards</h3>
      <div class="tray-cards" id="respTray"></div>
    </div>
  </div>

  <!-- Discussion Prompts -->
  <div class="discussion-section" id="discussionSection" style="display:none;">
    <h3>Discussion Prompts</h3>
    <ul class="discussion-prompts" id="discussionPrompts"></ul>
  </div>

  <!-- Info Panel -->
  <div class="info-panel">
    <h3>Key Background Information</h3>
    <div class="info-tabs" id="infoTabs"></div>
    <div class="info-content" id="infoContent"></div>
  </div>

</div>

<script>
/* ============================================================
   DATA
   ============================================================ */
const PERSPECTIVES = [
  { id: 'christian', label: 'Christian' },
  { id: 'islamic', label: 'Islamic' },
  { id: 'jewish', label: 'Jewish' },
  { id: 'hindu', label: 'Hindu' },
  { id: 'secular', label: 'Secular Humanist' }
];

const RIGHTS_CARDS = [
  { id: 'speech', label: 'Freedom of Speech' },
  { id: 'religion', label: 'Religious Expression' },
  { id: 'privacy', label: 'Right to Privacy' },
  { id: 'autonomy', label: 'Personal Autonomy' }
];

const RESP_CARDS = [
  { id: 'duty', label: 'Duty to Others' },
  { id: 'welfare', label: 'Community Welfare' },
  { id: 'law', label: 'Obey the Law' },
  { id: 'protect', label: 'Protect the Vulnerable' }
];

const SCENARIOS = [
  {
    id: 'dress',
    label: 'Religious Dress in Schools',
    title: 'Religious Dress in Schools',
    desc: 'A secondary school in England introduces a strict uniform policy that prohibits all head coverings. This affects pupils who wear the hijab, turban, or kippah for religious reasons. The school argues the policy promotes equality and cohesion; affected families argue it restricts religious freedom.',
    prompts: [
      'Should a school be allowed to ban religious head coverings if it applies the rule equally to everyone?',
      'Does treating everyone the same always mean treating everyone fairly? How might this differ depending on perspective?',
      'How does Article 9 of the European Convention on Human Rights (freedom of thought, conscience and religion) apply here?',
      'What responsibilities does the school community have towards pupils from minority faith backgrounds?',
      'How might a utilitarian argue differently from a natural law theorist on this issue?'
    ]
  },
  {
    id: 'euthanasia',
    label: 'Euthanasia',
    title: 'Euthanasia and End-of-Life Choice',
    desc: 'A terminally ill patient with six months to live requests assisted dying. They are in significant pain and say continuing to live contradicts their dignity. Their family is divided: some support the request, while others believe life should be preserved. The law currently prohibits assisted dying in the UK.',
    prompts: [
      'Does personal autonomy ("my body, my choice") outweigh the community responsibility to protect life?',
      'How does the concept of sanctity of life influence religious perspectives on this issue?',
      'Is there a meaningful moral difference between "letting someone die" and actively ending their life?',
      'What responsibilities do healthcare professionals have when their personal beliefs conflict with a patient\'s wishes?',
      'How should society balance compassion for suffering with the risk of a "slippery slope"?'
    ]
  },
  {
    id: 'objection',
    label: 'Conscientious Objection',
    title: 'Conscientious Objection',
    desc: 'A registrar at a local council refuses to conduct same-sex marriages, citing their sincere religious belief that marriage is exclusively between a man and a woman. They request to be reassigned to other duties. The council must decide whether to accommodate this request or require all registrars to perform the same role.',
    prompts: [
      'Should religious conscience be protected even when it conflicts with anti-discrimination law?',
      'How do we balance one person\'s right to religious freedom with another person\'s right not to face discrimination?',
      'Is there a difference between a private citizen\'s beliefs and what we can expect from public servants?',
      'What would Kant say about making exceptions to universal duties based on personal belief?',
      'How do different religious traditions view the tension between obedience to God and obedience to the state?'
    ]
  },
  {
    id: 'speech',
    label: 'Hate Speech vs Free Speech',
    title: 'Hate Speech versus Free Speech',
    desc: 'A street preacher quotes passages from their holy scripture that describe homosexuality as sinful. Some passers-by feel offended and unsafe; others say the preacher is exercising their right to religious expression. The police are called and must decide whether the speech constitutes a hate crime or is protected religious expression.',
    prompts: [
      'Where should the line be drawn between free speech and hate speech?',
      'Does quoting a sacred text automatically make speech "religious expression" and therefore protected?',
      'What responsibilities do individuals have to consider the impact of their words on others?',
      'How might the Golden Rule (found in many traditions) apply to this situation?',
      'Should the law treat religious speech differently from other forms of public speech?'
    ]
  },
  {
    id: 'charity',
    label: 'Charity and Wealth',
    title: 'Charitable Giving and Wealth Inequality',
    desc: 'A billionaire donates millions to build a state-of-the-art academy in a deprived area but insists the school follows a particular religious ethos, including daily worship and faith-based admissions criteria. Local families welcome the investment but worry about inclusivity for children of other faiths or no faith.',
    prompts: [
      'Does the right to use personal wealth as one chooses override the community\'s right to inclusive education?',
      'How do different religious teachings on wealth, charity, and generosity apply here (e.g. zakat, tzedakah, dana)?',
      'Should charitable giving come with conditions, or should it serve the common good without strings attached?',
      'What responsibilities do wealthy individuals have towards society, and who decides what those are?',
      'Is it possible to balance religious ethos in a school with genuine inclusivity?'
    ]
  }
];

/* Weightings: perspective -> scenario -> { cardId: weight (1-5) }
   Higher weight = that card is considered more important by this perspective */
const WEIGHTINGS = {
  christian: {
    dress: { speech: 2, religion: 5, privacy: 2, autonomy: 2, duty: 4, welfare: 3, law: 3, protect: 4 },
    euthanasia: { speech: 2, religion: 3, privacy: 2, autonomy: 1, duty: 5, welfare: 4, law: 4, protect: 5 },
    objection: { speech: 3, religion: 5, privacy: 2, autonomy: 3, duty: 4, welfare: 3, law: 3, protect: 4 },
    speech: { speech: 4, religion: 5, privacy: 2, autonomy: 3, duty: 4, welfare: 3, law: 3, protect: 3 },
    charity: { speech: 2, religion: 4, privacy: 2, autonomy: 3, duty: 5, welfare: 4, law: 2, protect: 4 }
  },
  islamic: {
    dress: { speech: 2, religion: 5, privacy: 4, autonomy: 2, duty: 4, welfare: 4, law: 3, protect: 4 },
    euthanasia: { speech: 1, religion: 4, privacy: 2, autonomy: 1, duty: 5, welfare: 5, law: 4, protect: 5 },
    objection: { speech: 2, religion: 5, privacy: 2, autonomy: 2, duty: 5, welfare: 4, law: 4, protect: 4 },
    speech: { speech: 3, religion: 5, privacy: 3, autonomy: 2, duty: 5, welfare: 4, law: 4, protect: 4 },
    charity: { speech: 2, religion: 4, privacy: 2, autonomy: 2, duty: 5, welfare: 5, law: 3, protect: 5 }
  },
  jewish: {
    dress: { speech: 3, religion: 5, privacy: 3, autonomy: 3, duty: 4, welfare: 4, law: 4, protect: 4 },
    euthanasia: { speech: 2, religion: 4, privacy: 2, autonomy: 2, duty: 5, welfare: 4, law: 4, protect: 5 },
    objection: { speech: 3, religion: 5, privacy: 2, autonomy: 3, duty: 4, welfare: 3, law: 4, protect: 3 },
    speech: { speech: 3, religion: 5, privacy: 3, autonomy: 3, duty: 4, welfare: 4, law: 4, protect: 3 },
    charity: { speech: 2, religion: 4, privacy: 2, autonomy: 3, duty: 5, welfare: 5, law: 3, protect: 4 }
  },
  hindu: {
    dress: { speech: 2, religion: 4, privacy: 3, autonomy: 3, duty: 5, welfare: 4, law: 3, protect: 4 },
    euthanasia: { speech: 2, religion: 3, privacy: 2, autonomy: 2, duty: 5, welfare: 4, law: 3, protect: 5 },
    objection: { speech: 3, religion: 4, privacy: 2, autonomy: 3, duty: 5, welfare: 4, law: 3, protect: 4 },
    speech: { speech: 3, religion: 4, privacy: 3, autonomy: 3, duty: 5, welfare: 4, law: 3, protect: 4 },
    charity: { speech: 2, religion: 3, privacy: 2, autonomy: 3, duty: 5, welfare: 5, law: 2, protect: 5 }
  },
  secular: {
    dress: { speech: 4, religion: 3, privacy: 4, autonomy: 5, duty: 3, welfare: 4, law: 4, protect: 3 },
    euthanasia: { speech: 3, religion: 1, privacy: 4, autonomy: 5, duty: 3, welfare: 3, law: 3, protect: 4 },
    objection: { speech: 4, religion: 2, privacy: 3, autonomy: 4, duty: 4, welfare: 4, law: 5, protect: 4 },
    speech: { speech: 5, religion: 2, privacy: 4, autonomy: 5, duty: 3, welfare: 4, law: 4, protect: 4 },
    charity: { speech: 3, religion: 1, privacy: 3, autonomy: 4, duty: 4, welfare: 5, law: 4, protect: 5 }
  }
};

const PERSPECTIVE_EXPLANATIONS = {
  christian: {
    dress: 'Christianity teaches that faith should be lived openly. Many Christians value religious expression highly, citing passages such as Matthew 5:16 ("Let your light shine before others"). However, Christians also recognise the duty to live peaceably within society (Romans 13:1) and to consider the needs of others before oneself.',
    euthanasia: 'Most Christian traditions uphold the sanctity of life as a core principle: life is a gift from God and only God should decide when it ends. The commandment "You shall not kill" (Exodus 20:13) is central. Responsibilities to protect the vulnerable and care for the suffering are given very high importance, while personal autonomy is weighed against divine authority.',
    objection: 'Christians have a long tradition of conscientious objection rooted in the idea that obedience to God takes priority over obedience to the state (Acts 5:29). However, many Christians also value civic duty and recognise the need to balance personal conviction with service to all members of the community.',
    speech: 'Christianity values proclaiming the Gospel, but Jesus also taught love for one\'s neighbour and the Golden Rule (Matthew 7:12). Many Christians argue that speech, even when rooted in scripture, must be delivered with compassion and respect for human dignity.',
    charity: 'Generosity is a core Christian virtue ("It is more blessed to give than to receive," Acts 20:35). However, Christian charity is also tied to serving others selflessly. There is tension between the right to direct one\'s giving and the duty to prioritise the common good.'
  },
  islamic: {
    dress: 'Islam places great emphasis on modest dress and religious identity. The hijab and other coverings are seen by many Muslims as religious obligations rooted in the Quran (24:31). The ummah (community) and collective welfare are also highly valued, meaning individual rights are often understood within the context of communal responsibility.',
    euthanasia: 'Islam teaches that life belongs to Allah alone, and only Allah has the right to give or take it. Suicide and assisted dying are considered haram (forbidden). The duty to care for the sick and protect the vulnerable is paramount. Personal autonomy in matters of life and death is subordinated to divine will.',
    objection: 'In Islam, obedience to Allah\'s commands takes precedence, but Muslims are also taught to honour their agreements and serve their communities faithfully. The concept of maslaha (public interest) means individual conscience must be weighed against the greater good.',
    speech: 'Islam values da\'wah (calling others to faith) but also teaches adab (good manners) and forbids causing unnecessary harm. The Quran states that there should be "no compulsion in religion" (2:256), and speech should be delivered with wisdom and beautiful preaching (16:125).',
    charity: 'Zakat (obligatory charity) is one of the Five Pillars of Islam. Wealth is seen as a trust from Allah, and there is a strong duty to redistribute it for the benefit of the community. Sadaqah (voluntary charity) should be given sincerely and without conditions that exclude others.'
  },
  jewish: {
    dress: 'Judaism emphasises religious observance in daily life, including the wearing of the kippah, tzitzit, and other items. Halakha (Jewish law) guides practice, and religious identity is deeply tied to communal belonging. However, the principle of dina d\'malkhuta dina (the law of the land is the law) also carries weight.',
    euthanasia: 'Judaism teaches pikuach nefesh: the preservation of life overrides almost all other commandments. Active euthanasia is prohibited, though there is nuanced debate about withdrawing treatment in certain circumstances. The duty to visit the sick (bikur cholim) and protect life is paramount.',
    objection: 'Jewish tradition values both religious conscience and civic responsibility. The Talmudic principle of dina d\'malkhuta dina encourages respect for secular law, but where law conflicts with Torah, many Jewish authorities argue that divine commandments take precedence.',
    speech: 'Judaism takes the power of speech very seriously. The concept of lashon hara (evil speech) prohibits harmful gossip and slander. However, speaking truth and standing up for justice are also religious duties. The balance between truthful expression and protecting others from harm is carefully considered.',
    charity: 'Tzedakah (justice-based giving) is a core Jewish obligation, not merely optional generosity. Maimonides outlined levels of giving, with the highest being helping someone become self-sufficient. Jewish teaching emphasises that wealth carries communal responsibility.'
  },
  hindu: {
    dress: 'Hinduism encompasses diverse practices, but the concept of dharma (duty/righteousness) is central. Religious expression is valued, but so is the idea that one\'s personal dharma must be balanced against social dharma. Ahimsa (non-violence) and respect for all beings shape how Hindus approach conflicts between individual and community.',
    euthanasia: 'Hindu views on euthanasia are complex. The concept of ahimsa discourages killing, while the law of karma suggests that suffering may have spiritual significance. However, some Hindu thinkers argue that a "good death" (prayopavesa) may be acceptable in extreme circumstances. Duty to family and community remains central.',
    objection: 'Hindu dharma emphasises fulfilling one\'s duties according to one\'s role and stage of life (varnashrama dharma). A public servant might be expected to fulfil their professional duties even if personal beliefs conflict. However, following one\'s conscience (atman) is also important.',
    speech: 'Hinduism values satya (truthfulness) as a cardinal virtue, but truth must be spoken with kindness: "Speak the truth, speak what is pleasant" (Manusmriti). Dharma requires balancing honest expression with the responsibility not to cause harm.',
    charity: 'Dana (charitable giving) is a key Hindu virtue and is considered a dharmic duty. However, Hindu teaching also warns against giving with strings attached or from ego. True generosity serves the welfare of all (sarvodaya) without creating division.'
  },
  secular: {
    dress: 'Secular humanism emphasises individual liberty, equality before the law, and freedom from religious imposition. While personal autonomy and expression are highly valued, humanists also recognise that schools must balance individual rights with creating an inclusive environment for all pupils regardless of background.',
    euthanasia: 'Secular humanists generally support individual autonomy as a core principle, including the right to make decisions about one\'s own death. Without belief in divinely ordained sanctity of life, the focus shifts to quality of life, personal dignity, and compassionate end-of-life care, balanced against safeguards to protect the vulnerable.',
    objection: 'Secular humanism typically argues that public servants should fulfil their role regardless of personal beliefs, since the law represents the democratically agreed will of the people. Religious conscience is respected as a private matter, but it should not override equal treatment in public services.',
    speech: 'Secular humanists strongly defend free speech as foundational to democracy and progress. However, they also recognise that speech can cause real harm and that the right to speak freely comes with a responsibility to consider the impact on others, particularly marginalised groups.',
    charity: 'Secular humanism values evidence-based approaches to reducing inequality. While individuals have the right to use their wealth, humanists argue that charitable giving should prioritise the common good and not be used to impose particular worldviews on communities, especially vulnerable ones like children.'
  }
};

const INFO_PANELS = {
  udhr: {
    label: 'UDHR',
    content: `<p><strong>The Universal Declaration of Human Rights (1948)</strong> was adopted by the United Nations General Assembly in response to the atrocities of the Second World War. It sets out 30 articles covering fundamental rights and freedoms that belong to every person.</p>
<p>Key articles relevant to this topic include: <strong>Article 18</strong> (freedom of thought, conscience and religion), <strong>Article 19</strong> (freedom of opinion and expression), <strong>Article 29</strong> (duties to the community; rights may be limited to respect the rights of others and meet the just requirements of morality, public order and the general welfare).</p>
<p>The UDHR establishes that rights are not absolute: they exist alongside responsibilities. Article 29 explicitly states that everyone has duties to the community and that rights may be subject to limitations determined by law.</p>`
  },
  christian_teach: {
    label: 'Christian Teaching',
    content: `<p><strong>Christianity and Rights:</strong> Christianity affirms the inherent dignity of every person, made in the image of God (imago Dei, Genesis 1:27). This provides a theological basis for human rights.</p>
<p><strong>Responsibilities:</strong> Jesus summarised the law as loving God and loving your neighbour as yourself (Mark 12:30-31). The Parable of the Good Samaritan (Luke 10) teaches that responsibility extends beyond one's own community. St Paul taught that Christians should submit to governing authorities (Romans 13) but also that they must obey God rather than human beings when the two conflict (Acts 5:29).</p>
<p><strong>Key principle:</strong> Rights and responsibilities are inseparable. The freedom Christ offers comes with a call to serve others (Galatians 5:13).</p>`
  },
  islamic_teach: {
    label: 'Islamic Teaching',
    content: `<p><strong>Islam and Rights:</strong> Islam teaches that all humans have dignity as Allah's creation (Quran 17:70). The concept of khilafah (stewardship) means humans are trustees of the earth and must act justly.</p>
<p><strong>Responsibilities:</strong> The Five Pillars (especially zakat and hajj) embed social responsibility into worship. The Quran repeatedly links faith with good deeds and social justice (Quran 4:135). The concept of ummah emphasises collective welfare, and Sharia aims to protect five essentials: life, intellect, lineage, wealth, and religion.</p>
<p><strong>Key principle:</strong> In Islam, rights are given by Allah and come with corresponding duties. Individual rights exist within the framework of communal responsibility and divine law.</p>`
  },
  jewish_teach: {
    label: 'Jewish Teaching',
    content: `<p><strong>Judaism and Rights:</strong> Judaism emphasises the infinite value of every human life, created b'tselem Elohim (in the image of God). The Torah provides extensive laws protecting the vulnerable, including strangers, orphans, and widows.</p>
<p><strong>Responsibilities:</strong> The 613 mitzvot (commandments) create a framework of duties rather than rights. Tikkun olam (repairing the world) calls Jews to active social responsibility. The prophetic tradition (e.g. Amos, Micah) emphasises justice for the oppressed.</p>
<p><strong>Key principle:</strong> Judaism tends to frame ethics in terms of obligations rather than rights. Your duty to others defines the moral life more than your claims for yourself.</p>`
  },
  hindu_teach: {
    label: 'Hindu Teaching',
    content: `<p><strong>Hinduism and Rights:</strong> Hinduism teaches that the divine (Brahman/Atman) resides in all beings, giving every person inherent worth. The concept of dharma provides a framework for righteous living that includes both personal and social dimensions.</p>
<p><strong>Responsibilities:</strong> Dharma varies according to one's stage of life (ashrama) and role in society. Ahimsa (non-violence), satya (truthfulness), and seva (selfless service) are core duties. The Bhagavad Gita teaches that one should focus on performing one's duty without attachment to the results (nishkama karma).</p>
<p><strong>Key principle:</strong> Hinduism emphasises duties (kartavya) over rights. Fulfilling one's dharma serves the cosmic order (rita) and benefits the whole community.</p>`
  },
  secular_teach: {
    label: 'Secular Humanism',
    content: `<p><strong>Secular Humanism and Rights:</strong> Secular humanism grounds human rights in human dignity, reason, and empathy rather than divine authority. The Humanist tradition was influential in drafting the UDHR.</p>
<p><strong>Responsibilities:</strong> Humanists believe that moral responsibility arises from our shared humanity and our capacity for empathy and reason. The Golden Rule (treat others as you would wish to be treated) appears across humanist thinking. Social contracts, democratic participation, and evidence-based ethics guide how responsibilities are understood.</p>
<p><strong>Key principle:</strong> Rights and responsibilities are human constructs that should be continually evaluated through reason, evidence, and compassion to maximise wellbeing and minimise suffering.</p>`
  }
};

/* ============================================================
   STATE
   ============================================================ */
let currentPerspective = 'christian';
let currentScenario = 'dress';
let placedLeft = [];   // { cardId, type:'rights'|'resp' }
let placedRight = [];
let dragData = null;
let showDiscussion = false;
let currentInfoTab = 'udhr';

/* ============================================================
   RENDER
   ============================================================ */
function getWeight(cardId) {
  return WEIGHTINGS[currentPerspective][currentScenario][cardId] || 1;
}

function renderPerspectives() {
  const bar = document.getElementById('perspectiveBar');
  bar.innerHTML = PERSPECTIVES.map(p =>
    `<button class="perspective-btn ${p.id === currentPerspective ? 'active' : ''}" onclick="setPerspective('${p.id}')">${p.label}</button>`
  ).join('');
}

function renderScenarios() {
  const bar = document.getElementById('scenarioBar');
  bar.innerHTML = SCENARIOS.map(s =>
    `<button class="scenario-btn ${s.id === currentScenario ? 'active' : ''}" onclick="setScenario('${s.id}')">${s.label}</button>`
  ).join('');
  const sc = SCENARIOS.find(s => s.id === currentScenario);
  document.getElementById('scenarioDesc').innerHTML = `<h3>${sc.title}</h3><p>${sc.desc}</p>`;
}

function renderWeightingPanel() {
  const panel = document.getElementById('weightingPanel');
  const perspLabel = PERSPECTIVES.find(p => p.id === currentPerspective).label;
  const explanation = PERSPECTIVE_EXPLANATIONS[currentPerspective][currentScenario];
  panel.innerHTML = `<h3>${perspLabel} Perspective</h3><p>${explanation}</p>`;
}

function renderCards() {
  const rightsTray = document.getElementById('rightsTray');
  const respTray = document.getElementById('respTray');
  const placedIds = [...placedLeft, ...placedRight].map(c => c.cardId);

  rightsTray.innerHTML = RIGHTS_CARDS.filter(c => !placedIds.includes(c.id)).map(c => {
    const w = getWeight(c.id);
    return `<div class="card rights-card" draggable="true" data-id="${c.id}" data-type="rights" ondragstart="onDragStart(event)">${c.label}<span class="weight-badge">${w}</span></div>`;
  }).join('');

  respTray.innerHTML = RESP_CARDS.filter(c => !placedIds.includes(c.id)).map(c => {
    const w = getWeight(c.id);
    return `<div class="card resp-card" draggable="true" data-id="${c.id}" data-type="resp" ondragstart="onDragStart(event)">${c.label}<span class="weight-badge">${w}</span></div>`;
  }).join('');

  addTouchListeners();
}

function renderPlacedCards() {
  const leftG = document.getElementById('placedCardsLeft');
  const rightG = document.getElementById('placedCardsRight');

  leftG.innerHTML = placedLeft.map((c, i) => {
    const w = getWeight(c.cardId);
    const label = getAllCards().find(x => x.id === c.cardId).label;
    const colour = c.type === 'rights' ? 'var(--rights-colour)' : 'var(--resp-colour)';
    const x = 75 + (i % 2) * 115;
    const y = 110 + Math.floor(i / 2) * 28;
    return `<rect class="placed-card-rect" x="${x}" y="${y}" width="108" height="24" fill="${colour}" data-card="${c.cardId}" data-side="left" onclick="removeCard('${c.cardId}','left')"/>
            <text class="placed-card-text" x="${x + 54}" y="${y + 16}">${truncate(label, 14)} (${w})</text>`;
  }).join('');

  rightG.innerHTML = placedRight.map((c, i) => {
    const w = getWeight(c.cardId);
    const label = getAllCards().find(x => x.id === c.cardId).label;
    const colour = c.type === 'rights' ? 'var(--rights-colour)' : 'var(--resp-colour)';
    const x = 405 + (i % 2) * 115;
    const y = 110 + Math.floor(i / 2) * 28;
    return `<rect class="placed-card-rect" x="${x}" y="${y}" width="108" height="24" fill="${colour}" data-card="${c.cardId}" data-side="right" onclick="removeCard('${c.cardId}','right')"/>
            <text class="placed-card-text" x="${x + 54}" y="${y + 16}">${truncate(label, 14)} (${w})</text>`;
  }).join('');
}

function truncate(str, max) {
  return str.length > max ? str.substring(0, max - 1) + '\u2026' : str;
}

function getAllCards() {
  return [...RIGHTS_CARDS, ...RESP_CARDS];
}

function updateSeeSaw() {
  const leftTotal = placedLeft.reduce((sum, c) => sum + getWeight(c.cardId), 0);
  const rightTotal = placedRight.reduce((sum, c) => sum + getWeight(c.cardId), 0);
  const diff = leftTotal - rightTotal;
  const maxTilt = 12;
  const tilt = Math.max(-maxTilt, Math.min(maxTilt, diff * 1.5));
  const beam = document.getElementById('seesawBeam');
  beam.style.transform = `rotate(${tilt}deg)`;

  const label = document.getElementById('balanceLabel');
  if (leftTotal === 0 && rightTotal === 0) {
    label.textContent = 'Place cards on the see-saw';
    label.setAttribute('fill', 'var(--slate-400)');
  } else if (Math.abs(diff) <= 1) {
    label.textContent = 'Roughly Balanced';
    label.setAttribute('fill', '#16a34a');
  } else if (diff > 1) {
    label.textContent = 'Tilting towards Rights';
    label.setAttribute('fill', 'var(--rights-colour)');
  } else {
    label.textContent = 'Tilting towards Responsibilities';
    label.setAttribute('fill', 'var(--resp-colour)');
  }

  document.getElementById('scoreDisplay').innerHTML =
    `<span class="side-score rights-score">Rights side: ${leftTotal}</span>` +
    ` <span>vs</span> ` +
    `<span class="side-score resp-score">Responsibilities side: ${rightTotal}</span>`;
}

function renderDiscussion() {
  const sc = SCENARIOS.find(s => s.id === currentScenario);
  const section = document.getElementById('discussionSection');
  section.style.display = showDiscussion ? 'block' : 'none';
  document.getElementById('discussionPrompts').innerHTML = sc.prompts.map(p => `<li>${p}</li>`).join('');
}

function renderInfoPanel() {
  const tabs = document.getElementById('infoTabs');
  const keys = Object.keys(INFO_PANELS);
  tabs.innerHTML = keys.map(k =>
    `<button class="info-tab ${k === currentInfoTab ? 'active' : ''}" onclick="setInfoTab('${k}')">${INFO_PANELS[k].label}</button>`
  ).join('');
  document.getElementById('infoContent').innerHTML = INFO_PANELS[currentInfoTab].content;
}

function renderAll() {
  renderPerspectives();
  renderScenarios();
  renderWeightingPanel();
  renderCards();
  renderPlacedCards();
  updateSeeSaw();
  renderDiscussion();
  renderInfoPanel();
}

/* ============================================================
   ACTIONS
   ============================================================ */
function setPerspective(id) {
  currentPerspective = id;
  renderAll();
}

function setScenario(id) {
  currentScenario = id;
  placedLeft = [];
  placedRight = [];
  showDiscussion = false;
  renderAll();
}

function setInfoTab(id) {
  currentInfoTab = id;
  renderInfoPanel();
}

function resetBoard() {
  placedLeft = [];
  placedRight = [];
  renderAll();
}

function autoPlace() {
  placedLeft = RIGHTS_CARDS.map(c => ({ cardId: c.id, type: 'rights' }));
  placedRight = RESP_CARDS.map(c => ({ cardId: c.id, type: 'resp' }));
  renderAll();
}

function toggleDiscussion() {
  showDiscussion = !showDiscussion;
  renderDiscussion();
}

function removeCard(cardId, side) {
  if (side === 'left') {
    placedLeft = placedLeft.filter(c => c.cardId !== cardId);
  } else {
    placedRight = placedRight.filter(c => c.cardId !== cardId);
  }
  renderAll();
}

function placeCard(cardId, type, side) {
  const allPlaced = [...placedLeft, ...placedRight];
  if (allPlaced.find(c => c.cardId === cardId)) return;
  if (side === 'left') {
    if (placedLeft.length >= 4) return;
    placedLeft.push({ cardId, type });
  } else {
    if (placedRight.length >= 4) return;
    placedRight.push({ cardId, type });
  }
  renderAll();
}

/* ============================================================
   DRAG AND DROP (Mouse)
   ============================================================ */
function onDragStart(e) {
  const id = e.target.getAttribute('data-id');
  const type = e.target.getAttribute('data-type');
  e.dataTransfer.setData('text/plain', JSON.stringify({ id, type }));
  e.target.classList.add('dragging');
  setTimeout(() => e.target.classList.remove('dragging'), 100);
}

function setupDropZones() {
  const dropLeft = document.getElementById('dropLeft');
  const dropRight = document.getElementById('dropRight');

  [dropLeft, dropRight].forEach(zone => {
    zone.addEventListener('dragover', e => {
      e.preventDefault();
      zone.classList.add('hover');
    });
    zone.addEventListener('dragleave', () => zone.classList.remove('hover'));
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.classList.remove('hover');
      try {
        const data = JSON.parse(e.dataTransfer.getData('text/plain'));
        const side = zone.id === 'dropLeft' ? 'left' : 'right';
        placeCard(data.id, data.type, side);
      } catch (err) { /* ignore */ }
    });
  });
}

/* ============================================================
   TOUCH SUPPORT
   ============================================================ */
let touchDragEl = null;
let touchClone = null;

function addTouchListeners() {
  document.querySelectorAll('.card[draggable]').forEach(card => {
    card.addEventListener('touchstart', onTouchStart, { passive: false });
  });
}

function onTouchStart(e) {
  e.preventDefault();
  const card = e.currentTarget;
  const touch = e.touches[0];
  const rect = card.getBoundingClientRect();

  dragData = {
    id: card.getAttribute('data-id'),
    type: card.getAttribute('data-type')
  };

  touchClone = card.cloneNode(true);
  touchClone.style.position = 'fixed';
  touchClone.style.zIndex = '9999';
  touchClone.style.width = rect.width + 'px';
  touchClone.style.pointerEvents = 'none';
  touchClone.style.opacity = '0.85';
  touchClone.style.transform = 'scale(1.05)';
  document.body.appendChild(touchClone);

  moveTouchClone(touch);

  card.classList.add('dragging');
  touchDragEl = card;

  document.addEventListener('touchmove', onTouchMove, { passive: false });
  document.addEventListener('touchend', onTouchEnd);
}

function moveTouchClone(touch) {
  if (!touchClone) return;
  touchClone.style.left = (touch.clientX - 50) + 'px';
  touchClone.style.top = (touch.clientY - 20) + 'px';
}

function onTouchMove(e) {
  e.preventDefault();
  const touch = e.touches[0];
  moveTouchClone(touch);

  const dropLeft = document.getElementById('dropLeft');
  const dropRight = document.getElementById('dropRight');
  const svg = document.getElementById('seesawSvg');
  const svgRect = svg.getBoundingClientRect();

  [dropLeft, dropRight].forEach(zone => {
    const zoneBox = getZoneScreenRect(zone, svgRect, svg);
    if (touch.clientX >= zoneBox.left && touch.clientX <= zoneBox.right &&
        touch.clientY >= zoneBox.top && touch.clientY <= zoneBox.bottom) {
      zone.classList.add('hover');
    } else {
      zone.classList.remove('hover');
    }
  });
}

function onTouchEnd(e) {
  document.removeEventListener('touchmove', onTouchMove);
  document.removeEventListener('touchend', onTouchEnd);

  if (touchClone) {
    touchClone.remove();
    touchClone = null;
  }
  if (touchDragEl) {
    touchDragEl.classList.remove('dragging');
    touchDragEl = null;
  }

  if (!dragData || !e.changedTouches.length) { dragData = null; return; }

  const touch = e.changedTouches[0];
  const svg = document.getElementById('seesawSvg');
  const svgRect = svg.getBoundingClientRect();
  const dropLeft = document.getElementById('dropLeft');
  const dropRight = document.getElementById('dropRight');

  [dropLeft, dropRight].forEach(zone => zone.classList.remove('hover'));

  const leftBox = getZoneScreenRect(dropLeft, svgRect, svg);
  const rightBox = getZoneScreenRect(dropRight, svgRect, svg);

  if (touch.clientX >= leftBox.left && touch.clientX <= leftBox.right &&
      touch.clientY >= leftBox.top && touch.clientY <= leftBox.bottom) {
    placeCard(dragData.id, dragData.type, 'left');
  } else if (touch.clientX >= rightBox.left && touch.clientX <= rightBox.right &&
             touch.clientY >= rightBox.top && touch.clientY <= rightBox.bottom) {
    placeCard(dragData.id, dragData.type, 'right');
  }

  dragData = null;
}

function getZoneScreenRect(zone, svgRect, svg) {
  const viewBox = svg.viewBox.baseVal;
  const scaleX = svgRect.width / viewBox.width;
  const scaleY = svgRect.height / viewBox.height;

  const x = parseFloat(zone.getAttribute('x'));
  const y = parseFloat(zone.getAttribute('y'));
  const w = parseFloat(zone.getAttribute('width'));
  const h = parseFloat(zone.getAttribute('height'));

  /* Account for beam rotation */
  const beam = document.getElementById('seesawBeam');
  const beamTransform = beam.style.transform;
  const angle = beamTransform ? parseFloat(beamTransform.match(/-?[\d.]+/) || 0) : 0;
  const rad = angle * Math.PI / 180;

  const cx = 350, cy = 200;
  const corners = [
    { x: x, y: y },
    { x: x + w, y: y },
    { x: x, y: y + h },
    { x: x + w, y: y + h }
  ].map(pt => {
    const dx = pt.x - cx, dy = pt.y - cy;
    return {
      x: cx + dx * Math.cos(rad) - dy * Math.sin(rad),
      y: cy + dx * Math.sin(rad) + dy * Math.cos(rad)
    };
  });

  const minX = Math.min(...corners.map(c => c.x));
  const maxX = Math.max(...corners.map(c => c.x));
  const minY = Math.min(...corners.map(c => c.y));
  const maxY = Math.max(...corners.map(c => c.y));

  return {
    left: svgRect.left + minX * scaleX,
    right: svgRect.left + maxX * scaleX,
    top: svgRect.top + minY * scaleY,
    bottom: svgRect.top + maxY * scaleY
  };
}

/* ============================================================
   INIT
   ============================================================ */
document.addEventListener('DOMContentLoaded', () => {
  renderAll();
  setupDropZones();
});
</script>
</body>
</html>