<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Narrative Perspective Shifter</title>
<style>
  :root {
    --bg: #faf6f0;
    --bg-panel: #ffffff;
    --bg-header: #2c3e50;
    --text: #2c2c2c;
    --text-light: #5a5a5a;
    --text-muted: #8a8a8a;
    --teal: #1a8a7d;
    --teal-light: #e0f5f2;
    --teal-dark: #14695f;
    --amber: #d4880f;
    --amber-light: #fdf3e0;
    --amber-dark: #a96b0a;
    --rose: #c0506a;
    --rose-light: #fce8ed;
    --violet: #7c5cbf;
    --violet-light: #f0eafa;
    --border: #ddd5c8;
    --border-light: #ece6db;
    --shadow: rgba(44, 62, 80, 0.08);
    --radius: 8px;
    --radius-sm: 5px;
    --font: 'Georgia', 'Times New Roman', serif;
    --font-ui: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    --highlight-pronoun: #1a8a7d;
    --highlight-pronoun-bg: #e0f5f2;
    --highlight-thought: #c0506a;
    --highlight-thought-bg: #fce8ed;
    --highlight-distance: #7c5cbf;
    --highlight-distance-bg: #f0eafa;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: var(--font);
    background: var(--bg);
    color: var(--text);
    line-height: 1.7;
    min-height: 100vh;
  }

  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--bg-header);
    color: #fff;
    padding: 16px 24px;
    box-shadow: 0 2px 12px var(--shadow);
  }

  header h1 {
    font-size: 1.5rem;
    font-weight: 700;
    letter-spacing: 0.02em;
  }

  header p {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    opacity: 0.8;
    margin-top: 2px;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
  }

  /* Controls Bar */
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    align-items: center;
    margin-bottom: 20px;
    padding: 16px 20px;
    background: var(--bg-panel);
    border: 1px solid var(--border-light);
    border-radius: var(--radius);
    box-shadow: 0 1px 4px var(--shadow);
  }

  .controls label {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    font-weight: 600;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .scene-buttons {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
  }

  .scene-btn {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    padding: 7px 16px;
    border: 2px solid var(--border);
    border-radius: 20px;
    background: var(--bg);
    color: var(--text);
    cursor: pointer;
    transition: all 0.2s;
  }

  .scene-btn:hover { border-color: var(--teal); color: var(--teal); }
  .scene-btn.active { background: var(--teal); color: #fff; border-color: var(--teal); }

  .view-toggle {
    margin-left: auto;
    display: flex;
    gap: 4px;
    background: var(--bg);
    border-radius: 20px;
    padding: 3px;
    border: 1px solid var(--border-light);
  }

  .view-btn {
    font-family: var(--font-ui);
    font-size: 0.8rem;
    padding: 5px 14px;
    border: none;
    border-radius: 18px;
    background: transparent;
    color: var(--text-light);
    cursor: pointer;
    transition: all 0.2s;
  }

  .view-btn.active { background: var(--teal); color: #fff; }

  /* Compare Selectors */
  .compare-selectors {
    display: none;
    gap: 12px;
    align-items: center;
    margin-bottom: 16px;
    padding: 12px 20px;
    background: var(--amber-light);
    border: 1px solid var(--amber);
    border-radius: var(--radius);
    font-family: var(--font-ui);
    font-size: 0.85rem;
  }

  .compare-selectors.visible { display: flex; flex-wrap: wrap; }

  .compare-selectors select {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    padding: 5px 10px;
    border: 1px solid var(--amber);
    border-radius: var(--radius-sm);
    background: #fff;
  }

  /* Highlight Legend */
  .legend {
    display: flex;
    flex-wrap: wrap;
    gap: 16px;
    margin-bottom: 20px;
    padding: 12px 20px;
    background: var(--bg-panel);
    border: 1px solid var(--border-light);
    border-radius: var(--radius);
    font-family: var(--font-ui);
    font-size: 0.82rem;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .legend-swatch {
    display: inline-block;
    width: 14px;
    height: 14px;
    border-radius: 3px;
  }

  .swatch-pronoun { background: var(--highlight-pronoun-bg); border: 2px solid var(--highlight-pronoun); }
  .swatch-thought { background: var(--highlight-thought-bg); border: 2px solid var(--highlight-thought); }
  .swatch-distance { background: var(--highlight-distance-bg); border: 2px solid var(--highlight-distance); }

  /* Panels Grid */
  .panels-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
    margin-bottom: 24px;
  }

  .panels-grid.quad { grid-template-columns: 1fr 1fr; }
  .panels-grid.compare { grid-template-columns: 1fr 1fr; }

  .panel {
    background: var(--bg-panel);
    border: 1px solid var(--border-light);
    border-radius: var(--radius);
    box-shadow: 0 2px 8px var(--shadow);
    overflow: hidden;
    transition: box-shadow 0.2s;
  }

  .panel:hover { box-shadow: 0 4px 16px rgba(44, 62, 80, 0.12); }

  .panel-header {
    padding: 12px 18px;
    font-family: var(--font-ui);
    font-weight: 700;
    font-size: 0.9rem;
    border-bottom: 1px solid var(--border-light);
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  .panel-header .perspective-label {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .panel-header .person-tag {
    font-size: 0.7rem;
    padding: 2px 8px;
    border-radius: 10px;
    font-weight: 600;
  }

  .tag-1st { background: var(--teal-light); color: var(--teal-dark); }
  .tag-2nd { background: var(--amber-light); color: var(--amber-dark); }
  .tag-3rd-l { background: var(--rose-light); color: var(--rose); }
  .tag-3rd-o { background: var(--violet-light); color: var(--violet); }

  .panel-body {
    padding: 18px;
    font-size: 0.95rem;
    line-height: 1.85;
  }

  .panel-body p { margin-bottom: 10px; }
  .panel-body p:last-child { margin-bottom: 0; }

  /* Highlights */
  .hl-pronoun {
    background: var(--highlight-pronoun-bg);
    color: var(--highlight-pronoun);
    padding: 1px 4px;
    border-radius: 3px;
    font-weight: 600;
  }

  .hl-thought {
    background: var(--highlight-thought-bg);
    color: var(--highlight-thought);
    padding: 1px 4px;
    border-radius: 3px;
    font-style: italic;
  }

  .hl-distance {
    background: var(--highlight-distance-bg);
    color: var(--highlight-distance);
    padding: 1px 4px;
    border-radius: 3px;
  }

  /* Info & Summary Sections */
  .info-section, .summary-section {
    background: var(--bg-panel);
    border: 1px solid var(--border-light);
    border-radius: var(--radius);
    box-shadow: 0 2px 8px var(--shadow);
    margin-bottom: 24px;
    overflow: hidden;
  }

  .section-header {
    padding: 14px 20px;
    font-family: var(--font-ui);
    font-weight: 700;
    font-size: 1rem;
    background: var(--bg);
    border-bottom: 1px solid var(--border-light);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    user-select: none;
  }

  .section-header:hover { background: var(--teal-light); }
  .section-header .chevron { transition: transform 0.3s; font-size: 0.8rem; }
  .section-header.open .chevron { transform: rotate(180deg); }

  .section-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s ease;
  }

  .section-body.open { max-height: 2000px; }

  .section-body-inner { padding: 20px; }

  /* Perspective Info Cards */
  .perspective-cards {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  .persp-card {
    padding: 16px;
    border-radius: var(--radius);
    border-left: 4px solid;
  }

  .persp-card h4 {
    font-family: var(--font-ui);
    font-size: 0.9rem;
    margin-bottom: 8px;
  }

  .persp-card p, .persp-card li {
    font-family: var(--font-ui);
    font-size: 0.82rem;
    color: var(--text-light);
    line-height: 1.6;
  }

  .persp-card ul { padding-left: 18px; margin-top: 6px; }
  .persp-card li { margin-bottom: 3px; }

  .persp-card.card-1st { background: var(--teal-light); border-color: var(--teal); }
  .persp-card.card-2nd { background: var(--amber-light); border-color: var(--amber); }
  .persp-card.card-3rd-l { background: var(--rose-light); border-color: var(--rose); }
  .persp-card.card-3rd-o { background: var(--violet-light); border-color: var(--violet); }

  .pros-cons { display: flex; gap: 12px; margin-top: 8px; }
  .pros-cons div { flex: 1; }
  .pros-cons h5 {
    font-family: var(--font-ui);
    font-size: 0.78rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin-bottom: 4px;
    color: var(--text);
  }

  /* Summary */
  .summary-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 14px;
  }

  .summary-item {
    font-family: var(--font-ui);
    font-size: 0.85rem;
    padding: 12px 16px;
    background: var(--bg);
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-light);
    line-height: 1.6;
  }

  .summary-item strong { color: var(--teal-dark); }

  /* Responsive */
  @media (max-width: 900px) {
    .panels-grid { grid-template-columns: 1fr; }
    .perspective-cards { grid-template-columns: 1fr; }
    .summary-grid { grid-template-columns: 1fr; }
  }

  @media (max-width: 600px) {
    header { padding: 12px 16px; }
    header h1 { font-size: 1.2rem; }
    .container { padding: 12px; }
    .controls { flex-direction: column; align-items: flex-start; }
    .view-toggle { margin-left: 0; }
    .compare-selectors { flex-direction: column; align-items: flex-start; }
  }
</style>
</head>
<body>

<header>
  <h1>Narrative Perspective Shifter</h1>
  <p>See the same scene rewritten in different narrative perspectives. Highlighted differences show how perspective changes meaning.</p>
</header>

<div class="container">

  <div class="controls">
    <label>Scene:</label>
    <div class="scene-buttons" id="sceneButtons"></div>
    <div class="view-toggle">
      <button class="view-btn active" data-view="quad">All Four</button>
      <button class="view-btn" data-view="compare">Compare Two</button>
    </div>
  </div>

  <div class="compare-selectors" id="compareSelectors">
    <label>Left:</label>
    <select id="compareLeft">
      <option value="first">1st Person</option>
      <option value="second">2nd Person</option>
      <option value="thirdLimited" selected>3rd Person Limited</option>
      <option value="thirdOmniscient">3rd Person Omniscient</option>
    </select>
    <label>Right:</label>
    <select id="compareRight">
      <option value="first" selected>1st Person</option>
      <option value="second">2nd Person</option>
      <option value="thirdLimited">3rd Person Limited</option>
      <option value="thirdOmniscient">3rd Person Omniscient</option>
    </select>
  </div>

  <div class="legend">
    <div class="legend-item"><span class="legend-swatch swatch-pronoun"></span> Pronouns</div>
    <div class="legend-item"><span class="legend-swatch swatch-thought"></span> Internal thoughts/feelings</div>
    <div class="legend-item"><span class="legend-swatch swatch-distance"></span> Narrative distance markers</div>
  </div>

  <div class="panels-grid quad" id="panelsGrid"></div>

  <div class="summary-section">
    <div class="section-header open" onclick="toggleSection(this)">
      <span>What Changes?</span>
      <span class="chevron">&#9660;</span>
    </div>
    <div class="section-body open">
      <div class="section-body-inner">
        <div class="summary-grid" id="summaryGrid"></div>
      </div>
    </div>
  </div>

  <div class="info-section">
    <div class="section-header" onclick="toggleSection(this)">
      <span>Perspective Guide: Types, Strengths and Limitations</span>
      <span class="chevron">&#9660;</span>
    </div>
    <div class="section-body">
      <div class="section-body-inner">
        <div class="perspective-cards">
          <div class="persp-card card-1st">
            <h4>1st Person</h4>
            <p>The narrator is a character in the story, using "I" and "my." The reader experiences events through one character's eyes and is limited to what that character knows.</p>
            <div class="pros-cons">
              <div><h5>Strengths</h5><ul><li>Deep intimacy and voice</li><li>Strong reader identification</li><li>Natural for unreliable narrators</li></ul></div>
              <div><h5>Limitations</h5><ul><li>Cannot show other minds</li><li>Restricted to one viewpoint</li><li>Can feel claustrophobic</li></ul></div>
            </div>
          </div>
          <div class="persp-card card-2nd">
            <h4>2nd Person</h4>
            <p>The narrator addresses the reader directly as "you," placing them inside the story. Uncommon in fiction but powerful for immersion and instruction.</p>
            <div class="pros-cons">
              <div><h5>Strengths</h5><ul><li>Immediate, immersive pull</li><li>Creates urgency and tension</li><li>Unusual, memorable effect</li></ul></div>
              <div><h5>Limitations</h5><ul><li>Can feel forced or alienating</li><li>Hard to sustain at length</li><li>Reader may resist "being told"</li></ul></div>
            </div>
          </div>
          <div class="persp-card card-3rd-l">
            <h4>3rd Person Limited</h4>
            <p>The narrator uses "he/she/they" but stays close to one character's thoughts and perceptions. Offers some distance while retaining emotional depth.</p>
            <div class="pros-cons">
              <div><h5>Strengths</h5><ul><li>Flexible, widely accepted</li><li>Can shift focus between chapters</li><li>Balances intimacy with scope</li></ul></div>
              <div><h5>Limitations</h5><ul><li>Still restricted per scene</li><li>Can slip into "head-hopping"</li><li>Less distinctive voice</li></ul></div>
            </div>
          </div>
          <div class="persp-card card-3rd-o">
            <h4>3rd Person Omniscient</h4>
            <p>A godlike narrator who knows all characters' thoughts, feelings, and the story's past and future. Can comment, judge, and move freely between minds.</p>
            <div class="pros-cons">
              <div><h5>Strengths</h5><ul><li>Full access to every character</li><li>Can build dramatic irony</li><li>Grand, sweeping scope</li></ul></div>
              <div><h5>Limitations</h5><ul><li>Can feel emotionally distant</li><li>Risk of "telling" over "showing"</li><li>Harder to create suspense</li></ul></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<script>
const SCENES = [
  {
    id: "letter",
    title: "The Secret Letter",
    first: [
      `<span class="hl-pronoun">I</span> found the letter tucked behind the loose brick, exactly where the note said it would be. <span class="hl-pronoun">My</span> fingers trembled as <span class="hl-pronoun">I</span> unfolded the yellowed paper. <span class="hl-thought">A cold dread settled in my stomach; I already knew, somehow, that this would change everything.</span>`,
      `The handwriting was <span class="hl-pronoun">my</span> mother's. <span class="hl-thought">I felt the ground tilt beneath me, as though the hallway floor had become the deck of a ship.</span> She had written a name <span class="hl-pronoun">I</span> didn't recognise, and beneath it, a date: three years before <span class="hl-pronoun">I</span> was born.`,
      `<span class="hl-pronoun">I</span> read the final line twice. <span class="hl-thought">Something broke open inside me, quiet and irreversible, like a crack spreading through ice.</span> <span class="hl-pronoun">I</span> folded the letter back along its creases and pressed it to <span class="hl-pronoun">my</span> chest, breathing hard.`
    ],
    second: [
      `<span class="hl-pronoun">You</span> find the letter tucked behind the loose brick, exactly where the note said it would be. <span class="hl-pronoun">Your</span> fingers tremble as <span class="hl-pronoun">you</span> unfold the yellowed paper. <span class="hl-thought">A cold dread settles in your stomach; you already know, somehow, that this will change everything.</span>`,
      `The handwriting is <span class="hl-pronoun">your</span> mother's. <span class="hl-thought">You feel the ground tilt beneath you, as though the hallway floor has become the deck of a ship.</span> She has written a name <span class="hl-pronoun">you</span> don't recognise, and beneath it, a date: three years before <span class="hl-pronoun">you</span> were born.`,
      `<span class="hl-pronoun">You</span> read the final line twice. <span class="hl-thought">Something breaks open inside you, quiet and irreversible, like a crack spreading through ice.</span> <span class="hl-pronoun">You</span> fold the letter back along its creases and press it to <span class="hl-pronoun">your</span> chest, breathing hard.`
    ],
    thirdLimited: [
      `<span class="hl-pronoun">She</span> found the letter tucked behind the loose brick, exactly where the note said it would be. <span class="hl-pronoun">Her</span> fingers trembled as <span class="hl-pronoun">she</span> unfolded the yellowed paper. <span class="hl-thought">A cold dread settled in her stomach; she already knew, somehow, that this would change everything.</span>`,
      `The handwriting was <span class="hl-pronoun">her</span> mother's. <span class="hl-thought">She felt the ground tilt beneath her, as though the hallway floor had become the deck of a ship.</span> <span class="hl-pronoun">Her</span> mother had written a name <span class="hl-pronoun">she</span> didn't recognise, and beneath it, a date: three years before <span class="hl-pronoun">she</span> was born.`,
      `<span class="hl-pronoun">She</span> read the final line twice. <span class="hl-thought">Something broke open inside her, quiet and irreversible, like a crack spreading through ice.</span> <span class="hl-pronoun">She</span> folded the letter back along its creases and pressed it to <span class="hl-pronoun">her</span> chest, breathing hard.`
    ],
    thirdOmniscient: [
      `<span class="hl-pronoun">She</span> found the letter tucked behind the loose brick, exactly where the note said it would be. <span class="hl-pronoun">Her</span> fingers trembled as <span class="hl-pronoun">she</span> unfolded the yellowed paper. <span class="hl-thought">A cold dread settled in her stomach.</span> <span class="hl-distance">Had she known what the letter contained, she might never have opened it at all.</span>`,
      `The handwriting was <span class="hl-pronoun">her</span> mother's. <span class="hl-thought">She felt the ground tilt beneath her.</span> <span class="hl-distance">Her mother, who was at that very moment asleep two hundred miles away, had written this letter in a state of anguish fifteen years earlier, convinced it would never be found.</span> It bore a name <span class="hl-pronoun">she</span> didn't recognise, and a date: three years before <span class="hl-pronoun">she</span> was born.`,
      `<span class="hl-pronoun">She</span> read the final line twice. <span class="hl-thought">Something broke open inside her.</span> <span class="hl-distance">It was the kind of revelation that divides a life into before and after, and both she and the reader of these words must now reckon with its weight.</span> She folded the letter and pressed it to <span class="hl-pronoun">her</span> chest.`
    ],
    summary: {
      pronouns: "1st person uses 'I/my,' 2nd uses 'you/your,' 3rd uses 'she/her.' The pronoun choice immediately sets the emotional distance between reader and character.",
      thoughts: "1st and 2nd person give full, unfiltered access to the character's inner world. 3rd limited stays close but uses 'she felt' rather than 'I felt.' The omniscient narrator pulls back, offering the dread as observed fact rather than lived experience.",
      distance: "The omniscient version reveals information the character cannot know: her mother's location, the circumstances of the letter's writing, and a direct address to the reader. This creates dramatic irony absent from the other versions.",
      overall: "The secret letter scene highlights how perspective controls suspense. In 1st person, we discover alongside the narrator. In omniscient, the narrator hints at consequences before the character understands them, shifting tension from 'what is happening?' to 'what will she do?'"
    }
  },
  {
    id: "chase",
    title: "The Market Chase",
    first: [
      `<span class="hl-pronoun">I</span> shoved through the crowd, knocking a basket of oranges from a stallholder's hands. <span class="hl-thought">My lungs burned and my mind screamed at me to keep running, to not look back.</span> The shouts behind <span class="hl-pronoun">me</span> were getting closer.`,
      `A narrow alley opened to <span class="hl-pronoun">my</span> left and <span class="hl-pronoun">I</span> ducked into it, pressing <span class="hl-pronoun">my</span> back against the cool stone wall. <span class="hl-thought">I tried to slow my breathing but my heart was a fist pounding against my ribs, and I was certain they could hear it.</span>`,
      `Footsteps clattered past the alley entrance. One set. Then another. <span class="hl-thought">I counted to thirty before I dared to move, each second stretching out like a held breath.</span> <span class="hl-pronoun">I</span> edged forward, peered around the corner, and ran.`
    ],
    second: [
      `<span class="hl-pronoun">You</span> shove through the crowd, knocking a basket of oranges from a stallholder's hands. <span class="hl-thought">Your lungs burn and your mind screams at you to keep running, to not look back.</span> The shouts behind <span class="hl-pronoun">you</span> are getting closer.`,
      `A narrow alley opens to <span class="hl-pronoun">your</span> left and <span class="hl-pronoun">you</span> duck into it, pressing <span class="hl-pronoun">your</span> back against the cool stone wall. <span class="hl-thought">You try to slow your breathing but your heart is a fist pounding against your ribs, and you are certain they can hear it.</span>`,
      `Footsteps clatter past the alley entrance. One set. Then another. <span class="hl-thought">You count to thirty before you dare to move, each second stretching out like a held breath.</span> <span class="hl-pronoun">You</span> edge forward, peer around the corner, and run.`
    ],
    thirdLimited: [
      `<span class="hl-pronoun">He</span> shoved through the crowd, knocking a basket of oranges from a stallholder's hands. <span class="hl-thought">His lungs burned and his mind screamed at him to keep running, to not look back.</span> The shouts behind <span class="hl-pronoun">him</span> were getting closer.`,
      `A narrow alley opened to <span class="hl-pronoun">his</span> left and <span class="hl-pronoun">he</span> ducked into it, pressing <span class="hl-pronoun">his</span> back against the cool stone wall. <span class="hl-thought">He tried to slow his breathing but his heart was a fist pounding against his ribs, and he was certain they could hear it.</span>`,
      `Footsteps clattered past the alley entrance. One set. Then another. <span class="hl-thought">He counted to thirty before he dared to move, each second stretching out like a held breath.</span> <span class="hl-pronoun">He</span> edged forward, peered around the corner, and ran.`
    ],
    thirdOmniscient: [
      `<span class="hl-pronoun">He</span> shoved through the crowd, knocking a basket of oranges from a stallholder's hands. <span class="hl-thought">His lungs burned.</span> <span class="hl-distance">The stallholder, a woman named Adira who had risen before dawn to arrange her fruit, watched her morning's work scatter across the cobblestones and cursed the boy under her breath.</span>`,
      `A narrow alley opened to <span class="hl-pronoun">his</span> left and <span class="hl-pronoun">he</span> ducked into it, pressing <span class="hl-pronoun">his</span> back against the cool stone wall. <span class="hl-thought">He tried to slow his breathing.</span> <span class="hl-distance">His pursuers, two officers who had already lost three suspects that week and could not afford to lose another, split up without a word, one taking the alley's far end.</span>`,
      `Footsteps clattered past the alley entrance. <span class="hl-distance">He did not know it, but the second officer was already circling the block.</span> <span class="hl-thought">He counted to thirty.</span> <span class="hl-pronoun">He</span> edged forward, peered around the corner, and ran. <span class="hl-distance">It would not be enough.</span>`
    ],
    summary: {
      pronouns: "1st person 'I' creates breathless urgency; the reader runs with the narrator. 2nd person 'you' is even more forceful, turning the chase into the reader's own experience. 3rd person pronouns create a camera-like view.",
      thoughts: "In 1st and 2nd person, the fear is visceral and unfiltered. 3rd limited preserves the physical sensations but adds a slight observational quality. The omniscient version strips the thoughts to brief flashes, replacing inner monologue with external information.",
      distance: "The omniscient narrator reveals the pursuers' strategy, the stallholder's backstory, and the chase's outcome. This transforms the scene from a survival thriller into something more like fate unfolding. The reader knows the character is doomed before he does.",
      overall: "The chase scene shows how perspective controls pace. Close perspectives (1st, 2nd) feel frantic and fast. The omniscient narrator slows things down by cutting away to other characters, trading speed for scope and dramatic irony."
    }
  },
  {
    id: "school",
    title: "First Day at School",
    first: [
      `<span class="hl-pronoun">I</span> stood at the gate and stared up at the grey building. <span class="hl-thought">It looked like the kind of place that swallowed children whole and spat out something quieter.</span> <span class="hl-pronoun">My</span> tie was too tight and <span class="hl-pronoun">my</span> shoes were too new.`,
      `A girl with red hair bumped <span class="hl-pronoun">my</span> shoulder as she passed and didn't apologise. <span class="hl-thought">I wanted to disappear, to fold myself into the seams of my blazer and become invisible.</span> Instead, <span class="hl-pronoun">I</span> took a breath and walked through the door.`,
      `The corridor smelled of polish and something sweet. <span class="hl-thought">I told myself it would be fine, that everybody felt this way on their first day, but the words rang hollow in my head like coins dropped in an empty tin.</span>`
    ],
    second: [
      `<span class="hl-pronoun">You</span> stand at the gate and stare up at the grey building. <span class="hl-thought">It looks like the kind of place that swallows children whole and spits out something quieter.</span> <span class="hl-pronoun">Your</span> tie is too tight and <span class="hl-pronoun">your</span> shoes are too new.`,
      `A girl with red hair bumps <span class="hl-pronoun">your</span> shoulder as she passes and doesn't apologise. <span class="hl-thought">You want to disappear, to fold yourself into the seams of your blazer and become invisible.</span> Instead, <span class="hl-pronoun">you</span> take a breath and walk through the door.`,
      `The corridor smells of polish and something sweet. <span class="hl-thought">You tell yourself it will be fine, that everybody feels this way on their first day, but the words ring hollow in your head like coins dropped in an empty tin.</span>`
    ],
    thirdLimited: [
      `<span class="hl-pronoun">She</span> stood at the gate and stared up at the grey building. <span class="hl-thought">It looked, she thought, like the kind of place that swallowed children whole and spat out something quieter.</span> <span class="hl-pronoun">Her</span> tie was too tight and <span class="hl-pronoun">her</span> shoes were too new.`,
      `A girl with red hair bumped <span class="hl-pronoun">her</span> shoulder and didn't apologise. <span class="hl-thought">She wanted to disappear, to fold herself into the seams of her blazer and become invisible.</span> Instead, <span class="hl-pronoun">she</span> took a breath and walked through the door.`,
      `The corridor smelled of polish and something sweet. <span class="hl-thought">She told herself it would be fine, that everybody felt this way on their first day, but the reassurance felt thin and unconvincing.</span>`
    ],
    thirdOmniscient: [
      `<span class="hl-pronoun">She</span> stood at the gate and stared up at the grey building. <span class="hl-thought">It frightened her.</span> <span class="hl-distance">She was not the only one. Across the playground, at least a dozen other Year Sevens were performing the same quiet arithmetic of courage, measuring the distance between the gate and the door and wondering if their legs would carry them.</span>`,
      `A girl with red hair bumped <span class="hl-pronoun">her</span> shoulder and didn't apologise. <span class="hl-distance">The red-haired girl, whose name was Priya, was herself terrified, and the bump was not rudeness but the clumsiness of someone trying very hard not to cry.</span> <span class="hl-pronoun">She</span> took a breath and walked through the door.`,
      `The corridor smelled of polish and something sweet. <span class="hl-distance">In three months' time, this corridor would feel as familiar as her own kitchen, and she would barely notice the smell at all. But that morning, everything was sharp and strange and enormous.</span> <span class="hl-thought">She told herself it would be fine.</span>`
    ],
    summary: {
      pronouns: "Pronoun choice determines whose vulnerability the reader feels most keenly. 'I' makes the anxiety deeply personal; 'you' makes the reader the anxious child; 'she' allows the reader to feel protective empathy from a slight distance.",
      thoughts: "1st and 2nd person present the character's thoughts as direct, unmediated experience. 3rd limited signals the shift with 'she thought.' The omniscient version condenses the inner life to brief statements, spending its words on what the character cannot see.",
      distance: "The omniscient narrator transforms a lonely experience into a shared one: other children feel the same fear, the rude girl is actually terrified, and the narrator reveals that the strangeness will pass. This context reframes anxiety as universal rather than isolating.",
      overall: "This scene illustrates how perspective shapes emotional tone. The close perspectives create empathy through shared vulnerability. The omniscient view creates empathy through understanding, showing the reader that fear is a thread connecting every character in the playground."
    }
  },
  {
    id: "betrayal",
    title: "The Betrayal",
    first: [
      `<span class="hl-pronoun">I</span> saw <span class="hl-pronoun">my</span> name on the list. Right there, in Marcus's handwriting, under the heading "Liabilities." <span class="hl-thought">Something lurched inside me, a physical thing, as though my organs had rearranged themselves around a new and terrible centre of gravity.</span>`,
      `<span class="hl-pronoun">I</span> had trusted <span class="hl-pronoun">him</span>. <span class="hl-thought">I had trusted him with the kind of faith you give to the ground beneath your feet, never once imagining it could open up.</span> And yet here was the proof, in blue ink, that he had been building a case against me for months.`,
      `<span class="hl-pronoun">I</span> placed the folder back on the desk, lining up its edges with the corner the way <span class="hl-pronoun">he</span> always kept it. <span class="hl-thought">My hands were steady. That surprised me. Everything inside me was noise and wreckage, but my hands were perfectly, terrifyingly steady.</span>`
    ],
    second: [
      `<span class="hl-pronoun">You</span> see <span class="hl-pronoun">your</span> name on the list. Right there, in Marcus's handwriting, under the heading "Liabilities." <span class="hl-thought">Something lurches inside you, a physical thing, as though your organs have rearranged themselves around a new and terrible centre of gravity.</span>`,
      `<span class="hl-pronoun">You</span> trusted <span class="hl-pronoun">him</span>. <span class="hl-thought">You trusted him with the kind of faith you give to the ground beneath your feet, never once imagining it could open up.</span> And yet here is the proof, in blue ink, that he has been building a case against <span class="hl-pronoun">you</span> for months.`,
      `<span class="hl-pronoun">You</span> place the folder back on the desk, lining up its edges with the corner the way <span class="hl-pronoun">he</span> always keeps it. <span class="hl-thought">Your hands are steady. That surprises you. Everything inside you is noise and wreckage, but your hands are perfectly, terrifyingly steady.</span>`
    ],
    thirdLimited: [
      `<span class="hl-pronoun">She</span> saw <span class="hl-pronoun">her</span> name on the list. Right there, in Marcus's handwriting, under the heading "Liabilities." <span class="hl-thought">Something lurched inside her, a physical thing, as though her organs had rearranged themselves around a new and terrible centre of gravity.</span>`,
      `<span class="hl-pronoun">She</span> had trusted him. <span class="hl-thought">She had trusted him with the kind of faith one gives to the ground beneath one's feet, never once imagining it could open up.</span> And yet here was the proof, in blue ink, that he had been building a case against <span class="hl-pronoun">her</span> for months.`,
      `<span class="hl-pronoun">She</span> placed the folder back on the desk, lining up its edges with the corner the way he always kept it. <span class="hl-thought">Her hands were steady. That surprised her. Everything inside her was noise and wreckage, but her hands were perfectly, terrifyingly steady.</span>`
    ],
    thirdOmniscient: [
      `<span class="hl-pronoun">She</span> saw <span class="hl-pronoun">her</span> name on the list. Right there, in Marcus's handwriting, under the heading "Liabilities." <span class="hl-thought">Something lurched inside her.</span> <span class="hl-distance">Marcus, who sat at that moment in a restaurant three streets away, had written the list six weeks ago and had agonised over including her name. He had not slept well since.</span>`,
      `<span class="hl-pronoun">She</span> had trusted him. <span class="hl-distance">And he, in his own way, had trusted her, which was precisely why her name appeared on that list. The people we betray most deeply are always the ones we cannot afford to lose.</span> The proof was here, in blue ink: months of quiet work against <span class="hl-pronoun">her</span>.`,
      `<span class="hl-pronoun">She</span> placed the folder back on the desk, lining up its edges with the corner the way he always kept it. <span class="hl-thought">Her hands were steady.</span> <span class="hl-distance">Neither she nor Marcus would mention this moment to each other, though it would sit between them for years, shaping every conversation they had into something careful and hollow.</span>`
    ],
    summary: {
      pronouns: "1st person places the reader inside the shock; 'I' makes the betrayal happen to us. 2nd person makes it even more confrontational. 3rd person creates a witness perspective, allowing the reader to observe the pain rather than inhabit it.",
      thoughts: "The close perspectives dwell on the visceral, physical quality of betrayal. The omniscient narrator compresses the feeling ('something lurched inside her') and replaces extended inner monologue with external context about Marcus's guilt.",
      distance: "The omniscient version introduces a devastating complication: Marcus agonised over the decision. This transforms a clear villain into a conflicted human, and the betrayal becomes mutual and tragic rather than one-sided. The narrator also reveals the long-term consequences, something no character-bound perspective could offer.",
      overall: "Betrayal scenes test perspective's emotional limits. The close viewpoints create raw, immediate pain. The omniscient narrator sacrifices that rawness for moral complexity, asking the reader to hold two truths at once: she was betrayed, and he suffered for betraying her."
    }
  }
];

const PERSPECTIVE_KEYS = ["first", "second", "thirdLimited", "thirdOmniscient"];
const PERSPECTIVE_LABELS = {
  first: "1st Person",
  second: "2nd Person",
  thirdLimited: "3rd Person Limited",
  thirdOmniscient: "3rd Person Omniscient"
};
const PERSPECTIVE_TAGS = {
  first: "tag-1st",
  second: "tag-2nd",
  thirdLimited: "tag-3rd-l",
  thirdOmniscient: "tag-3rd-o"
};

let currentScene = 0;
let currentView = "quad";

function init() {
  const btnContainer = document.getElementById("sceneButtons");
  SCENES.forEach((scene, i) => {
    const btn = document.createElement("button");
    btn.className = "scene-btn" + (i === 0 ? " active" : "");
    btn.textContent = scene.title;
    btn.addEventListener("click", () => selectScene(i));
    btnContainer.appendChild(btn);
  });

  document.querySelectorAll(".view-btn").forEach(btn => {
    btn.addEventListener("click", () => {
      document.querySelectorAll(".view-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      currentView = btn.dataset.view;
      render();
    });
  });

  document.getElementById("compareLeft").addEventListener("change", render);
  document.getElementById("compareRight").addEventListener("change", render);

  render();
}

function selectScene(index) {
  currentScene = index;
  document.querySelectorAll(".scene-btn").forEach((btn, i) => {
    btn.classList.toggle("active", i === index);
  });
  render();
}

function render() {
  const scene = SCENES[currentScene];
  const grid = document.getElementById("panelsGrid");
  const compareSelectors = document.getElementById("compareSelectors");

  grid.innerHTML = "";

  if (currentView === "quad") {
    compareSelectors.classList.remove("visible");
    grid.className = "panels-grid quad";
    PERSPECTIVE_KEYS.forEach(key => {
      grid.appendChild(createPanel(key, scene[key]));
    });
  } else {
    compareSelectors.classList.add("visible");
    grid.className = "panels-grid compare";
    const leftKey = document.getElementById("compareLeft").value;
    const rightKey = document.getElementById("compareRight").value;
    grid.appendChild(createPanel(leftKey, scene[leftKey]));
    grid.appendChild(createPanel(rightKey, scene[rightKey]));
  }

  renderSummary(scene);
}

function createPanel(key, paragraphs) {
  const panel = document.createElement("div");
  panel.className = "panel";
  panel.innerHTML = `
    <div class="panel-header">
      <div class="perspective-label">
        ${PERSPECTIVE_LABELS[key]}
        <span class="person-tag ${PERSPECTIVE_TAGS[key]}">${key === "first" ? "I / My" : key === "second" ? "You / Your" : "She / Her"}</span>
      </div>
    </div>
    <div class="panel-body">
      ${paragraphs.map(p => `<p>${p}</p>`).join("")}
    </div>
  `;
  return panel;
}

function renderSummary(scene) {
  const grid = document.getElementById("summaryGrid");
  const s = scene.summary;
  grid.innerHTML = `
    <div class="summary-item"><strong>Pronouns:</strong> ${s.pronouns}</div>
    <div class="summary-item"><strong>Internal thoughts:</strong> ${s.thoughts}</div>
    <div class="summary-item"><strong>Narrative distance:</strong> ${s.distance}</div>
    <div class="summary-item"><strong>Overall effect:</strong> ${s.overall}</div>
  `;
}

function toggleSection(header) {
  header.classList.toggle("open");
  const body = header.nextElementSibling;
  body.classList.toggle("open");
}

init();
</script>
</body>
</html>
