<!DOCTYPE html>
<html lang="en-GB">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Evidence Weighing Scales</title>
<style>
:root {
  --colour-bg: #faf6f0;
  --colour-surface: #ffffff;
  --colour-header: #5c3d2e;
  --colour-header-sub: #8b6f47;
  --colour-accent: #c9923e;
  --colour-accent-light: #e8c877;
  --colour-for: #4a7c59;
  --colour-for-light: #d4edda;
  --colour-against: #8b3a3a;
  --colour-against-light: #f5d5d5;
  --colour-text: #3b2f2f;
  --colour-text-muted: #7a6b5d;
  --colour-border: #d4c4a8;
  --colour-card-bg: #fffdf7;
  --colour-primary-badge: #6b4c8a;
  --colour-secondary-badge: #4a6e8b;
  --colour-star-active: #d4a017;
  --colour-star-inactive: #d4c4a8;
  --shadow-sm: 0 1px 3px rgba(92,61,46,0.12);
  --shadow-md: 0 4px 12px rgba(92,61,46,0.15);
  --shadow-lg: 0 8px 24px rgba(92,61,46,0.2);
  --radius: 8px;
  --radius-lg: 12px;
  --transition: 0.3s ease;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
  background: var(--colour-bg);
  color: var(--colour-text);
  line-height: 1.6;
  min-height: 100vh;
}

header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: linear-gradient(135deg, var(--colour-header), var(--colour-header-sub));
  padding: 16px 24px;
  box-shadow: var(--shadow-lg);
}

header h1 {
  font-size: 1.6rem;
  color: #fff;
  font-weight: 700;
  letter-spacing: 0.5px;
}

header p {
  color: var(--colour-accent-light);
  font-size: 0.9rem;
  margin-top: 2px;
}

.app-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
}

/* Topic selector */
.topic-selector {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 24px;
}

.topic-btn {
  padding: 10px 18px;
  border: 2px solid var(--colour-border);
  border-radius: var(--radius);
  background: var(--colour-surface);
  color: var(--colour-text);
  font-size: 0.9rem;
  cursor: pointer;
  transition: var(--transition);
  font-weight: 500;
}

.topic-btn:hover { border-color: var(--colour-accent); background: #fff8ee; }
.topic-btn.active {
  border-color: var(--colour-accent);
  background: linear-gradient(135deg, var(--colour-accent), var(--colour-header-sub));
  color: #fff;
}

/* Claim banner */
.claim-banner {
  background: var(--colour-surface);
  border: 2px solid var(--colour-accent);
  border-radius: var(--radius-lg);
  padding: 16px 24px;
  margin-bottom: 24px;
  text-align: centre;
  box-shadow: var(--shadow-sm);
}

.claim-banner h2 { font-size: 1.2rem; color: var(--colour-header); }
.claim-banner p { font-size: 0.85rem; color: var(--colour-text-muted); margin-top: 4px; }

/* Main layout */
.main-layout {
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
}

/* Scale area */
.scale-area {
  background: var(--colour-surface);
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow-md);
  text-align: center;
}

.scale-area h3 { font-size: 1rem; color: var(--colour-header); margin-bottom: 12px; }

.scale-svg-container { position: relative; width: 100%; max-width: 500px; margin: 0 auto; }

.verdict-box {
  margin-top: 16px;
  padding: 12px 20px;
  border-radius: var(--radius);
  font-weight: 600;
  font-size: 0.95rem;
  transition: var(--transition);
}

.verdict-balanced { background: #f0ead6; color: var(--colour-header); }
.verdict-for { background: var(--colour-for-light); color: var(--colour-for); }
.verdict-against { background: var(--colour-against-light); color: var(--colour-against); }

/* Drop zones */
.drop-zones {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-top: 16px;
}

.drop-zone {
  min-height: 80px;
  border: 2px dashed var(--colour-border);
  border-radius: var(--radius);
  padding: 10px;
  transition: var(--transition);
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  align-content: flex-start;
}

.drop-zone.drag-over { border-color: var(--colour-accent); background: rgba(201,146,62,0.08); }
.drop-zone-for { border-color: var(--colour-for); }
.drop-zone-against { border-color: var(--colour-against); }

.drop-zone-label {
  width: 100%;
  text-align: center;
  font-size: 0.8rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  padding: 4px 0;
}

.drop-zone-for .drop-zone-label { color: var(--colour-for); }
.drop-zone-against .drop-zone-label { color: var(--colour-against); }

.weight-total {
  width: 100%;
  text-align: center;
  font-size: 0.85rem;
  font-weight: 700;
  padding: 4px 0;
}

/* Placed mini cards */
.placed-card {
  background: var(--colour-card-bg);
  border: 1px solid var(--colour-border);
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 0.75rem;
  cursor: grab;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 160px;
}

.placed-card:hover { background: #fff0d4; }

/* Evidence cards area */
.cards-area {
  background: var(--colour-surface);
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow-md);
}

.cards-area h3 {
  font-size: 1rem;
  color: var(--colour-header);
  margin-bottom: 4px;
}

.cards-area > p {
  font-size: 0.82rem;
  color: var(--colour-text-muted);
  margin-bottom: 14px;
}

.cards-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 14px;
}

/* Evidence card */
.evidence-card {
  background: var(--colour-card-bg);
  border: 2px solid var(--colour-border);
  border-radius: var(--radius);
  padding: 14px;
  cursor: grab;
  transition: var(--transition);
  user-select: none;
  position: relative;
}

.evidence-card:hover { box-shadow: var(--shadow-md); transform: translateY(-2px); }
.evidence-card.dragging { opacity: 0.4; transform: scale(0.95); }
.evidence-card.placed { opacity: 0.35; pointer-events: none; border-style: dashed; }

.card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 8px;
}

.card-title { font-weight: 700; font-size: 0.9rem; color: var(--colour-header); flex: 1; }

.source-badge {
  font-size: 0.7rem;
  padding: 2px 8px;
  border-radius: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex-shrink: 0;
  margin-left: 8px;
}

.badge-primary { background: #ede4f5; color: var(--colour-primary-badge); }
.badge-secondary { background: #e0ecf5; color: var(--colour-secondary-badge); }

.card-meta {
  font-size: 0.78rem;
  color: var(--colour-text-muted);
  margin-bottom: 6px;
}

.card-content {
  font-size: 0.82rem;
  line-height: 1.5;
  margin-bottom: 10px;
  color: var(--colour-text);
}

.reliability-control {
  display: flex;
  align-items: center;
  gap: 8px;
}

.reliability-label {
  font-size: 0.75rem;
  font-weight: 600;
  color: var(--colour-text-muted);
  white-space: nowrap;
}

.stars {
  display: flex;
  gap: 2px;
}

.star {
  width: 20px;
  height: 20px;
  cursor: pointer;
  fill: var(--colour-star-inactive);
  transition: fill 0.15s ease;
}

.star.active { fill: var(--colour-star-active); }
.star:hover { fill: var(--colour-accent-light); }

.weight-display {
  font-size: 0.75rem;
  font-weight: 700;
  color: var(--colour-accent);
  margin-left: auto;
  white-space: nowrap;
}

/* Info panel */
.info-panel {
  background: var(--colour-surface);
  border-radius: var(--radius-lg);
  padding: 20px;
  box-shadow: var(--shadow-md);
  margin-top: 24px;
}

.info-toggle {
  width: 100%;
  background: none;
  border: 2px solid var(--colour-border);
  border-radius: var(--radius);
  padding: 12px 16px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--colour-header);
  transition: var(--transition);
}

.info-toggle:hover { border-color: var(--colour-accent); background: #fff8ee; }
.info-toggle .arrow { transition: transform 0.3s ease; font-size: 1.2rem; }
.info-toggle .arrow.open { transform: rotate(180deg); }

.info-content {
  display: none;
  padding-top: 16px;
}

.info-content.visible { display: block; }

.info-content h4 {
  color: var(--colour-header);
  font-size: 0.95rem;
  margin: 14px 0 6px;
}

.info-content h4:first-child { margin-top: 0; }

.info-content p, .info-content li {
  font-size: 0.85rem;
  color: var(--colour-text);
  line-height: 1.65;
}

.info-content ul { padding-left: 20px; margin: 6px 0; }
.info-content li { margin-bottom: 4px; }

.info-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin: 10px 0;
}

.info-box {
  background: var(--colour-bg);
  border-radius: var(--radius);
  padding: 12px;
  border-left: 3px solid var(--colour-accent);
}

.info-box h5 {
  font-size: 0.85rem;
  color: var(--colour-header);
  margin-bottom: 4px;
}

.info-box p { font-size: 0.8rem; }

.opcvl-table {
  width: 100%;
  border-collapse: collapse;
  margin: 10px 0;
  font-size: 0.82rem;
}

.opcvl-table th, .opcvl-table td {
  padding: 8px 12px;
  border: 1px solid var(--colour-border);
  text-align: left;
}

.opcvl-table th {
  background: var(--colour-header);
  color: #fff;
  font-weight: 600;
}

.opcvl-table tr:nth-child(even) { background: var(--colour-bg); }

/* Reset button */
.reset-btn {
  display: inline-block;
  padding: 8px 20px;
  background: var(--colour-against);
  color: #fff;
  border: none;
  border-radius: var(--radius);
  cursor: pointer;
  font-size: 0.85rem;
  font-weight: 600;
  margin-top: 12px;
  transition: var(--transition);
}

.reset-btn:hover { background: #6e2a2a; }

@media (max-width: 768px) {
  header { padding: 12px 16px; }
  header h1 { font-size: 1.3rem; }
  .app-container { padding: 14px; }
  .topic-btn { padding: 8px 14px; font-size: 0.82rem; }
  .cards-grid { grid-template-columns: 1fr; }
  .drop-zones { grid-template-columns: 1fr; }
  .info-grid { grid-template-columns: 1fr; }
  .claim-banner { padding: 12px 16px; }
  .claim-banner h2 { font-size: 1.05rem; }
  .scale-svg-container { max-width: 100%; }
}
</style>
</head>
<body>
<header>
  <h1>Evidence Weighing Scales</h1>
  <p>Drag source evidence onto the scales to weigh arguments for and against historical claims</p>
</header>

<div class="app-container">
  <div class="topic-selector" id="topicSelector"></div>

  <div class="claim-banner" id="claimBanner">
    <h2 id="claimText"></h2>
    <p id="claimContext"></p>
  </div>

  <div class="main-layout">
    <div class="scale-area">
      <h3>The Balance of Evidence</h3>
      <div class="scale-svg-container">
        <svg id="scaleSvg" viewBox="0 0 500 320" xmlns="http://www.w3.org/2000/svg">
          <!-- Stand -->
          <rect x="240" y="240" width="20" height="70" fill="#8b6f47" rx="3"/>
          <rect x="210" y="305" width="80" height="12" fill="#5c3d2e" rx="4"/>
          <!-- Pivot -->
          <circle cx="250" cy="240" r="8" fill="#c9923e"/>
          <!-- Beam group (rotates) -->
          <g id="scaleBeam" transform="rotate(0, 250, 240)">
            <rect x="50" y="236" width="400" height="8" fill="#5c3d2e" rx="4"/>
            <!-- Left pan strings -->
            <line x1="80" y1="244" x2="60" y2="290" stroke="#8b6f47" stroke-width="2"/>
            <line x1="80" y1="244" x2="100" y2="290" stroke="#8b6f47" stroke-width="2"/>
            <!-- Right pan strings -->
            <line x1="420" y1="244" x2="400" y2="290" stroke="#8b6f47" stroke-width="2"/>
            <line x1="420" y1="244" x2="440" y2="290" stroke="#8b6f47" stroke-width="2"/>
            <!-- Left pan (FOR) -->
            <ellipse id="panFor" cx="80" cy="294" rx="50" ry="8" fill="#4a7c59" opacity="0.7"/>
            <text x="80" y="298" text-anchor="middle" fill="#fff" font-size="9" font-weight="600">FOR</text>
            <!-- Right pan (AGAINST) -->
            <ellipse id="panAgainst" cx="420" cy="294" rx="50" ry="8" fill="#8b3a3a" opacity="0.7"/>
            <text x="420" y="298" text-anchor="middle" fill="#fff" font-size="9" font-weight="600">AGAINST</text>
          </g>
          <!-- Labels -->
          <text x="80" y="228" text-anchor="middle" fill="#4a7c59" font-size="11" font-weight="700" id="forWeightLabel">0</text>
          <text x="420" y="228" text-anchor="middle" fill="#8b3a3a" font-size="11" font-weight="700" id="againstWeightLabel">0</text>
        </svg>
      </div>

      <div class="drop-zones">
        <div class="drop-zone drop-zone-for" id="dropFor" data-side="for">
          <div class="drop-zone-label">Supports the claim</div>
          <div class="weight-total" id="forTotal">Weight: 0</div>
        </div>
        <div class="drop-zone drop-zone-against" id="dropAgainst" data-side="against">
          <div class="drop-zone-label">Challenges the claim</div>
          <div class="weight-total" id="againstTotal">Weight: 0</div>
        </div>
      </div>

      <div id="verdictBox" class="verdict-box verdict-balanced">
        Drag evidence onto the scales to begin weighing the arguments.
      </div>

      <button class="reset-btn" onclick="resetScales()">Reset Scales</button>
    </div>

    <div class="cards-area">
      <h3>Source Evidence Cards</h3>
      <p>Adjust each source's reliability rating (1-5 stars) then drag it onto the appropriate side of the scale.</p>
      <div class="cards-grid" id="cardsGrid"></div>
    </div>
  </div>

  <div class="info-panel">
    <button class="info-toggle" onclick="toggleInfo()">
      <span>How to Evaluate Historical Sources (OPCVL)</span>
      <span class="arrow" id="infoArrow">&#9660;</span>
    </button>
    <div class="info-content" id="infoContent">
      <h4>The OPCVL Framework</h4>
      <p>When analysing any historical source, historians consider five key dimensions. This framework helps us evaluate how much weight a source deserves as evidence.</p>

      <table class="opcvl-table">
        <tr><th>Letter</th><th>Stands for</th><th>Key questions</th></tr>
        <tr><td><strong>O</strong></td><td>Origin</td><td>Who created it? When? Where?</td></tr>
        <tr><td><strong>P</strong></td><td>Purpose</td><td>Why was it created? Who was the intended audience?</td></tr>
        <tr><td><strong>C</strong></td><td>Content</td><td>What does it say or show? What information does it provide?</td></tr>
        <tr><td><strong>V</strong></td><td>Value</td><td>What makes this source useful for a historian studying this topic?</td></tr>
        <tr><td><strong>L</strong></td><td>Limitations</td><td>What are the weaknesses? What is missing or possibly biased?</td></tr>
      </table>

      <h4>Reliability vs Utility</h4>
      <div class="info-grid">
        <div class="info-box">
          <h5>Reliability</h5>
          <p>How trustworthy and accurate is the source? Can we believe what it tells us? A biased source may be less reliable as a factual account, but it is not worthless.</p>
        </div>
        <div class="info-box">
          <h5>Utility</h5>
          <p>How useful is the source for answering our specific question? Even a biased or unreliable source can be highly useful if it reveals attitudes, beliefs, or intentions of the time.</p>
        </div>
      </div>

      <h4>Corroboration</h4>
      <p>No single source can tell the whole story. Historians cross-reference multiple sources to build a more complete picture. When sources from different origins agree, the evidence is stronger. When they disagree, we must consider why and which account is more convincing.</p>

      <h4>Tips for Using the Scales</h4>
      <ul>
        <li>Consider the origin and purpose of each source before setting its reliability rating.</li>
        <li>Primary sources are not automatically more reliable than secondary sources.</li>
        <li>A source with low reliability still has some evidential weight; it simply carries less.</li>
        <li>Look for corroboration: do multiple sources on the same side strengthen that argument?</li>
        <li>The "correct" answer is not always clear-cut; history involves interpretation and judgement.</li>
      </ul>
    </div>
  </div>
</div>

<script>
const TOPICS = [
  {
    id: "versailles",
    title: "Was the Treaty of Versailles fair?",
    context: "The 1919 peace treaty ending the First World War imposed terms on Germany. Consider fairness from multiple perspectives.",
    sources: [
      {
        id: "v1", title: "Article 231 (War Guilt Clause)",
        type: "primary", origin: "Treaty of Versailles, 1919",
        content: "Germany accepts responsibility for causing all the loss and damage brought upon the Allied governments. This clause justified the reparations demanded.",
        defaultReliability: 4, baseWeight: 3, side: "against"
      },
      {
        id: "v2", title: "John Maynard Keynes, 1919",
        type: "primary", origin: "British economist, 'The Economic Consequences of the Peace'",
        content: "Keynes argued the reparations were too harsh and would cripple the German economy, potentially destabilising Europe.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "v3", title: "Georges Clemenceau's speech, 1919",
        type: "primary", origin: "French Prime Minister, speech to the Chamber of Deputies",
        content: "France had suffered enormous destruction; Clemenceau insisted that Germany must pay for the damage it had caused to French territory and people.",
        defaultReliability: 3, baseWeight: 3, side: "for"
      },
      {
        id: "v4", title: "German government protest, May 1919",
        type: "primary", origin: "Official German delegation response at Versailles",
        content: "Germany was not invited to negotiate and called the treaty a 'dictated peace'. They argued it violated Wilson's Fourteen Points.",
        defaultReliability: 3, baseWeight: 3, side: "against"
      },
      {
        id: "v5", title: "Historian Sally Marks, 1978",
        type: "secondary", origin: "Academic article, 'The Myths of Reparations'",
        content: "Marks argued that the reparations were not as crushing as often claimed; Germany could have paid but chose to resist. The treaty was relatively moderate compared to German war aims.",
        defaultReliability: 4, baseWeight: 4, side: "for"
      },
      {
        id: "v6", title: "Woodrow Wilson's Fourteen Points, 1918",
        type: "primary", origin: "US President's address to Congress",
        content: "Wilson proposed a fair peace based on self-determination and a League of Nations. Many of these principles were included in the treaty.",
        defaultReliability: 4, baseWeight: 3, side: "for"
      },
      {
        id: "v7", title: "Treaty of Brest-Litovsk, 1918",
        type: "primary", origin: "Peace treaty between Germany and Russia",
        content: "Germany imposed far harsher terms on Russia: massive territorial losses and reparations. This suggests Germany would have imposed similar terms had it won.",
        defaultReliability: 5, baseWeight: 4, side: "for"
      },
      {
        id: "v8", title: "German school textbook, 1930s",
        type: "primary", origin: "Nazi-era educational material",
        content: "Described the treaty as a shameful crime against the German people, fuelling resentment and calls for revision.",
        defaultReliability: 2, baseWeight: 2, side: "against"
      },
      {
        id: "v9", title: "Historian Margaret MacMillan, 2001",
        type: "secondary", origin: "'Peacemakers: The Paris Peace Conference of 1919'",
        content: "MacMillan argues the treaty was a flawed but reasonable attempt to balance punishment, security, and idealism in impossible circumstances.",
        defaultReliability: 5, baseWeight: 3, side: "for"
      },
      {
        id: "v10", title: "German reparations data, 1919-1932",
        type: "secondary", origin: "Economic records compiled by historians",
        content: "Germany paid only a fraction of the total reparations bill. Payments were renegotiated downward twice (Dawes Plan 1924, Young Plan 1929) and suspended in 1932.",
        defaultReliability: 5, baseWeight: 3, side: "for"
      }
    ]
  },
  {
    id: "henry",
    title: "Was Henry VIII's break with Rome primarily about religion?",
    context: "In the 1530s, Henry VIII separated the Church of England from papal authority. Was this driven by genuine religious conviction, or by political and personal motives?",
    sources: [
      {
        id: "h1", title: "Act of Supremacy, 1534",
        type: "primary", origin: "English Parliament",
        content: "Declared the monarch 'Supreme Head of the Church of England', giving Henry full authority over religious matters in England.",
        defaultReliability: 5, baseWeight: 3, side: "against"
      },
      {
        id: "h2", title: "Henry's letter to Pope Clement VII, 1527",
        type: "primary", origin: "Royal correspondence",
        content: "Henry pleaded for an annulment of his marriage to Catherine of Aragon, citing scripture. The Pope refused, largely due to pressure from Catherine's nephew, Emperor Charles V.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "h3", title: "Thomas Cranmer's reforms, 1530s-1540s",
        type: "primary", origin: "Archbishop of Canterbury's official records",
        content: "Cranmer introduced an English Bible and reformed church services, suggesting genuine Protestant sympathies within the Henrician church.",
        defaultReliability: 4, baseWeight: 3, side: "for"
      },
      {
        id: "h4", title: "Six Articles Act, 1539",
        type: "primary", origin: "English Parliament",
        content: "Reaffirmed Catholic doctrines including transubstantiation and clerical celibacy. Heretics (including Protestants) could be burned. This suggests Henry had no desire to become Protestant.",
        defaultReliability: 5, baseWeight: 4, side: "against"
      },
      {
        id: "h5", title: "Dissolution of the Monasteries, 1536-1541",
        type: "primary", origin: "Royal commissioners' records",
        content: "Henry closed all monasteries and seized their vast wealth and lands. This enormously enriched the Crown and rewarded loyal nobles, regardless of religious justifications.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "h6", title: "Historian G.R. Elton, 1953",
        type: "secondary", origin: "'The Tudor Revolution in Government'",
        content: "Elton argued the break was primarily a political revolution driven by Thomas Cromwell, who used it to centralise royal power and reshape government administration.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "h7", title: "Historian A.G. Dickens, 1964",
        type: "secondary", origin: "'The English Reformation'",
        content: "Dickens argued there was genuine Protestant feeling growing in England from below, and that the break with Rome reflected real religious change, not just royal politics.",
        defaultReliability: 4, baseWeight: 4, side: "for"
      },
      {
        id: "h8", title: "Henry's theological writings, 1521",
        type: "primary", origin: "'Assertio Septem Sacramentorum' (Defence of the Seven Sacraments)",
        content: "Henry wrote a book defending Catholic doctrine against Martin Luther. The Pope awarded him the title 'Defender of the Faith', showing Henry's earlier Catholic devotion.",
        defaultReliability: 4, baseWeight: 3, side: "against"
      },
      {
        id: "h9", title: "Historian Eamon Duffy, 1992",
        type: "secondary", origin: "'The Stripping of the Altars'",
        content: "Duffy argued that English Catholicism was vibrant and popular before the break. The Reformation was imposed from above, not demanded by the people.",
        defaultReliability: 4, baseWeight: 3, side: "against"
      }
    ]
  },
  {
    id: "industrial",
    title: "Did the Industrial Revolution improve living standards?",
    context: "Between roughly 1760 and 1840, Britain underwent rapid industrialisation. Consider the effects on different groups in society.",
    sources: [
      {
        id: "i1", title: "Factory inspector report, 1833",
        type: "primary", origin: "Parliamentary report on child labour",
        content: "Children as young as six worked 14-hour days in dangerous conditions. Injuries were common, and many suffered stunted growth and chronic illness.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "i2", title: "Andrew Ure, 'The Philosophy of Manufactures', 1835",
        type: "primary", origin: "Scottish doctor and factory advocate",
        content: "Ure praised the factory system, arguing that workers were well treated, factories were clean, and children benefited from regular employment and discipline.",
        defaultReliability: 2, baseWeight: 2, side: "for"
      },
      {
        id: "i3", title: "Friedrich Engels, 1845",
        type: "primary", origin: "'The Condition of the Working Class in England'",
        content: "Engels documented appalling living conditions in Manchester: overcrowding, raw sewage in streets, and life expectancy as low as 17 in some areas.",
        defaultReliability: 3, baseWeight: 4, side: "against"
      },
      {
        id: "i4", title: "Real wage data, 1770-1850",
        type: "secondary", origin: "Economic historian Robert C. Allen, 2009",
        content: "Allen's research showed that real wages for most workers stagnated or fell between 1780 and 1830, only rising significantly after 1840.",
        defaultReliability: 5, baseWeight: 4, side: "against"
      },
      {
        id: "i5", title: "National GDP data, 1760-1840",
        type: "secondary", origin: "Economic statistics compiled by historians",
        content: "Britain's total national wealth grew enormously during industrialisation. GDP per capita roughly doubled between 1760 and 1840.",
        defaultReliability: 5, baseWeight: 3, side: "for"
      },
      {
        id: "i6", title: "Samuel Smiles, 'Self-Help', 1859",
        type: "primary", origin: "Victorian author and reformer",
        content: "Smiles celebrated industrialisation as creating opportunity for the hard-working individual. He pointed to self-made men who rose from poverty through enterprise.",
        defaultReliability: 3, baseWeight: 2, side: "for"
      },
      {
        id: "i7", title: "Height data from military records",
        type: "secondary", origin: "Analysis by economic historians (Floud, Wachter & Gregory, 1990)",
        content: "Average height of military recruits declined between 1770 and 1830, suggesting that nutrition and health worsened during early industrialisation.",
        defaultReliability: 5, baseWeight: 4, side: "against"
      },
      {
        id: "i8", title: "Historian E.P. Thompson, 1963",
        type: "secondary", origin: "'The Making of the English Working Class'",
        content: "Thompson argued that even if wages eventually rose, industrialisation destroyed traditional ways of life, community bonds, and workers' independence. Living standards must include quality of life, not just income.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "i9", title: "Historian T.S. Ashton, 1948",
        type: "secondary", origin: "'The Industrial Revolution, 1760-1830'",
        content: "Ashton argued that industrialisation raised living standards overall, producing cheaper goods, greater variety, and eventually better wages. Without it, a growing population would have faced mass poverty.",
        defaultReliability: 4, baseWeight: 3, side: "for"
      },
      {
        id: "i10", title: "Public Health Act, 1848",
        type: "primary", origin: "British Parliament",
        content: "Parliament passed sanitation laws in response to cholera epidemics and campaigning by Edwin Chadwick, acknowledging that urban living conditions had become dangerously poor.",
        defaultReliability: 5, baseWeight: 3, side: "against"
      }
    ]
  },
  {
    id: "suffragettes",
    title: "Did the Suffragettes help or hinder the cause of women's suffrage?",
    context: "The militant Women's Social and Political Union (WSPU) used direct action from 1903 to win votes for women. Did their tactics help or damage the campaign?",
    sources: [
      {
        id: "s1", title: "Emmeline Pankhurst's speech, 1913",
        type: "primary", origin: "Hartford, Connecticut, USA",
        content: "Pankhurst defended militancy, arguing that decades of peaceful campaigning had achieved nothing. Only when women broke windows and disrupted did politicians pay attention.",
        defaultReliability: 3, baseWeight: 3, side: "for"
      },
      {
        id: "s2", title: "Millicent Fawcett, 1911",
        type: "primary", origin: "Leader of the NUWSS (National Union of Women's Suffrage Societies)",
        content: "Fawcett initially praised the Suffragettes for energising the movement, but later warned that escalating violence was turning public opinion against women's suffrage.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "s3", title: "The Times newspaper editorial, 1913",
        type: "primary", origin: "National newspaper, London",
        content: "Condemned suffragette arson attacks as criminal and argued that such behaviour proved women were too emotional and irrational to be trusted with the vote.",
        defaultReliability: 3, baseWeight: 3, side: "against"
      },
      {
        id: "s4", title: "Daily Mail coverage of Emily Davison, 1913",
        type: "primary", origin: "National newspaper report on the Derby",
        content: "Davison's death after stepping in front of the King's horse generated enormous publicity. Thousands lined the streets for her funeral, creating widespread sympathy.",
        defaultReliability: 3, baseWeight: 3, side: "for"
      },
      {
        id: "s5", title: "Historian Andrew Rosen, 1974",
        type: "secondary", origin: "'Rise Up, Women!'",
        content: "Rosen argued that militancy was counter-productive. A suffrage bill nearly passed in 1910 but was withdrawn partly due to suffragette violence, setting the cause back.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      },
      {
        id: "s6", title: "Representation of the People Act, 1918",
        type: "primary", origin: "British Parliament",
        content: "Granted the vote to women over 30 who met property qualifications. Passed after the First World War, during which women had contributed significantly to the war effort.",
        defaultReliability: 5, baseWeight: 3, side: "against"
      },
      {
        id: "s7", title: "Historian Sandra Holton, 1986",
        type: "secondary", origin: "'Feminism and Democracy'",
        content: "Holton argued that the Suffragettes and Suffragists worked in tandem: militancy put pressure on politicians while the NUWSS offered a 'respectable' alternative they could negotiate with.",
        defaultReliability: 4, baseWeight: 4, side: "for"
      },
      {
        id: "s8", title: "WSPU membership figures, 1906-1914",
        type: "secondary", origin: "Compiled from WSPU records by historians",
        content: "WSPU membership and donations surged after high-profile militant acts. The movement grew from a small group to a national organisation with thousands of members.",
        defaultReliability: 4, baseWeight: 3, side: "for"
      },
      {
        id: "s9", title: "Asquith's private letters, 1908-1914",
        type: "primary", origin: "Prime Minister H.H. Asquith",
        content: "Asquith was personally opposed to women's suffrage and used suffragette violence as a convenient excuse to delay reform, suggesting militancy gave opponents ammunition.",
        defaultReliability: 4, baseWeight: 4, side: "against"
      }
    ]
  }
];

let currentTopic = null;
let placedCards = { for: [], against: [] };
let reliabilityRatings = {};
let draggedCardId = null;
let dragSourceSide = null;

function init() {
  const selector = document.getElementById('topicSelector');
  TOPICS.forEach((topic, i) => {
    const btn = document.createElement('button');
    btn.className = 'topic-btn' + (i === 0 ? ' active' : '');
    btn.textContent = topic.title;
    btn.onclick = () => selectTopic(topic.id);
    selector.appendChild(btn);
  });
  selectTopic(TOPICS[0].id);
  setupDropZones();
}

function selectTopic(topicId) {
  currentTopic = TOPICS.find(t => t.id === topicId);
  placedCards = { for: [], against: [] };
  reliabilityRatings = {};
  dragSourceSide = null;

  currentTopic.sources.forEach(s => {
    reliabilityRatings[s.id] = s.defaultReliability;
  });

  document.querySelectorAll('.topic-btn').forEach((btn, i) => {
    btn.classList.toggle('active', TOPICS[i].id === topicId);
  });

  document.getElementById('claimText').textContent = currentTopic.title;
  document.getElementById('claimContext').textContent = currentTopic.context;

  renderCards();
  updateScale();
  clearDropZoneCards();
}

function renderCards() {
  const grid = document.getElementById('cardsGrid');
  grid.innerHTML = '';

  currentTopic.sources.forEach(source => {
    const isPlaced = placedCards.for.includes(source.id) || placedCards.against.includes(source.id);
    const card = document.createElement('div');
    card.className = 'evidence-card' + (isPlaced ? ' placed' : '');
    card.draggable = !isPlaced;
    card.dataset.cardId = source.id;

    const reliability = reliabilityRatings[source.id];
    const weight = calcWeight(source, reliability);

    let starsHtml = '';
    for (let i = 1; i <= 5; i++) {
      starsHtml += `<svg class="star ${i <= reliability ? 'active' : ''}" data-card="${source.id}" data-rating="${i}" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/></svg>`;
    }

    card.innerHTML = `
      <div class="card-header">
        <span class="card-title">${source.title}</span>
        <span class="source-badge ${source.type === 'primary' ? 'badge-primary' : 'badge-secondary'}">${source.type}</span>
      </div>
      <div class="card-meta">${source.origin}</div>
      <div class="card-content">${source.content}</div>
      <div class="reliability-control">
        <span class="reliability-label">Reliability:</span>
        <div class="stars">${starsHtml}</div>
        <span class="weight-display">Weight: ${weight}</span>
      </div>
    `;

    if (!isPlaced) {
      card.addEventListener('dragstart', onDragStart);
      card.addEventListener('dragend', onDragEnd);
      card.addEventListener('touchstart', onTouchStart, { passive: false });
    }

    grid.appendChild(card);
  });

  document.querySelectorAll('.star').forEach(star => {
    star.addEventListener('click', onStarClick);
  });
}

function calcWeight(source, reliability) {
  return Math.round(source.baseWeight * (reliability / 5) * 10) / 10;
}

function onStarClick(e) {
  e.stopPropagation();
  const cardId = e.currentTarget.dataset.card;
  const rating = parseInt(e.currentTarget.dataset.rating);
  reliabilityRatings[cardId] = rating;
  renderCards();
  updateScale();
}

/* Drag and Drop */
function onDragStart(e) {
  draggedCardId = e.currentTarget.dataset.cardId;
  dragSourceSide = null;
  e.currentTarget.classList.add('dragging');
  e.dataTransfer.effectAllowed = 'move';
  e.dataTransfer.setData('text/plain', draggedCardId);
}

function onDragEnd(e) {
  e.currentTarget.classList.remove('dragging');
  draggedCardId = null;
  dragSourceSide = null;
}

/* Touch support */
let touchCardId = null;

function onTouchStart(e) {
  const card = e.currentTarget;
  touchCardId = card.dataset.cardId;
  const touch = e.touches[0];
  const rect = card.getBoundingClientRect();

  const ghost = card.cloneNode(true);
  ghost.id = 'touchGhost';
  ghost.style.position = 'fixed';
  ghost.style.width = rect.width + 'px';
  ghost.style.zIndex = '9999';
  ghost.style.opacity = '0.8';
  ghost.style.pointerEvents = 'none';
  ghost.style.left = (touch.clientX - rect.width / 2) + 'px';
  ghost.style.top = (touch.clientY - 30) + 'px';
  document.body.appendChild(ghost);
  card.classList.add('dragging');

  function onTouchMove(ev) {
    ev.preventDefault();
    const t = ev.touches[0];
    ghost.style.left = (t.clientX - rect.width / 2) + 'px';
    ghost.style.top = (t.clientY - 30) + 'px';

    document.querySelectorAll('.drop-zone').forEach(dz => {
      const r = dz.getBoundingClientRect();
      const over = t.clientX >= r.left && t.clientX <= r.right && t.clientY >= r.top && t.clientY <= r.bottom;
      dz.classList.toggle('drag-over', over);
    });
  }

  function onTouchEnd(ev) {
    const t = ev.changedTouches[0];
    document.querySelectorAll('.drop-zone').forEach(dz => {
      const r = dz.getBoundingClientRect();
      if (t.clientX >= r.left && t.clientX <= r.right && t.clientY >= r.top && t.clientY <= r.bottom) {
        placeCard(touchCardId, dz.dataset.side);
      }
      dz.classList.remove('drag-over');
    });
    ghost.remove();
    card.classList.remove('dragging');
    document.removeEventListener('touchmove', onTouchMove);
    document.removeEventListener('touchend', onTouchEnd);
  }

  document.addEventListener('touchmove', onTouchMove, { passive: false });
  document.addEventListener('touchend', onTouchEnd);
}

function setupDropZones() {
  document.querySelectorAll('.drop-zone').forEach(zone => {
    zone.addEventListener('dragover', e => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      zone.classList.add('drag-over');
    });
    zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.classList.remove('drag-over');
      const cardId = e.dataTransfer.getData('text/plain') || draggedCardId;
      if (cardId) {
        if (dragSourceSide) {
          placedCards[dragSourceSide] = placedCards[dragSourceSide].filter(id => id !== cardId);
        }
        placeCard(cardId, zone.dataset.side);
      }
    });
  });
}

function placeCard(cardId, side) {
  if (!cardId || !side) return;
  // Remove from other side if present
  const otherSide = side === 'for' ? 'against' : 'for';
  placedCards[otherSide] = placedCards[otherSide].filter(id => id !== cardId);
  if (!placedCards[side].includes(cardId)) {
    placedCards[side].push(cardId);
  }
  renderCards();
  renderDropZoneCards();
  updateScale();
}

function removeFromScale(cardId) {
  placedCards.for = placedCards.for.filter(id => id !== cardId);
  placedCards.against = placedCards.against.filter(id => id !== cardId);
  renderCards();
  renderDropZoneCards();
  updateScale();
}

function clearDropZoneCards() {
  ['dropFor', 'dropAgainst'].forEach(zoneId => {
    const zone = document.getElementById(zoneId);
    zone.querySelectorAll('.placed-card').forEach(c => c.remove());
  });
  document.getElementById('forTotal').textContent = 'Weight: 0';
  document.getElementById('againstTotal').textContent = 'Weight: 0';
}

function renderDropZoneCards() {
  ['for', 'against'].forEach(side => {
    const zoneId = side === 'for' ? 'dropFor' : 'dropAgainst';
    const zone = document.getElementById(zoneId);
    zone.querySelectorAll('.placed-card').forEach(c => c.remove());

    placedCards[side].forEach(cardId => {
      const source = currentTopic.sources.find(s => s.id === cardId);
      if (!source) return;
      const chip = document.createElement('div');
      chip.className = 'placed-card';
      chip.textContent = source.title;
      chip.title = 'Click to remove from scales';
      chip.draggable = true;
      chip.addEventListener('click', () => removeFromScale(cardId));
      chip.addEventListener('dragstart', e => {
        draggedCardId = cardId;
        dragSourceSide = side;
        e.dataTransfer.setData('text/plain', cardId);
      });
      zone.appendChild(chip);
    });
  });
}

function updateScale() {
  let forWeight = 0;
  let againstWeight = 0;

  placedCards.for.forEach(cardId => {
    const source = currentTopic.sources.find(s => s.id === cardId);
    if (source) forWeight += calcWeight(source, reliabilityRatings[source.id]);
  });

  placedCards.against.forEach(cardId => {
    const source = currentTopic.sources.find(s => s.id === cardId);
    if (source) againstWeight += calcWeight(source, reliabilityRatings[source.id]);
  });

  forWeight = Math.round(forWeight * 10) / 10;
  againstWeight = Math.round(againstWeight * 10) / 10;

  document.getElementById('forTotal').textContent = `Weight: ${forWeight}`;
  document.getElementById('againstTotal').textContent = `Weight: ${againstWeight}`;
  document.getElementById('forWeightLabel').textContent = forWeight;
  document.getElementById('againstWeightLabel').textContent = againstWeight;

  // Calculate tilt: positive = for heavier (left down), negative = against heavier (right down)
  const maxTilt = 18;
  const diff = forWeight - againstWeight;
  const maxDiff = 20;
  let angle = -(diff / maxDiff) * maxTilt;
  angle = Math.max(-maxTilt, Math.min(maxTilt, angle));

  const beam = document.getElementById('scaleBeam');
  beam.style.transition = 'transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1)';
  beam.setAttribute('transform', `rotate(${angle}, 250, 240)`);

  // Verdict
  const verdictBox = document.getElementById('verdictBox');
  const total = forWeight + againstWeight;

  if (total === 0) {
    verdictBox.className = 'verdict-box verdict-balanced';
    verdictBox.textContent = 'Drag evidence onto the scales to begin weighing the arguments.';
  } else if (Math.abs(diff) < 1) {
    verdictBox.className = 'verdict-box verdict-balanced';
    verdictBox.textContent = 'The evidence is finely balanced. Consider whether additional sources or adjusting reliability might tip the scales.';
  } else if (diff > 0) {
    const strength = diff > 6 ? 'strongly' : 'slightly';
    verdictBox.className = 'verdict-box verdict-for';
    verdictBox.textContent = `The evidence ${strength} supports the claim (${forWeight} vs ${againstWeight}). The sources placed in favour carry more cumulative weight.`;
  } else {
    const strength = Math.abs(diff) > 6 ? 'strongly' : 'slightly';
    verdictBox.className = 'verdict-box verdict-against';
    verdictBox.textContent = `The evidence ${strength} challenges the claim (${forWeight} vs ${againstWeight}). The sources placed against carry more cumulative weight.`;
  }
}

function resetScales() {
  placedCards = { for: [], against: [] };
  renderCards();
  clearDropZoneCards();
  updateScale();
}

function toggleInfo() {
  const content = document.getElementById('infoContent');
  const arrow = document.getElementById('infoArrow');
  content.classList.toggle('visible');
  arrow.classList.toggle('open');
}

document.addEventListener('DOMContentLoaded', init);
</script>
</body>
</html>