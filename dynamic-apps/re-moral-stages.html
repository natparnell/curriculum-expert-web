<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Moral Development Stages</title>
<style>
    :root {
        --bg: #f5f0f8;
        --text: #1a1026;
        --text-light: #5a4d6b;
        --header-bg: #2d1b4e;
        --header-text: #f0e6ff;
        --card-bg: #ffffff;
        --card-border: #d4c5e8;
        --card-shadow: rgba(45, 27, 78, 0.12);
        --stage1: #c0392b;
        --stage1-light: #f9e4e2;
        --stage2: #e67e22;
        --stage2-light: #fdf0e0;
        --stage3: #f1c40f;
        --stage3-light: #fdf8e0;
        --stage4: #27ae60;
        --stage4-light: #e0f5ea;
        --stage5: #2980b9;
        --stage5-light: #e0eef8;
        --stage6: #8e44ad;
        --stage6-light: #f0e0f5;
        --level1: #b03a2e;
        --level2: #1e8449;
        --level3: #6c3483;
        --correct: #27ae60;
        --incorrect: #c0392b;
        --drop-highlight: rgba(142, 68, 173, 0.15);
        --btn-primary: #6c3483;
        --btn-primary-hover: #7d3c98;
        --radius: 10px;
        --radius-sm: 6px;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: var(--bg);
        color: var(--text);
        line-height: 1.6;
        min-height: 100vh;
    }

    header {
        position: sticky;
        top: 0;
        z-index: 100;
        background: var(--header-bg);
        color: var(--header-text);
        padding: 16px 24px;
        box-shadow: 0 2px 12px rgba(0,0,0,0.25);
    }

    header h1 {
        font-size: 1.5rem;
        font-weight: 700;
        letter-spacing: 0.02em;
    }

    header p {
        font-size: 0.88rem;
        opacity: 0.85;
        margin-top: 2px;
    }

    .header-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 12px;
    }

    .score-display {
        background: rgba(255,255,255,0.12);
        padding: 8px 16px;
        border-radius: var(--radius-sm);
        font-size: 0.95rem;
        font-weight: 600;
        white-space: nowrap;
    }

    .nav-tabs {
        display: flex;
        gap: 4px;
        padding: 8px 24px 0;
        background: var(--header-bg);
    }

    .nav-tab {
        padding: 8px 18px;
        border: none;
        background: rgba(255,255,255,0.08);
        color: var(--header-text);
        border-radius: var(--radius-sm) var(--radius-sm) 0 0;
        cursor: pointer;
        font-size: 0.88rem;
        font-weight: 500;
        transition: background 0.2s;
    }

    .nav-tab:hover { background: rgba(255,255,255,0.18); }
    .nav-tab.active { background: var(--bg); color: var(--text); font-weight: 600; }

    main { max-width: 1100px; margin: 0 auto; padding: 24px 16px 60px; }

    .panel { display: none; }
    .panel.active { display: block; }

    /* Pyramid / Ladder */
    .pyramid-container { margin: 24px 0; }
    .pyramid-container h2 { text-align: center; margin-bottom: 20px; font-size: 1.25rem; }

    .pyramid {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
    }

    .pyramid-level-group {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 6px;
    }

    .pyramid-level-label {
        font-size: 0.78rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        padding: 4px 14px;
        border-radius: 12px;
        color: #fff;
        margin-bottom: 2px;
    }

    .pyramid-stage {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 12px 20px;
        border-radius: var(--radius-sm);
        color: #fff;
        font-weight: 600;
        font-size: 0.9rem;
        text-align: center;
        transition: transform 0.15s;
        cursor: default;
    }

    .pyramid-stage:hover { transform: scale(1.02); }

    .ps-6 { background: var(--stage6); width: 45%; }
    .ps-5 { background: var(--stage5); width: 55%; }
    .ps-4 { background: var(--stage4); width: 65%; }
    .ps-3 { background: var(--stage3); width: 75%; color: var(--text); }
    .ps-2 { background: var(--stage2); width: 85%; }
    .ps-1 { background: var(--stage1); width: 95%; }

    /* Dilemma Activity */
    .dilemma-section { margin-bottom: 40px; }

    .dilemma-card {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: var(--radius);
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px var(--card-shadow);
    }

    .dilemma-title {
        font-size: 1.15rem;
        font-weight: 700;
        color: var(--header-bg);
        margin-bottom: 8px;
    }

    .dilemma-scenario {
        font-size: 0.95rem;
        color: var(--text-light);
        line-height: 1.7;
        margin-bottom: 16px;
        padding: 14px;
        background: #f8f4fc;
        border-left: 4px solid var(--btn-primary);
        border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
    }

    .activity-instructions {
        font-size: 0.88rem;
        color: var(--text-light);
        margin-bottom: 14px;
        font-style: italic;
    }

    .response-cards-pool {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        min-height: 60px;
        padding: 14px;
        background: #f0eaf5;
        border-radius: var(--radius);
        margin-bottom: 18px;
        border: 2px dashed var(--card-border);
    }

    .response-card {
        padding: 10px 14px;
        background: var(--card-bg);
        border: 2px solid var(--card-border);
        border-radius: var(--radius-sm);
        font-size: 0.85rem;
        cursor: grab;
        user-select: none;
        transition: box-shadow 0.15s, border-color 0.15s, opacity 0.15s;
        max-width: 320px;
        line-height: 1.5;
    }

    .response-card:active { cursor: grabbing; }
    .response-card.dragging { opacity: 0.5; }

    .response-card.correct {
        border-color: var(--correct);
        background: #e8f8f0;
    }

    .response-card.incorrect {
        border-color: var(--incorrect);
        background: #fce8e6;
    }

    .response-card .correct-label {
        display: none;
        font-size: 0.78rem;
        font-weight: 600;
        margin-top: 6px;
    }

    .response-card.incorrect .correct-label {
        display: block;
        color: var(--incorrect);
    }

    .response-card.correct .correct-label {
        display: block;
        color: var(--correct);
    }

    .drop-zones {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 12px;
        margin-bottom: 18px;
    }

    .drop-zone {
        border: 2px dashed var(--card-border);
        border-radius: var(--radius);
        padding: 10px;
        min-height: 80px;
        transition: background 0.15s, border-color 0.15s;
    }

    .drop-zone.drag-over {
        background: var(--drop-highlight);
        border-color: var(--btn-primary);
    }

    .drop-zone-header {
        font-size: 0.82rem;
        font-weight: 700;
        padding: 4px 10px;
        border-radius: 4px;
        color: #fff;
        margin-bottom: 8px;
        display: inline-block;
    }

    .dz-s1 .drop-zone-header { background: var(--stage1); }
    .dz-s2 .drop-zone-header { background: var(--stage2); }
    .dz-s3 .drop-zone-header { background: var(--stage3); color: var(--text); }
    .dz-s4 .drop-zone-header { background: var(--stage4); }
    .dz-s5 .drop-zone-header { background: var(--stage5); }
    .dz-s6 .drop-zone-header { background: var(--stage6); }

    .drop-zone .response-card { margin-bottom: 6px; }

    .btn {
        padding: 10px 24px;
        border: none;
        border-radius: var(--radius-sm);
        font-size: 0.92rem;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
    }

    .btn:active { transform: scale(0.97); }

    .btn-primary {
        background: var(--btn-primary);
        color: #fff;
    }

    .btn-primary:hover { background: var(--btn-primary-hover); }

    .btn-secondary {
        background: #e8e0f0;
        color: var(--header-bg);
    }

    .btn-secondary:hover { background: #d8d0e4; }

    .btn-row {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 8px;
    }

    .explanation-panel {
        display: none;
        margin-top: 16px;
        padding: 16px;
        background: #f8f4fc;
        border-radius: var(--radius);
        border: 1px solid var(--card-border);
    }

    .explanation-panel.visible { display: block; }

    .explanation-panel h4 {
        margin-bottom: 10px;
        color: var(--header-bg);
    }

    .explanation-item {
        padding: 10px 12px;
        margin-bottom: 8px;
        border-radius: var(--radius-sm);
        font-size: 0.88rem;
        line-height: 1.6;
        border-left: 4px solid;
    }

    .explanation-item strong { display: block; margin-bottom: 2px; }

    /* Info Panel styles */
    .info-section {
        background: var(--card-bg);
        border: 1px solid var(--card-border);
        border-radius: var(--radius);
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: 0 2px 8px var(--card-shadow);
    }

    .info-section h2 {
        color: var(--header-bg);
        margin-bottom: 14px;
        font-size: 1.15rem;
    }

    .info-section h3 {
        margin: 16px 0 8px;
        font-size: 1rem;
    }

    .info-section p, .info-section li {
        font-size: 0.92rem;
        color: var(--text-light);
        line-height: 1.7;
    }

    .info-section ul, .info-section ol {
        padding-left: 22px;
        margin: 8px 0;
    }

    .info-section li { margin-bottom: 6px; }

    .stage-detail-card {
        padding: 14px 16px;
        border-radius: var(--radius-sm);
        margin-bottom: 10px;
        border-left: 5px solid;
    }

    .stage-detail-card h4 { font-size: 0.95rem; margin-bottom: 4px; }
    .stage-detail-card p { font-size: 0.88rem; }

    .sd-1 { background: var(--stage1-light); border-color: var(--stage1); }
    .sd-2 { background: var(--stage2-light); border-color: var(--stage2); }
    .sd-3 { background: var(--stage3-light); border-color: var(--stage3); }
    .sd-4 { background: var(--stage4-light); border-color: var(--stage4); }
    .sd-5 { background: var(--stage5-light); border-color: var(--stage5); }
    .sd-6 { background: var(--stage6-light); border-color: var(--stage6); }

    .critique-point {
        padding: 14px;
        background: #fdf0e0;
        border-left: 4px solid var(--stage2);
        border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
        margin-bottom: 12px;
    }

    .critique-point h4 { font-size: 0.95rem; color: var(--text); margin-bottom: 4px; }
    .critique-point p { font-size: 0.88rem; }

    .alt-theory {
        padding: 16px;
        background: var(--stage6-light);
        border: 1px solid var(--stage6);
        border-radius: var(--radius);
        margin-top: 14px;
    }

    .alt-theory h4 { color: var(--stage6); margin-bottom: 6px; }

    .pattern-tip {
        display: flex;
        gap: 12px;
        align-items: flex-start;
        padding: 12px;
        background: var(--bg);
        border-radius: var(--radius-sm);
        margin-bottom: 10px;
    }

    .pattern-tip .tip-icon {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: 700;
        font-size: 0.85rem;
        color: #fff;
        flex-shrink: 0;
    }

    .results-summary {
        text-align: center;
        padding: 24px;
        background: var(--card-bg);
        border-radius: var(--radius);
        border: 2px solid var(--btn-primary);
        margin-top: 24px;
    }

    .results-summary h2 { color: var(--header-bg); margin-bottom: 8px; }
    .results-summary .big-score { font-size: 2.2rem; font-weight: 800; color: var(--btn-primary); }

    /* Touch support */
    .touch-selected {
        box-shadow: 0 0 0 3px var(--btn-primary);
    }

    .drop-zone.touch-target {
        background: var(--drop-highlight);
        border-color: var(--btn-primary);
    }

    @media (max-width: 700px) {
        header { padding: 12px 16px; }
        header h1 { font-size: 1.2rem; }
        main { padding: 16px 10px 40px; }
        .nav-tabs { padding: 6px 10px 0; overflow-x: auto; }
        .nav-tab { padding: 7px 12px; font-size: 0.82rem; white-space: nowrap; }
        .drop-zones { grid-template-columns: 1fr; }
        .response-card { max-width: 100%; }
        .ps-6, .ps-5, .ps-4, .ps-3, .ps-2, .ps-1 { width: 100%; font-size: 0.82rem; padding: 10px 12px; }
        .pyramid-stage { border-radius: var(--radius-sm); }
    }
</style>
</head>
<body>

<header>
    <div class="header-row">
        <div>
            <h1>Moral Development Stages</h1>
            <p>Classify responses to moral dilemmas by Kohlberg's stages of moral development</p>
        </div>
        <div class="score-display" id="scoreDisplay">Score: 0 / 0</div>
    </div>
    <div class="nav-tabs">
        <button class="nav-tab active" data-tab="activity">Activity</button>
        <button class="nav-tab" data-tab="pyramid">Stage Ladder</button>
        <button class="nav-tab" data-tab="info">Theory Guide</button>
        <button class="nav-tab" data-tab="critique">Critique</button>
    </div>
</header>

<main>
    <!-- ACTIVITY PANEL -->
    <div class="panel active" id="panel-activity">
        <div id="dilemmaContainer"></div>
        <div class="results-summary" id="resultsSummary" style="display:none;">
            <h2>All Dilemmas Complete</h2>
            <div class="big-score" id="finalScore"></div>
            <p id="finalMessage" style="margin-top:8px; color:var(--text-light);"></p>
            <div class="btn-row" style="justify-content:center; margin-top:16px;">
                <button class="btn btn-primary" onclick="resetAll()">Try Again</button>
            </div>
        </div>
    </div>

    <!-- PYRAMID PANEL -->
    <div class="panel" id="panel-pyramid">
        <div class="pyramid-container">
            <h2>Kohlberg's Stages of Moral Development</h2>
            <p style="text-align:center; color:var(--text-light); margin-bottom:20px; font-size:0.92rem;">
                Higher stages represent more sophisticated moral reasoning, not necessarily "better" people.
            </p>
            <div class="pyramid">
                <div class="pyramid-level-group">
                    <span class="pyramid-level-label" style="background:var(--level3);">Level 3: Post-Conventional</span>
                    <div class="pyramid-stage ps-6">Stage 6: Universal Ethical Principles</div>
                    <div class="pyramid-stage ps-5">Stage 5: Social Contract and Individual Rights</div>
                </div>
                <div class="pyramid-level-group" style="margin-top:8px;">
                    <span class="pyramid-level-label" style="background:var(--level2);">Level 2: Conventional</span>
                    <div class="pyramid-stage ps-4">Stage 4: Law and Order</div>
                    <div class="pyramid-stage ps-3">Stage 3: Good Boy / Good Girl</div>
                </div>
                <div class="pyramid-level-group" style="margin-top:8px;">
                    <span class="pyramid-level-label" style="background:var(--level1);">Level 1: Pre-Conventional</span>
                    <div class="pyramid-stage ps-2">Stage 2: Self-Interest / Instrumental Purpose</div>
                    <div class="pyramid-stage ps-1">Stage 1: Obedience and Punishment Avoidance</div>
                </div>
            </div>
        </div>
    </div>

    <!-- INFO PANEL -->
    <div class="panel" id="panel-info">
        <div class="info-section">
            <h2>What is Moral Development Theory?</h2>
            <p>Lawrence Kohlberg (1927-1987) proposed that moral reasoning develops through a series of stages. Building on Jean Piaget's work on cognitive development, Kohlberg argued that people progress through these stages in a fixed order, though not everyone reaches the highest stages.</p>
            <p style="margin-top:10px;">Kohlberg studied moral development by presenting people with moral dilemmas and analysing the <strong>reasoning</strong> behind their answers, not the answers themselves. Two people can reach the same conclusion ("steal the drug" or "don't steal the drug") but for very different moral reasons.</p>
        </div>

        <div class="info-section">
            <h2>The Six Stages in Detail</h2>
            <h3 style="color:var(--level1);">Level 1: Pre-Conventional Morality (typically children under 9)</h3>
            <p>Moral reasoning is based on direct consequences to the self. Rules are external and imposed by authorities.</p>

            <div class="stage-detail-card sd-1">
                <h4>Stage 1: Obedience and Punishment Avoidance</h4>
                <p>Right and wrong are determined by what is punished. "If I get punished for it, it must be wrong." The focus is entirely on avoiding negative consequences. There is no consideration of others' perspectives or the wider reasons behind rules.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "I'll get in trouble", "They'll punish me", "It's against the rules so it's wrong"</p>
            </div>

            <div class="stage-detail-card sd-2">
                <h4>Stage 2: Self-Interest / Instrumental Purpose</h4>
                <p>Right action is what satisfies one's own needs. There is a basic awareness that others have interests too, but relationships are seen as marketplace exchanges: "You scratch my back, I'll scratch yours." Fairness is understood as equal exchange.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "What's in it for me?", "If you help me, I'll help you", "That's not fair to me"</p>
            </div>

            <h3 style="color:var(--level2); margin-top:20px;">Level 2: Conventional Morality (most adolescents and adults)</h3>
            <p>Moral reasoning is based on conforming to social expectations and maintaining the social system.</p>

            <div class="stage-detail-card sd-3">
                <h4>Stage 3: Good Boy / Good Girl Orientation</h4>
                <p>Good behaviour is what pleases or helps others and gains their approval. Living up to what people close to you expect. Being "nice" is important. Intentions matter: "They meant well" is a valid justification. The focus is on interpersonal relationships and trust.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "A good person would...", "People will think badly of me", "They were trying to help"</p>
            </div>

            <div class="stage-detail-card sd-4">
                <h4>Stage 4: Law and Order Orientation</h4>
                <p>Right behaviour means doing one's duty, respecting authority, and maintaining the social order. Laws exist for good reason and should be followed. Society would collapse if everyone broke the rules. The focus shifts from individuals to the system as a whole.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "The law is the law", "What if everyone did that?", "It's my duty", "Society needs order"</p>
            </div>

            <h3 style="color:var(--level3); margin-top:20px;">Level 3: Post-Conventional Morality (minority of adults)</h3>
            <p>Moral reasoning goes beyond social convention. Principles are self-chosen and may sometimes conflict with laws or social expectations.</p>

            <div class="stage-detail-card sd-5">
                <h4>Stage 5: Social Contract and Individual Rights</h4>
                <p>Laws are social agreements that should serve the greatest good. When laws conflict with individual rights or the welfare of the majority, they can legitimately be challenged or changed through democratic processes. Different groups may have different values, and these should be respected.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "The law should be changed", "Rights must be protected", "The greatest good for the greatest number"</p>
            </div>

            <div class="stage-detail-card sd-6">
                <h4>Stage 6: Universal Ethical Principles</h4>
                <p>Moral reasoning is based on abstract, universal principles of justice, dignity, and equality. When laws violate these principles, one has a moral obligation to act according to principle even at personal cost. Decisions are made through individual conscience guided by self-chosen ethical principles.</p>
                <p style="margin-top:6px;"><strong>Key phrases:</strong> "Human dignity demands...", "Justice requires...", "Every person has inherent worth regardless of..."</p>
            </div>
        </div>

        <div class="info-section">
            <h2>How to Identify the Reasoning Pattern</h2>
            <p>The key is to look at <strong>why</strong> someone thinks an action is right or wrong, not <strong>what</strong> they decide.</p>

            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage1);">1</div>
                <div><strong>Stage 1:</strong> Look for fear of punishment or reference to rules as absolute. The reasoning focuses on consequences to the individual: getting caught, being punished.</div>
            </div>
            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage2);">2</div>
                <div><strong>Stage 2:</strong> Look for "deal-making" language and self-benefit. The person calculates advantages and sees fairness as a transaction.</div>
            </div>
            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage3); color:var(--text);">3</div>
                <div><strong>Stage 3:</strong> Look for concern about relationships and social approval. The person wants to be seen as good, kind, or caring by those around them.</div>
            </div>
            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage4);">4</div>
                <div><strong>Stage 4:</strong> Look for appeals to law, duty, and social order. The person thinks about what would happen if rules were not followed by everyone.</div>
            </div>
            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage5);">5</div>
                <div><strong>Stage 5:</strong> Look for weighing individual rights against social welfare. The person recognises that laws are human-made agreements that can and should be improved.</div>
            </div>
            <div class="pattern-tip">
                <div class="tip-icon" style="background:var(--stage6);">6</div>
                <div><strong>Stage 6:</strong> Look for appeals to universal principles (justice, equality, human dignity). The person would act on principle even at great personal cost.</div>
            </div>
        </div>
    </div>

    <!-- CRITIQUE PANEL -->
    <div class="panel" id="panel-critique">
        <div class="info-section">
            <h2>Limitations of Kohlberg's Theory</h2>
            <p>While Kohlberg's model remains influential, it has faced significant criticism from researchers, philosophers, and cross-cultural psychologists.</p>

            <div class="critique-point" style="margin-top:16px;">
                <h4>Cultural Bias</h4>
                <p>Kohlberg's research was conducted primarily with white American males. Critics argue the theory reflects Western, individualistic values. In many collectivist cultures, prioritising community harmony and family obligations (which Kohlberg might classify as Stage 3 or 4) represents highly developed moral reasoning rather than a "lower" stage. Researchers such as Snarey (1985) found that people in some cultures did not fit neatly into Kohlberg's stages.</p>
            </div>

            <div class="critique-point">
                <h4>Gender Bias</h4>
                <p>Kohlberg's original study sample was entirely male. When women were assessed, they tended to score at Stage 3 (interpersonal relationships), while men scored at Stage 4 (law and order). This does not necessarily mean women have less developed moral reasoning; rather, the scale itself may be biased toward a particular kind of reasoning that is more common in male socialisation.</p>
            </div>

            <div class="critique-point">
                <h4>The Gap Between Reasoning and Action</h4>
                <p>Kohlberg's theory measures how people <em>talk</em> about moral dilemmas, not how they actually <em>behave</em>. Someone might articulate Stage 5 reasoning in an interview but act according to Stage 2 self-interest in practice. Moral reasoning and moral behaviour are not the same thing.</p>
            </div>

            <div class="critique-point">
                <h4>Artificial Dilemmas</h4>
                <p>The dilemmas Kohlberg used are extreme, hypothetical situations far removed from everyday moral decision-making. Real moral choices are often messier, more ambiguous, and shaped by emotion, context, and relationships in ways that neat stage classifications cannot capture.</p>
            </div>

            <div class="critique-point">
                <h4>Hierarchical Assumption</h4>
                <p>The model assumes "higher" stages are objectively better. But is abstract principled reasoning always superior to caring about relationships? Is a focus on universal rules always more mature than attending to the needs of specific people in front of you?</p>
            </div>

            <div class="alt-theory">
                <h4>Carol Gilligan: Ethics of Care</h4>
                <p>Carol Gilligan, a student of Kohlberg, argued in <em>In a Different Voice</em> (1982) that Kohlberg's model was biased toward a "justice orientation" typical of male moral development. She proposed an alternative: the <strong>ethics of care</strong>.</p>
                <ul style="margin-top:10px; padding-left:22px;">
                    <li><strong>Justice orientation (Kohlberg):</strong> Morality is about rights, rules, and fairness. Focuses on abstract principles applied impartially.</li>
                    <li><strong>Care orientation (Gilligan):</strong> Morality is about responsibility, relationships, and compassion. Focuses on responding to the needs of specific people.</li>
                </ul>
                <p style="margin-top:10px;">Gilligan proposed three stages of care-based moral development:</p>
                <ol style="padding-left:22px; margin-top:6px;">
                    <li><strong>Pre-conventional:</strong> Focus on caring for oneself (survival)</li>
                    <li><strong>Conventional:</strong> Self-sacrifice; caring for others at the expense of oneself</li>
                    <li><strong>Post-conventional:</strong> Balancing care for self and others; recognising the interconnectedness of all people</li>
                </ol>
                <p style="margin-top:10px;">Gilligan's work showed that neither approach is superior. A complete picture of moral development should include both justice and care.</p>
            </div>
        </div>
    </div>
</main>

<script>
(function() {
    // --- DATA ---
    const STAGES = {
        1: { name: 'Stage 1: Obedience/Punishment', color: 'var(--stage1)', shortName: 'Stage 1' },
        2: { name: 'Stage 2: Self-Interest', color: 'var(--stage2)', shortName: 'Stage 2' },
        3: { name: 'Stage 3: Good Boy/Girl', color: 'var(--stage3)', shortName: 'Stage 3' },
        4: { name: 'Stage 4: Law and Order', color: 'var(--stage4)', shortName: 'Stage 4' },
        5: { name: 'Stage 5: Social Contract', color: 'var(--stage5)', shortName: 'Stage 5' },
        6: { name: 'Stage 6: Universal Principles', color: 'var(--stage6)', shortName: 'Stage 6' }
    };

    const dilemmas = [
        {
            id: 'heinz',
            title: 'The Heinz Dilemma',
            scenario: 'A woman is dying from a rare cancer. There is one drug that might save her, discovered by a local chemist. The chemist is charging ten times what the drug costs him to make. Heinz, the woman\'s husband, can only raise half the money. He asks the chemist to sell it cheaper or let him pay later, but the chemist refuses. Should Heinz steal the drug?',
            responses: [
                { id: 'h1', text: '"Heinz shouldn\'t steal the drug because he\'ll get caught and go to prison."', stage: 1, explanation: 'Stage 1: The reasoning focuses entirely on the punishment Heinz would receive. There is no consideration of the moral dimensions of the situation, only the consequences of getting caught.' },
                { id: 'h2', text: '"Heinz should steal it because his wife might repay him by helping him later. If she dies, who will look after him?"', stage: 2, explanation: 'Stage 2: The reasoning treats the relationship as a transaction. The wife\'s value is calculated in terms of what she can do for Heinz, not her intrinsic worth.' },
                { id: 'h3', text: '"Heinz should steal it because a good husband would do anything for his wife. People would think he was heartless if he let her die."', stage: 3, explanation: 'Stage 3: The reasoning centres on social expectations and how Heinz would be perceived. Being a "good husband" and avoiding others\' disapproval are the key motivators.' },
                { id: 'h4', text: '"Heinz shouldn\'t steal the drug because stealing is against the law, and if everyone stole whenever they felt justified, society would break down."', stage: 4, explanation: 'Stage 4: The reasoning appeals to law and social order. The concern is systemic: what would happen to society if laws were ignored whenever individuals felt their cause was just?' },
                { id: 'h5', text: '"The law against stealing should be weighed against the right to life. The law exists to protect people, but when it fails to do so, civil disobedience may be justified while working to change the law."', stage: 5, explanation: 'Stage 5: The reasoning recognises laws as social contracts that should serve human welfare. When the law fails its purpose, it can be legitimately challenged, but through reasoned democratic means.' },
                { id: 'h6', text: '"Human life has inherent value that transcends property rights. Heinz has a moral obligation to save his wife because the principle of preserving life takes precedence over all other considerations."', stage: 6, explanation: 'Stage 6: The reasoning appeals to a universal principle (the sanctity of human life) that exists independently of laws, social norms, or personal benefit. The principle applies regardless of who the dying person is.' }
            ]
        },
        {
            id: 'trolley',
            title: 'The Trolley Problem',
            scenario: 'A runaway trolley is heading toward five workers on the track who cannot escape. You are standing next to a lever that would divert the trolley onto a side track, where one worker is standing. If you pull the lever, one person dies but five are saved. If you do nothing, five people die. What should you do?',
            responses: [
                { id: 't1', text: '"Don\'t touch the lever. If you pull it and someone dies, you could be charged with murder. You\'d definitely get in trouble."', stage: 1, explanation: 'Stage 1: The reasoning is based entirely on avoiding personal punishment. The moral weight of five lives versus one is not considered; only the legal consequences to the decision-maker matter.' },
                { id: 't2', text: '"It depends. Do I know any of the people on either track? I\'d save whichever group includes someone useful to me."', stage: 2, explanation: 'Stage 2: The reasoning is based on self-interest. The value of others\' lives is calculated according to their usefulness to the person making the decision, not any broader moral principle.' },
                { id: 't3', text: '"I\'d pull the lever because most people would say saving five lives is the kind and caring thing to do. You\'d be seen as a hero."', stage: 3, explanation: 'Stage 3: The reasoning centres on social approval and being perceived positively. The decision is motivated by wanting to be seen as kind and heroic rather than by an analysis of rights or principles.' },
                { id: 't4', text: '"Don\'t pull the lever. Deliberately causing someone\'s death, even to save others, violates the law. We cannot take the role of deciding who lives and dies."', stage: 4, explanation: 'Stage 4: The reasoning appeals to legal and institutional authority. The law against killing is treated as an absolute boundary that individuals should not cross, even in extreme circumstances.' },
                { id: 't5', text: '"Pull the lever. While the one worker\'s right to life matters, a rational social agreement would favour saving the greatest number. This utilitarian outcome respects the social contract."', stage: 5, explanation: 'Stage 5: The reasoning weighs competing rights through the lens of a social contract. It acknowledges the tension between individual rights and collective welfare and applies a rational framework to resolve it.' },
                { id: 't6', text: '"This dilemma reveals a conflict between two universal principles: the duty not to harm, and the duty to prevent harm. Each person\'s life has equal and infinite worth, making this a genuinely tragic moral choice with no clean answer."', stage: 6, explanation: 'Stage 6: The reasoning engages with universal ethical principles directly. It recognises the inherent dignity of each person and honestly confronts the moral tragedy rather than reducing it to a simple calculation.' }
            ]
        },
        {
            id: 'whistle',
            title: 'The Whistleblower',
            scenario: 'You work at a large pharmaceutical company and discover that your employer has been falsifying safety data for a widely used medication, putting thousands of patients at risk. Reporting this to regulators would likely save lives but would destroy the company, costing hundreds of employees their jobs, and you would almost certainly be fired and struggle to find work in the industry again. What should you do?',
            responses: [
                { id: 'w1', text: '"Keep quiet. Whistleblowers always get punished. You\'ll lose your job and probably get sued. It\'s not worth the risk."', stage: 1, explanation: 'Stage 1: The reasoning focuses entirely on the punishment the whistleblower would face. The safety of thousands of patients is not weighed against the personal consequences.' },
                { id: 'w2', text: '"Only report it if you can negotiate a deal first. Maybe get a reward, a new job offer, or immunity. Make sure you benefit from the information."', stage: 2, explanation: 'Stage 2: The reasoning treats the moral situation as a negotiation. The information has value, and the person seeks to maximise their personal advantage from it.' },
                { id: 'w3', text: '"Think about your colleagues and how they\'d feel. Your team trusts you and the company has been good to you. A loyal employee wouldn\'t betray the company like that."', stage: 3, explanation: 'Stage 3: The reasoning prioritises interpersonal relationships, loyalty, and group belonging. Being a "good" colleague and showing loyalty to the people you work with outweigh broader considerations.' },
                { id: 'w4', text: '"You have a legal duty to report safety violations. The regulatory system exists to protect public health, and following proper channels is the right thing to do."', stage: 4, explanation: 'Stage 4: The reasoning appeals to legal duty and the regulatory system. The person follows the established institutional framework for handling such situations.' },
                { id: 'w5', text: '"Patient safety is a fundamental right that the company has violated. While the economic impact is real, democratic society has agreed that public health takes priority. Report it through proper channels and advocate for fair treatment of affected workers."', stage: 5, explanation: 'Stage 5: The reasoning balances competing interests (public health, workers\' livelihoods) within a framework of rights and social agreements. It seeks a democratic resolution that acknowledges all stakeholders.' },
                { id: 'w6', text: '"Protecting human life from known harm is a moral imperative that cannot be outweighed by economic or personal considerations. Every patient taking this drug has a right to safety and truthful information, regardless of the cost to the company or to me."', stage: 6, explanation: 'Stage 6: The reasoning invokes universal principles of human dignity, truthfulness, and the protection of life. The person accepts personal sacrifice as the necessary cost of acting on moral principle.' }
            ]
        },
        {
            id: 'environment',
            title: 'Environmental Activism',
            scenario: 'A group of activists plan to blockade a major road leading to a coal power station, disrupting traffic and the local economy for several days, to draw attention to climate change. The power station is legal and employs hundreds of people, but its emissions contribute significantly to air pollution that affects the health of nearby communities. Should the activists go ahead with the blockade?',
            responses: [
                { id: 'e1', text: '"They shouldn\'t do it. They\'ll get arrested and fined. It\'s just not worth the hassle for themselves."', stage: 1, explanation: 'Stage 1: The reasoning considers only the personal legal consequences to the activists. The environmental and health issues are not weighed at all.' },
                { id: 'e2', text: '"Only if it actually gets them what they want. If the blockade will get media coverage and lead to political change, it\'s a smart move. Otherwise it\'s a waste of time."', stage: 2, explanation: 'Stage 2: The reasoning is purely strategic and outcome-focused. The moral dimension is absent; the action is evaluated only on whether it achieves the desired result for those taking it.' },
                { id: 'e3', text: '"They should think about the workers and commuters they\'d be inconveniencing. Those are real people with families. Good people don\'t deliberately make others\' lives harder."', stage: 3, explanation: 'Stage 3: The reasoning centres on empathy for the people directly affected and on being a "good" person. The focus is on interpersonal impact rather than systemic analysis.' },
                { id: 'e4', text: '"The power station is operating legally. If you disagree with something, you work through the democratic system: vote, lobby, campaign. Illegal protest undermines the rule of law."', stage: 4, explanation: 'Stage 4: The reasoning upholds the legal system and established processes for change. The concern is that breaking the law, even for a cause, threatens the social order that everyone depends on.' },
                { id: 'e5', text: '"There is a tension between the right to protest and the right to go about daily life. When the democratic system fails to address a genuine threat to public health, peaceful civil disobedience can be justified, but activists must accept legal consequences and work to change laws through proper channels."', stage: 5, explanation: 'Stage 5: The reasoning balances competing rights within a social contract framework. It acknowledges that civil disobedience can be legitimate when democratic systems fail, while still respecting the rule of law as a general principle.' },
                { id: 'e6', text: '"We have a universal moral obligation to protect the environment for current and future generations. When legal systems fail to protect human health and planetary wellbeing, conscience demands action regardless of personal cost. The right to a healthy environment is a fundamental human right."', stage: 6, explanation: 'Stage 6: The reasoning appeals to universal principles of intergenerational justice and human rights. It places moral obligation above legal compliance when fundamental ethical principles are at stake.' }
            ]
        }
    ];

    // --- STATE ---
    let totalCorrect = 0;
    let totalAttempted = 0;
    let checkedDilemmas = new Set();
    let touchSelected = null;

    // --- TAB NAVIGATION ---
    document.querySelectorAll('.nav-tab').forEach(tab => {
        tab.addEventListener('click', () => {
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('panel-' + tab.dataset.tab).classList.add('active');
        });
    });

    // --- RENDER DILEMMAS ---
    function renderDilemmas() {
        const container = document.getElementById('dilemmaContainer');
        container.innerHTML = '';
        document.getElementById('resultsSummary').style.display = 'none';
        totalCorrect = 0;
        totalAttempted = 0;
        checkedDilemmas.clear();
        updateScore();

        dilemmas.forEach((d, dIdx) => {
            const section = document.createElement('div');
            section.className = 'dilemma-section';
            section.id = 'dilemma-' + d.id;

            const shuffled = [...d.responses].sort(() => Math.random() - 0.5);

            section.innerHTML = `
                <div class="dilemma-card">
                    <div class="dilemma-title">Dilemma ${dIdx + 1}: ${d.title}</div>
                    <div class="dilemma-scenario">${d.scenario}</div>
                    <p class="activity-instructions">Drag each response card into the stage you think it belongs to. On touch devices, tap a card then tap a drop zone.</p>
                    <div class="response-cards-pool" id="pool-${d.id}"
                        data-dilemma="${d.id}">
                        ${shuffled.map(r => `
                            <div class="response-card" draggable="true" data-response="${r.id}" data-dilemma="${d.id}" data-correct-stage="${r.stage}">
                                ${r.text}
                                <div class="correct-label"></div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="drop-zones" id="zones-${d.id}">
                        ${[1,2,3,4,5,6].map(s => `
                            <div class="drop-zone dz-s${s}" data-stage="${s}" data-dilemma="${d.id}">
                                <div class="drop-zone-header">${STAGES[s].name}</div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="btn-row">
                        <button class="btn btn-primary" onclick="checkDilemma('${d.id}')">Check Answers</button>
                        <button class="btn btn-secondary" onclick="resetDilemma('${d.id}')">Reset</button>
                        <button class="btn btn-secondary" onclick="toggleExplanation('${d.id}')">Show Explanations</button>
                    </div>
                    <div class="explanation-panel" id="explain-${d.id}">
                        <h4>Why each response belongs to its stage:</h4>
                        ${d.responses.map(r => `
                            <div class="explanation-item" style="border-color:${STAGES[r.stage].color};">
                                <strong>${r.text}</strong>
                                ${r.explanation}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            container.appendChild(section);
        });

        initDragDrop();
    }

    // --- DRAG AND DROP ---
    function initDragDrop() {
        document.querySelectorAll('.response-card').forEach(card => {
            card.addEventListener('dragstart', onDragStart);
            card.addEventListener('dragend', onDragEnd);
            card.addEventListener('click', onTouchSelect);
        });

        document.querySelectorAll('.drop-zone, .response-cards-pool').forEach(zone => {
            zone.addEventListener('dragover', onDragOver);
            zone.addEventListener('dragleave', onDragLeave);
            zone.addEventListener('drop', onDrop);
            zone.addEventListener('click', onTouchDrop);
        });
    }

    let draggedCard = null;

    function onDragStart(e) {
        draggedCard = e.target.closest('.response-card');
        if (!draggedCard) return;
        draggedCard.classList.add('dragging');
        e.dataTransfer.setData('text/plain', draggedCard.dataset.response);
        e.dataTransfer.effectAllowed = 'move';
    }

    function onDragEnd(e) {
        if (draggedCard) draggedCard.classList.remove('dragging');
        document.querySelectorAll('.drag-over').forEach(el => el.classList.remove('drag-over'));
        draggedCard = null;
    }

    function onDragOver(e) {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
        const zone = e.target.closest('.drop-zone, .response-cards-pool');
        if (zone) zone.classList.add('drag-over');
    }

    function onDragLeave(e) {
        const zone = e.target.closest('.drop-zone, .response-cards-pool');
        if (zone) zone.classList.remove('drag-over');
    }

    function onDrop(e) {
        e.preventDefault();
        const zone = e.target.closest('.drop-zone, .response-cards-pool');
        if (!zone || !draggedCard) return;
        zone.classList.remove('drag-over');

        if (zone.dataset.dilemma === draggedCard.dataset.dilemma ||
            zone.classList.contains('response-cards-pool') && zone.dataset.dilemma === draggedCard.dataset.dilemma) {
            zone.appendChild(draggedCard);
        }
    }

    // Touch support: tap to select card, tap zone to place
    function onTouchSelect(e) {
        const card = e.target.closest('.response-card');
        if (!card) return;

        if (touchSelected === card) {
            card.classList.remove('touch-selected');
            touchSelected = null;
            clearTouchTargets();
            return;
        }

        if (touchSelected) touchSelected.classList.remove('touch-selected');
        touchSelected = card;
        card.classList.add('touch-selected');

        // Highlight valid drop zones
        clearTouchTargets();
        const did = card.dataset.dilemma;
        document.querySelectorAll(`.drop-zone[data-dilemma="${did}"], #pool-${did}`).forEach(z => {
            z.classList.add('touch-target');
        });

        e.stopPropagation();
    }

    function onTouchDrop(e) {
        if (!touchSelected) return;
        const zone = e.target.closest('.drop-zone, .response-cards-pool');
        if (!zone) return;

        const did = touchSelected.dataset.dilemma;
        if (zone.dataset.dilemma === did) {
            zone.appendChild(touchSelected);
            touchSelected.classList.remove('touch-selected');
            touchSelected = null;
            clearTouchTargets();
        }
    }

    function clearTouchTargets() {
        document.querySelectorAll('.touch-target').forEach(z => z.classList.remove('touch-target'));
    }

    // --- CHECK / RESET ---
    window.checkDilemma = function(dilemmaId) {
        if (checkedDilemmas.has(dilemmaId)) return;

        const dilemma = dilemmas.find(d => d.id === dilemmaId);
        let correct = 0;
        let total = dilemma.responses.length;

        dilemma.responses.forEach(r => {
            const card = document.querySelector(`.response-card[data-response="${r.id}"]`);
            if (!card) return;

            const parent = card.parentElement;
            const placedStage = parent.dataset.stage ? parseInt(parent.dataset.stage) : null;

            card.draggable = false;
            card.style.cursor = 'default';

            if (placedStage === r.stage) {
                card.classList.add('correct');
                card.querySelector('.correct-label').textContent = 'Correct';
                correct++;
            } else if (placedStage !== null) {
                card.classList.add('incorrect');
                card.querySelector('.correct-label').textContent =
                    'Incorrect. Correct answer: ' + STAGES[r.stage].name;
            } else {
                card.classList.add('incorrect');
                card.querySelector('.correct-label').textContent =
                    'Not placed. Correct answer: ' + STAGES[r.stage].name;
            }
        });

        totalCorrect += correct;
        totalAttempted += total;
        checkedDilemmas.add(dilemmaId);
        updateScore();

        if (checkedDilemmas.size === dilemmas.length) {
            showFinalResults();
        }
    };

    window.resetDilemma = function(dilemmaId) {
        if (checkedDilemmas.has(dilemmaId)) {
            const dilemma = dilemmas.find(d => d.id === dilemmaId);
            totalCorrect -= countCorrectInDilemma(dilemmaId);
            totalAttempted -= dilemma.responses.length;
            checkedDilemmas.delete(dilemmaId);
        }

        const pool = document.getElementById('pool-' + dilemmaId);
        const cards = document.querySelectorAll(`.response-card[data-dilemma="${dilemmaId}"]`);
        const arr = Array.from(cards).sort(() => Math.random() - 0.5);

        arr.forEach(card => {
            card.classList.remove('correct', 'incorrect', 'touch-selected');
            card.querySelector('.correct-label').textContent = '';
            card.draggable = true;
            card.style.cursor = 'grab';
            pool.appendChild(card);
        });

        const explainPanel = document.getElementById('explain-' + dilemmaId);
        explainPanel.classList.remove('visible');

        updateScore();

        if (document.getElementById('resultsSummary').style.display !== 'none') {
            document.getElementById('resultsSummary').style.display = 'none';
        }
    };

    function countCorrectInDilemma(dilemmaId) {
        const dilemma = dilemmas.find(d => d.id === dilemmaId);
        let count = 0;
        dilemma.responses.forEach(r => {
            const card = document.querySelector(`.response-card[data-response="${r.id}"]`);
            if (card && card.classList.contains('correct')) count++;
        });
        return count;
    }

    window.toggleExplanation = function(dilemmaId) {
        const panel = document.getElementById('explain-' + dilemmaId);
        panel.classList.toggle('visible');
    };

    function updateScore() {
        document.getElementById('scoreDisplay').textContent = `Score: ${totalCorrect} / ${totalAttempted}`;
    }

    function showFinalResults() {
        const pct = totalAttempted > 0 ? Math.round((totalCorrect / totalAttempted) * 100) : 0;
        document.getElementById('finalScore').textContent = `${totalCorrect} / ${totalAttempted} (${pct}%)`;

        let msg = '';
        if (pct === 100) msg = 'Outstanding! You have an excellent understanding of Kohlberg\'s stages.';
        else if (pct >= 80) msg = 'Great work! You clearly understand the key differences between the stages.';
        else if (pct >= 60) msg = 'Good effort. Review the explanations to sharpen your understanding of each stage\'s reasoning patterns.';
        else if (pct >= 40) msg = 'A solid start. Try reading the Theory Guide tab to learn the key phrases and patterns for each stage.';
        else msg = 'This is a challenging activity. Review the Theory Guide and try again; focus on the "why" behind each response, not the conclusion.';

        document.getElementById('finalMessage').textContent = msg;
        document.getElementById('resultsSummary').style.display = 'block';
        document.getElementById('resultsSummary').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    window.resetAll = function() {
        renderDilemmas();
        window.scrollTo({ top: 0, behavior: 'smooth' });
    };

    // Clear touch selection when clicking empty area
    document.addEventListener('click', function(e) {
        if (!e.target.closest('.response-card') && !e.target.closest('.drop-zone') && !e.target.closest('.response-cards-pool')) {
            if (touchSelected) {
                touchSelected.classList.remove('touch-selected');
                touchSelected = null;
                clearTouchTargets();
            }
        }
    });

    // --- INIT ---
    renderDilemmas();
})();
</script>
</body>
</html>