<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>B1 Cell Biology — Eukaryotic &amp; Prokaryotic Cells</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body { font-family: 'Segoe UI', system-ui, sans-serif; background: #0f172a; color: #e2e8f0; min-height: 100vh; }

  header { background: linear-gradient(135deg, #1e3a5f, #2d6a4f); padding: 1.2rem 2rem; text-align: center; border-bottom: 3px solid #10b981; }
  header h1 { font-size: 1.6rem; color: #fff; }
  header p { font-size: 0.85rem; color: #94a3b8; margin-top: 0.3rem; }

  .tabs { display: flex; justify-content: center; gap: 0.5rem; padding: 1rem; background: #1e293b; flex-wrap: wrap; }
  .tab { padding: 0.6rem 1.4rem; border: 2px solid #334155; border-radius: 8px; cursor: pointer; font-size: 0.9rem; transition: all 0.3s; background: transparent; color: #94a3b8; }
  .tab:hover { border-color: #10b981; color: #fff; }
  .tab.active { background: #10b981; border-color: #10b981; color: #fff; font-weight: 600; }

  .panel { display: none; padding: 1.5rem; max-width: 1100px; margin: 0 auto; }
  .panel.active { display: block; }

  /* Cell Diagrams */
  .cell-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-top: 1rem; }
  @media (max-width: 768px) { .cell-grid { grid-template-columns: 1fr; } }

  .cell-card { background: #1e293b; border-radius: 12px; padding: 1.5rem; border: 2px solid #334155; }
  .cell-card h3 { text-align: center; margin-bottom: 1rem; font-size: 1.2rem; }
  .cell-card.euk h3 { color: #60a5fa; }
  .cell-card.prok h3 { color: #f472b6; }

  canvas { display: block; margin: 0 auto; border-radius: 8px; cursor: pointer; }

  .info-box { margin-top: 1rem; padding: 0.8rem; background: #0f172a; border-radius: 8px; min-height: 60px; font-size: 0.85rem; line-height: 1.5; }
  .info-box .label { font-weight: 700; color: #10b981; }

  /* Comparison Table */
  table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
  th, td { padding: 0.7rem 1rem; text-align: left; border-bottom: 1px solid #334155; font-size: 0.9rem; }
  th { background: #10b981; color: #fff; }
  tr:hover { background: #1e293b; }
  td:first-child { font-weight: 600; color: #94a3b8; }
  .yes { color: #10b981; font-weight: 700; }
  .no { color: #ef4444; }
  .maybe { color: #f59e0b; }

  /* Size Scale */
  .scale-container { margin-top: 1rem; background: #1e293b; border-radius: 12px; padding: 1.5rem; }
  .scale-bar { position: relative; height: 60px; background: linear-gradient(90deg, #312e81, #1e3a5f, #064e3b, #365314); border-radius: 8px; margin: 1.5rem 0; }
  .scale-marker { position: absolute; top: -8px; transform: translateX(-50%); text-align: center; cursor: pointer; transition: transform 0.2s; }
  .scale-marker:hover { transform: translateX(-50%) scale(1.15); }
  .scale-dot { width: 16px; height: 16px; border-radius: 50%; border: 2px solid #fff; margin: 0 auto; }
  .scale-label { font-size: 0.65rem; margin-top: 4px; white-space: nowrap; color: #cbd5e1; }
  .scale-size { font-size: 0.6rem; color: #10b981; }
  .scale-info { padding: 1rem; background: #0f172a; border-radius: 8px; min-height: 50px; font-size: 0.85rem; }

  /* Standard Form */
  .sf-section { background: #1e293b; border-radius: 12px; padding: 1.5rem; margin-top: 1rem; }
  .sf-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; margin-top: 1rem; }
  @media (max-width: 768px) { .sf-grid { grid-template-columns: 1fr; } }

  .sf-example { background: #0f172a; border-radius: 8px; padding: 1rem; }
  .sf-example h4 { color: #60a5fa; margin-bottom: 0.5rem; font-size: 0.95rem; }
  .sf-example .val { font-size: 1.3rem; color: #10b981; font-family: 'Courier New', monospace; margin: 0.5rem 0; }

  /* Quiz */
  .quiz-q { background: #1e293b; border-radius: 12px; padding: 1.5rem; margin-bottom: 1rem; }
  .quiz-q h4 { color: #60a5fa; margin-bottom: 1rem; }
  .quiz-q h4 span { font-size: 0.75rem; color: #64748b; font-weight: 400; }
  .options { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
  @media (max-width: 600px) { .options { grid-template-columns: 1fr; } }
  .opt-btn { padding: 0.6rem 1rem; border: 2px solid #334155; border-radius: 8px; background: transparent; color: #e2e8f0; cursor: pointer; font-size: 0.85rem; transition: all 0.2s; text-align: left; }
  .opt-btn:hover:not(.chosen) { border-color: #60a5fa; }
  .opt-btn.correct { border-color: #10b981; background: #10b98122; color: #10b981; }
  .opt-btn.wrong { border-color: #ef4444; background: #ef444422; color: #ef4444; }
  .quiz-fb { margin-top: 0.7rem; font-size: 0.85rem; padding: 0.5rem; border-radius: 6px; display: none; }

  .score-bar { text-align: center; padding: 1rem; background: #1e293b; border-radius: 12px; margin-bottom: 1rem; }
  .score-bar span { font-size: 1.3rem; font-weight: 700; color: #10b981; }
  #resetQuiz { margin-top: 0.5rem; padding: 0.5rem 1.5rem; border: 2px solid #10b981; background: transparent; color: #10b981; border-radius: 8px; cursor: pointer; font-size: 0.85rem; }
  #resetQuiz:hover { background: #10b981; color: #fff; }

  /* Keywords */
  .kw-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 1rem; margin-top: 1rem; }
  .kw-card { background: #1e293b; border-radius: 10px; padding: 1.2rem; border-left: 4px solid #10b981; cursor: pointer; transition: transform 0.2s; }
  .kw-card:hover { transform: translateY(-2px); }
  .kw-card h4 { color: #10b981; margin-bottom: 0.4rem; }
  .kw-card p { font-size: 0.82rem; color: #94a3b8; line-height: 1.5; }
  .kw-card .reveal { display: none; margin-top: 0.5rem; padding-top: 0.5rem; border-top: 1px solid #334155; color: #e2e8f0; font-size: 0.82rem; }
  .kw-card.open .reveal { display: block; }
  .kw-card .hint { font-size: 0.7rem; color: #64748b; margin-top: 0.3rem; }
</style>
</head>
<body>

<header>
  <h1>B1: Cell Biology — Eukaryotic &amp; Prokaryotic Cells</h1>
  <p>11 Biology &bull; WS 1.2 &bull; MS 1b, 2a</p>
</header>

<div class="tabs">
  <button class="tab active" data-panel="diagrams">Interactive Cells</button>
  <button class="tab" data-panel="compare">Comparison</button>
  <button class="tab" data-panel="scale">Size &amp; Scale</button>
  <button class="tab" data-panel="stdform">Standard Form</button>
  <button class="tab" data-panel="quiz">Quiz</button>
  <button class="tab" data-panel="keywords">Key Terms</button>
</div>

<!-- ===== INTERACTIVE CELL DIAGRAMS ===== -->
<div class="panel active" id="diagrams">
  <p style="text-align:center;color:#94a3b8;font-size:0.85rem;margin-bottom:0.5rem;">Click or hover over structures to learn about them</p>
  <div class="cell-grid">
    <div class="cell-card euk">
      <h3>Eukaryotic Cell (Animal)</h3>
      <canvas id="eukCanvas" width="400" height="350"></canvas>
      <div class="info-box" id="eukInfo">Hover over or click a structure to see details.</div>
    </div>
    <div class="cell-card prok">
      <h3>Prokaryotic Cell (Bacterium)</h3>
      <canvas id="prokCanvas" width="400" height="350"></canvas>
      <div class="info-box" id="prokInfo">Hover over or click a structure to see details.</div>
    </div>
  </div>
</div>

<!-- ===== COMPARISON TABLE ===== -->
<div class="panel" id="compare">
  <h2 style="color:#10b981;margin-bottom:0.5rem;">Eukaryotic vs Prokaryotic</h2>
  <table>
    <thead><tr><th>Feature</th><th>Animal Cell</th><th>Plant Cell</th><th>Bacterial Cell</th></tr></thead>
    <tbody>
      <tr><td>Type</td><td class="yes">Eukaryotic</td><td class="yes">Eukaryotic</td><td class="maybe">Prokaryotic</td></tr>
      <tr><td>Typical Size</td><td>10–30 µm</td><td>10–100 µm</td><td>0.2–5 µm</td></tr>
      <tr><td>Cell Membrane</td><td class="yes">✔</td><td class="yes">✔</td><td class="yes">✔</td></tr>
      <tr><td>Cytoplasm</td><td class="yes">✔</td><td class="yes">✔</td><td class="yes">✔</td></tr>
      <tr><td>Nucleus (membrane-bound)</td><td class="yes">✔</td><td class="yes">✔</td><td class="no">✘</td></tr>
      <tr><td>Mitochondria</td><td class="yes">✔</td><td class="yes">✔</td><td class="no">✘</td></tr>
      <tr><td>Ribosomes</td><td class="yes">✔ (80S)</td><td class="yes">✔ (80S)</td><td class="yes">✔ (70S, smaller)</td></tr>
      <tr><td>Cell Wall</td><td class="no">✘</td><td class="yes">✔ (cellulose)</td><td class="yes">✔ (peptidoglycan)</td></tr>
      <tr><td>Chloroplasts</td><td class="no">✘</td><td class="yes">✔</td><td class="no">✘</td></tr>
      <tr><td>Permanent Vacuole</td><td class="no">✘</td><td class="yes">✔ (large, central)</td><td class="no">✘</td></tr>
      <tr><td>DNA arrangement</td><td>Linear chromosomes</td><td>Linear chromosomes</td><td>Single DNA loop</td></tr>
      <tr><td>Plasmids</td><td class="no">✘</td><td class="no">✘</td><td class="yes">✔ (small rings)</td></tr>
    </tbody>
  </table>
</div>

<!-- ===== SIZE & SCALE ===== -->
<div class="panel" id="scale">
  <h2 style="color:#10b981;margin-bottom:0.5rem;">Orders of Magnitude — Cell Sizes</h2>
  <div class="scale-container">
    <p style="font-size:0.85rem;color:#94a3b8;">Click a marker to learn more. Sizes span several orders of magnitude.</p>
    <div class="scale-bar" id="scaleBar"></div>
    <div class="scale-info" id="scaleInfo">Click a marker above to see size details and comparisons.</div>
  </div>
  <div class="sf-section" style="margin-top:1.5rem;">
    <h3 style="color:#60a5fa;">Order of Magnitude Calculator</h3>
    <p style="font-size:0.85rem;color:#94a3b8;margin:0.5rem 0;">Enter two sizes to compare their orders of magnitude difference.</p>
    <div style="display:flex;gap:1rem;flex-wrap:wrap;align-items:end;margin-top:0.8rem;">
      <div>
        <label style="font-size:0.8rem;color:#94a3b8;">Size A (metres)</label><br>
        <input id="sizeA" type="number" value="0.00001" step="any" style="padding:0.5rem;border-radius:6px;border:2px solid #334155;background:#0f172a;color:#e2e8f0;width:160px;">
      </div>
      <div>
        <label style="font-size:0.8rem;color:#94a3b8;">Size B (metres)</label><br>
        <input id="sizeB" type="number" value="0.000001" step="any" style="padding:0.5rem;border-radius:6px;border:2px solid #334155;background:#0f172a;color:#e2e8f0;width:160px;">
      </div>
      <button onclick="calcMagnitude()" style="padding:0.5rem 1.2rem;border-radius:6px;border:2px solid #10b981;background:#10b981;color:#fff;cursor:pointer;font-weight:600;">Calculate</button>
    </div>
    <div id="magResult" style="margin-top:1rem;padding:0.8rem;background:#0f172a;border-radius:8px;font-size:0.9rem;"></div>
  </div>
</div>

<!-- ===== STANDARD FORM ===== -->
<div class="panel" id="stdform">
  <h2 style="color:#10b981;margin-bottom:0.5rem;">Standard Form &amp; Cell Sizes (MS 1b, 2a)</h2>
  <div class="sf-section">
    <p style="font-size:0.85rem;color:#94a3b8;">Standard form writes numbers as <strong style="color:#10b981;">A × 10<sup>n</sup></strong> where 1 ≤ A &lt; 10.</p>
    <div class="sf-grid">
      <div class="sf-example">
        <h4>Animal Cell (20 µm)</h4>
        <div>20 µm = 0.00002 m</div>
        <div class="val">= 2 × 10<sup>−5</sup> m</div>
      </div>
      <div class="sf-example">
        <h4>Bacterium (2 µm)</h4>
        <div>2 µm = 0.000002 m</div>
        <div class="val">= 2 × 10<sup>−6</sup> m</div>
      </div>
      <div class="sf-example">
        <h4>How many times bigger?</h4>
        <div>2 × 10<sup>−5</sup> ÷ 2 × 10<sup>−6</sup></div>
        <div class="val">= 10 times (1 order of magnitude)</div>
      </div>
      <div class="sf-example">
        <h4>Red Blood Cell (7 µm)</h4>
        <div>7 µm = 0.000007 m</div>
        <div class="val">= 7 × 10<sup>−6</sup> m</div>
      </div>
    </div>
  </div>
  <div class="sf-section" style="margin-top:1.5rem;">
    <h3 style="color:#60a5fa;">Practice Converter</h3>
    <p style="font-size:0.85rem;color:#94a3b8;margin:0.5rem 0;">Enter a number to convert to standard form.</p>
    <div style="display:flex;gap:1rem;flex-wrap:wrap;align-items:end;">
      <div>
        <label style="font-size:0.8rem;color:#94a3b8;">Number</label><br>
        <input id="sfInput" type="text" value="0.000045" style="padding:0.5rem;border-radius:6px;border:2px solid #334155;background:#0f172a;color:#e2e8f0;width:200px;">
      </div>
      <button onclick="convertSF()" style="padding:0.5rem 1.2rem;border-radius:6px;border:2px solid #10b981;background:#10b981;color:#fff;cursor:pointer;font-weight:600;">Convert</button>
    </div>
    <div id="sfResult" style="margin-top:1rem;padding:0.8rem;background:#0f172a;border-radius:8px;font-size:1.1rem;font-family:'Courier New',monospace;color:#10b981;"></div>
  </div>
</div>

<!-- ===== QUIZ ===== -->
<div class="panel" id="quiz">
  <div class="score-bar">Score: <span id="quizScore">0</span> / <span id="quizTotal">0</span><br>
    <button id="resetQuiz" onclick="resetQuiz()">Reset Quiz</button>
  </div>
  <div id="quizContainer"></div>
</div>

<!-- ===== KEY TERMS ===== -->
<div class="panel" id="keywords">
  <h2 style="color:#10b981;margin-bottom:0.3rem;">Key Terms</h2>
  <p style="font-size:0.82rem;color:#94a3b8;margin-bottom:0.5rem;">Click a card to reveal more detail.</p>
  <div class="kw-grid" id="kwGrid"></div>
</div>

<script>
// ===== TAB NAVIGATION =====
document.querySelectorAll('.tab').forEach(t => {
  t.addEventListener('click', () => {
    document.querySelectorAll('.tab').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    t.classList.add('active');
    document.getElementById(t.dataset.panel).classList.add('active');
  });
});

// ===== EUKARYOTIC CELL DRAWING =====
const eukC = document.getElementById('eukCanvas');
const eukCtx = eukC.getContext('2d');
const eukParts = [];

function drawEukaryotic() {
  const cx = 200, cy = 175, rx = 160, ry = 140;
  eukCtx.clearRect(0, 0, 400, 350);

  // Cell membrane
  eukCtx.beginPath(); eukCtx.ellipse(cx, cy, rx, ry, 0, 0, Math.PI*2);
  eukCtx.fillStyle = '#1a3a2a'; eukCtx.fill();
  eukCtx.strokeStyle = '#10b981'; eukCtx.lineWidth = 3; eukCtx.stroke();
  eukParts.push({ name: 'Cell Membrane', desc: 'A thin, flexible barrier that controls what enters and leaves the cell. Made of a phospholipid bilayer with embedded proteins.', x: cx, y: cy, rx, ry, type: 'ellipse' });

  // Cytoplasm label area (whole interior)
  eukParts.push({ name: 'Cytoplasm', desc: 'Jelly-like substance filling the cell. Site of many chemical reactions. Contains water, salts, enzymes and organelles.', x: cx, y: cy, rx: rx-20, ry: ry-20, type: 'ellipse', priority: -1 });

  // Nucleus
  const nx = 200, ny = 160, nr = 50;
  eukCtx.beginPath(); eukCtx.arc(nx, ny, nr, 0, Math.PI*2);
  eukCtx.fillStyle = '#1e3a5f'; eukCtx.fill();
  eukCtx.strokeStyle = '#60a5fa'; eukCtx.lineWidth = 2.5; eukCtx.stroke();
  // Nuclear pores
  for (let a = 0; a < Math.PI*2; a += Math.PI/4) {
    eukCtx.beginPath(); eukCtx.arc(nx + Math.cos(a)*nr, ny + Math.sin(a)*nr, 3, 0, Math.PI*2);
    eukCtx.fillStyle = '#3b82f6'; eukCtx.fill();
  }
  // Nucleolus
  eukCtx.beginPath(); eukCtx.arc(nx+5, ny-5, 14, 0, Math.PI*2);
  eukCtx.fillStyle = '#2563eb44'; eukCtx.fill();
  eukCtx.strokeStyle = '#3b82f680'; eukCtx.lineWidth = 1; eukCtx.stroke();
  // DNA squiggles
  eukCtx.strokeStyle = '#93c5fd'; eukCtx.lineWidth = 1.5;
  eukCtx.beginPath(); eukCtx.moveTo(nx-20, ny+10);
  for (let i = 0; i < 40; i+=4) { eukCtx.quadraticCurveTo(nx-20+i+2, ny+10+(i%8?-6:6), nx-20+i+4, ny+10); }
  eukCtx.stroke();
  eukParts.push({ name: 'Nucleus', desc: 'Contains genetic material (DNA) organised into chromosomes. Surrounded by a nuclear membrane with pores. Controls cell activities.', x: nx, y: ny, r: nr, type: 'circle' });

  // Mitochondria
  const mitos = [{x:100,y:100,a:0.3},{x:290,y:120,a:-0.4},{x:120,y:250,a:0.6}];
  mitos.forEach(m => {
    eukCtx.save(); eukCtx.translate(m.x, m.y); eukCtx.rotate(m.a);
    eukCtx.beginPath(); eukCtx.ellipse(0, 0, 28, 14, 0, 0, Math.PI*2);
    eukCtx.fillStyle = '#4a1942'; eukCtx.fill();
    eukCtx.strokeStyle = '#c084fc'; eukCtx.lineWidth = 2; eukCtx.stroke();
    // Cristae
    for (let i = -18; i < 18; i += 9) {
      eukCtx.beginPath(); eukCtx.moveTo(i, -10); eukCtx.quadraticCurveTo(i+4, 0, i, 10);
      eukCtx.strokeStyle = '#a855f766'; eukCtx.lineWidth = 1; eukCtx.stroke();
    }
    eukCtx.restore();
    eukParts.push({ name: 'Mitochondrion', desc: 'The "powerhouse" of the cell. Site of aerobic respiration — releases energy (ATP) from glucose. Has a double membrane with inner folds (cristae).', x: m.x, y: m.y, r: 28, type: 'circle' });
  });

  // Ribosomes (scattered dots)
  eukCtx.fillStyle = '#fbbf24';
  const riboPos = [{x:160,y:90},{x:300,y:200},{x:140,y:210},{x:260,y:260},{x:90,y:180},{x:310,y:170},{x:170,y:280},{x:250,y:90}];
  riboPos.forEach(r => { eukCtx.beginPath(); eukCtx.arc(r.x, r.y, 3, 0, Math.PI*2); eukCtx.fill(); });
  eukParts.push({ name: 'Ribosomes', desc: 'Tiny organelles where protein synthesis occurs. Found free in cytoplasm or attached to rough ER. Eukaryotic ribosomes are 80S.', x: 300, y: 200, r: 12, type: 'circle' });

  // Labels
  eukCtx.font = '11px Segoe UI'; eukCtx.fillStyle = '#94a3b8';
  eukCtx.fillText('Nucleus', 240, 145);
  eukCtx.fillText('Cell membrane', 250, 310);
  eukCtx.fillText('Mitochondria', 60, 80);
  eukCtx.fillStyle = '#fbbf24'; eukCtx.fillText('Ribosomes', 305, 215);
}

// ===== PROKARYOTIC CELL DRAWING =====
const prokC = document.getElementById('prokCanvas');
const prokCtx = prokC.getContext('2d');
const prokParts = [];

function drawProkaryotic() {
  const cx = 200, cy = 175;
  prokCtx.clearRect(0, 0, 400, 350);

  // Cell wall (outer)
  prokCtx.beginPath(); prokCtx.ellipse(cx, cy, 155, 115, 0, 0, Math.PI*2);
  prokCtx.fillStyle = '#1a2a1a'; prokCtx.fill();
  prokCtx.strokeStyle = '#a3e635'; prokCtx.lineWidth = 4; prokCtx.stroke();
  prokParts.push({ name: 'Cell Wall', desc: 'Rigid outer layer made of peptidoglycan. Provides structural support and protection. Found outside the cell membrane.', x: cx, y: cy, rx: 155, ry: 115, type: 'ellipse' });

  // Cell membrane (inner)
  prokCtx.beginPath(); prokCtx.ellipse(cx, cy, 140, 100, 0, 0, Math.PI*2);
  prokCtx.fillStyle = '#0f2520'; prokCtx.fill();
  prokCtx.strokeStyle = '#f472b6'; prokCtx.lineWidth = 2; prokCtx.stroke();
  prokParts.push({ name: 'Cell Membrane', desc: 'Controls what enters and leaves the cell. Same basic structure as in eukaryotic cells — phospholipid bilayer.', x: cx, y: cy, rx: 140, ry: 100, type: 'ellipse' });

  // Cytoplasm
  prokParts.push({ name: 'Cytoplasm', desc: 'The interior jelly-like fluid. In prokaryotes, ALL chemical reactions happen here as there are no membrane-bound organelles.', x: cx, y: cy, rx: 130, ry: 90, type: 'ellipse', priority: -1 });

  // Single DNA loop (nucleoid region)
  prokCtx.strokeStyle = '#f59e0b'; prokCtx.lineWidth = 2.5;
  prokCtx.beginPath();
  const dnaPoints = [];
  for (let a = 0; a < Math.PI*2; a += 0.05) {
    const r = 40 + Math.sin(a*5)*8;
    const dx = cx - 10 + Math.cos(a)*r;
    const dy = cy + Math.sin(a)*r*0.7;
    dnaPoints.push({x:dx,y:dy});
    if (a === 0) prokCtx.moveTo(dx, dy); else prokCtx.lineTo(dx, dy);
  }
  prokCtx.closePath(); prokCtx.stroke();
  // Fill nucleoid slightly
  prokCtx.fillStyle = '#f59e0b11'; prokCtx.fill();
  prokParts.push({ name: 'DNA (single loop)', desc: 'A single circular chromosome in the nucleoid region — NOT enclosed in a nucleus. Contains all the genes the bacterium needs to survive and reproduce.', x: cx-10, y: cy, r: 45, type: 'circle' });

  // Plasmids (small circles)
  const plasmidPos = [{x:100,y:120},{x:290,y:130},{x:310,y:220},{x:100,y:240}];
  plasmidPos.forEach(p => {
    prokCtx.beginPath(); prokCtx.arc(p.x, p.y, 10, 0, Math.PI*2);
    prokCtx.strokeStyle = '#fb923c'; prokCtx.lineWidth = 2; prokCtx.stroke();
    prokCtx.fillStyle = '#fb923c22'; prokCtx.fill();
    prokParts.push({ name: 'Plasmid', desc: 'Small, extra rings of DNA. Can replicate independently. Often carry genes for antibiotic resistance. Can be transferred between bacteria.', x: p.x, y: p.y, r: 12, type: 'circle' });
  });

  // Ribosomes (smaller than eukaryotic)
  prokCtx.fillStyle = '#38bdf8';
  const prokRibos = [{x:150,y:140},{x:250,y:160},{x:170,y:220},{x:230,y:230},{x:140,y:180},{x:270,y:190}];
  prokRibos.forEach(r => { prokCtx.beginPath(); prokCtx.arc(r.x, r.y, 2.5, 0, Math.PI*2); prokCtx.fill(); });
  prokParts.push({ name: 'Ribosomes', desc: 'Smaller (70S) than eukaryotic ribosomes. Still carry out protein synthesis. Free-floating in the cytoplasm.', x: 250, y: 160, r: 12, type: 'circle' });

  // Flagellum
  prokCtx.strokeStyle = '#94a3b8'; prokCtx.lineWidth = 2;
  prokCtx.beginPath(); prokCtx.moveTo(55, cy);
  for (let i = 0; i < 50; i += 5) { prokCtx.quadraticCurveTo(50-i, cy+(i%10?-8:8), 45-i, cy); }
  prokCtx.stroke();
  prokParts.push({ name: 'Flagellum', desc: 'A whip-like tail used for movement. Rotates like a propeller to push the bacterium through liquid. Not all bacteria have one.', x: 30, y: cy, r: 20, type: 'circle' });

  // Labels
  prokCtx.font = '11px Segoe UI'; prokCtx.fillStyle = '#94a3b8';
  prokCtx.fillText('Cell wall', 280, 70);
  prokCtx.fillText('Cell membrane', 240, 85);
  prokCtx.fillStyle = '#f59e0b'; prokCtx.fillText('DNA loop', 205, 155);
  prokCtx.fillStyle = '#fb923c'; prokCtx.fillText('Plasmids', 300, 145);
  prokCtx.fillStyle = '#38bdf8'; prokCtx.fillText('Ribosomes', 250, 250);
  prokCtx.fillStyle = '#94a3b8'; prokCtx.fillText('Flagellum', 10, cy - 25);
}

function hitTest(parts, mx, my) {
  // Sort: higher priority (specific organelles) first, cytoplasm last
  const sorted = [...parts].sort((a,b) => (b.priority||0) - (a.priority||0) || (a.r||Math.min(a.rx,a.ry)) - (b.r||Math.min(b.rx,b.ry)));
  for (const p of sorted) {
    if (p.type === 'circle') {
      if (Math.hypot(mx-p.x, my-p.y) < (p.r||30)) return p;
    } else if (p.type === 'ellipse') {
      if (((mx-p.x)/p.rx)**2 + ((my-p.y)/p.ry)**2 <= 1) return p;
    }
  }
  return null;
}

function setupCanvas(canvas, parts, infoId) {
  const info = document.getElementById(infoId);
  const handler = (e) => {
    const rect = canvas.getBoundingClientRect();
    const sx = canvas.width / rect.width, sy = canvas.height / rect.height;
    const mx = (e.clientX - rect.left)*sx, my = (e.clientY - rect.top)*sy;
    const hit = hitTest(parts, mx, my);
    if (hit) {
      canvas.style.cursor = 'pointer';
      info.innerHTML = `<span class="label">${hit.name}:</span> ${hit.desc}`;
    } else {
      canvas.style.cursor = 'default';
    }
  };
  canvas.addEventListener('mousemove', handler);
  canvas.addEventListener('click', handler);
}

drawEukaryotic();
drawProkaryotic();
setupCanvas(eukC, eukParts, 'eukInfo');
setupCanvas(prokC, prokParts, 'prokInfo');

// ===== SIZE SCALE =====
const scaleItems = [
  { name: 'Atom', size: 1e-10, color: '#818cf8', desc: 'About 0.1 nm. Far too small to see even with an electron microscope. The basic building blocks of matter.' },
  { name: 'DNA width', size: 2e-9, color: '#a78bfa', desc: '~2 nm wide. The double helix molecule that carries genetic information.' },
  { name: 'Ribosome', size: 2.5e-8, color: '#fbbf24', desc: '~25 nm. Visible only with electron microscopes. Made of RNA and protein.' },
  { name: 'Virus', size: 1e-7, color: '#f472b6', desc: '~100 nm. On the boundary of what electron microscopes can image. Not cells.' },
  { name: 'Bacterium', size: 2e-6, color: '#fb923c', desc: '~2 µm. Visible with a good light microscope at high magnification. Prokaryotic.' },
  { name: 'Red blood cell', size: 7e-6, color: '#ef4444', desc: '~7 µm. A small eukaryotic cell — no nucleus when mature.' },
  { name: 'Animal cell', size: 2e-5, color: '#60a5fa', desc: '~20 µm. Typical eukaryotic cell visible with a light microscope at ×400.' },
  { name: 'Plant cell', size: 1e-4, color: '#10b981', desc: '~100 µm. Often larger than animal cells due to the central vacuole.' },
  { name: 'Human egg', size: 1e-4, color: '#e879f9', desc: '~100 µm. The largest human cell — just visible to the naked eye.' },
];

const bar = document.getElementById('scaleBar');
scaleItems.forEach((item, i) => {
  const pct = (i / (scaleItems.length - 1)) * 90 + 5;
  const marker = document.createElement('div');
  marker.className = 'scale-marker';
  marker.style.left = pct + '%';
  marker.innerHTML = `<div class="scale-dot" style="background:${item.color}"></div><div class="scale-label">${item.name}</div><div class="scale-size">${item.size.toExponential(0)} m</div>`;
  marker.addEventListener('click', () => {
    document.getElementById('scaleInfo').innerHTML = `<span class="label">${item.name}</span> — ${item.size.toExponential(1)} m<br>${item.desc}`;
  });
  bar.appendChild(marker);
});

// ===== MAGNITUDE CALCULATOR =====
function calcMagnitude() {
  const a = parseFloat(document.getElementById('sizeA').value);
  const b = parseFloat(document.getElementById('sizeB').value);
  if (!a || !b || a <= 0 || b <= 0) { document.getElementById('magResult').textContent = 'Enter two positive numbers.'; return; }
  const ratio = a / b;
  const mag = Math.log10(ratio);
  document.getElementById('magResult').innerHTML =
    `<strong style="color:#60a5fa">${a.toExponential(2)}</strong> ÷ <strong style="color:#f472b6">${b.toExponential(2)}</strong> = <strong style="color:#10b981">${ratio.toExponential(2)}</strong><br>` +
    `Difference: <strong style="color:#fbbf24">${Math.abs(mag).toFixed(1)} orders of magnitude</strong> (${ratio >= 1 ? 'A is bigger' : 'B is bigger'})`;
}

// ===== STANDARD FORM CONVERTER =====
function convertSF() {
  const raw = document.getElementById('sfInput').value.trim();
  const n = parseFloat(raw);
  if (isNaN(n) || n === 0) { document.getElementById('sfResult').textContent = 'Enter a non-zero number.'; return; }
  const exp = Math.floor(Math.log10(Math.abs(n)));
  const coeff = n / Math.pow(10, exp);
  document.getElementById('sfResult').innerHTML = `${raw} = <strong>${coeff.toFixed(2)} × 10<sup>${exp}</sup></strong>`;
}

// ===== QUIZ =====
const questions = [
  { q: 'Which type of cell has a membrane-bound nucleus?', o: ['Eukaryotic','Prokaryotic','Both','Neither'], a: 0, fb: 'Eukaryotic cells have a true nucleus enclosed by a nuclear membrane.' },
  { q: 'What extra structure do bacterial cells have that animal cells lack?', o: ['Nucleus','Cell wall','Mitochondria','Chloroplasts'], a: 1, fb: 'Bacterial cells have a cell wall made of peptidoglycan for protection.' },
  { q: 'What are plasmids?', o: ['Large chromosomes','Small extra rings of DNA','Proteins','Organelles'], a: 1, fb: 'Plasmids are small circular DNA molecules found in bacteria, often carrying antibiotic resistance genes.' },
  { q: 'How is DNA arranged in a bacterium?', o: ['Linear chromosomes in a nucleus','Single DNA loop (no nucleus)','Double helix in mitochondria','Wrapped around histones in cytoplasm'], a: 1, fb: 'Prokaryotes have a single circular DNA loop free in the cytoplasm (nucleoid region), not enclosed in a nucleus.' },
  { q: 'A typical animal cell is 20 µm. In standard form (metres) this is:', o: ['2 × 10⁻⁴ m','2 × 10⁻⁵ m','2 × 10⁻⁶ m','20 × 10⁻⁵ m'], a: 1, fb: '20 µm = 0.00002 m = 2 × 10⁻⁵ m. Remember: 1 µm = 10⁻⁶ m.' },
  { q: 'Which structures are found in ALL cells (both eukaryotic and prokaryotic)?', o: ['Nucleus, ribosomes, DNA','Cell membrane, cytoplasm, ribosomes','Mitochondria, cell wall, DNA','Chloroplasts, cell membrane, nucleus'], a: 1, fb: 'All cells share: cell membrane, cytoplasm, ribosomes, and genetic material (DNA).' },
  { q: 'A bacterium is 2 µm and an animal cell is 20 µm. How many orders of magnitude bigger is the animal cell?', o: ['1','2','3','10'], a: 0, fb: '20 ÷ 2 = 10 = 10¹ → 1 order of magnitude difference.' },
  { q: 'Which is the correct order from smallest to largest?', o: ['Virus → Bacterium → Animal cell','Bacterium → Virus → Animal cell','Animal cell → Bacterium → Virus','Virus → Animal cell → Bacterium'], a: 0, fb: 'Viruses (~100 nm) < Bacteria (~2 µm) < Animal cells (~20 µm).' },
  { q: 'What is 0.000007 m in standard form?', o: ['7 × 10⁻⁵ m','7 × 10⁻⁶ m','0.7 × 10⁻⁵ m','70 × 10⁻⁷ m'], a: 1, fb: '0.000007 = 7 × 10⁻⁶. Count 6 places to the right of the decimal.' },
  { q: 'Prokaryotic ribosomes are described as 70S while eukaryotic are 80S. This means prokaryotic ribosomes are:', o: ['Larger','The same size','Smaller','A different shape only'], a: 2, fb: '70S ribosomes are smaller than 80S. The S (Svedberg) unit relates to sedimentation rate, which correlates with size.' },
];

let score = 0, answered = 0;
const qCont = document.getElementById('quizContainer');

function buildQuiz() {
  score = 0; answered = 0;
  document.getElementById('quizScore').textContent = '0';
  document.getElementById('quizTotal').textContent = questions.length;
  qCont.innerHTML = '';
  // Shuffle
  const shuffled = questions.map((q,i) => ({...q, idx:i})).sort(() => Math.random()-0.5);
  shuffled.forEach((q, qi) => {
    const div = document.createElement('div'); div.className = 'quiz-q';
    const tag = q.q.includes('standard form') || q.q.includes('orders of magnitude') || q.q.includes('10') ? 'MS' : 'Bio';
    div.innerHTML = `<h4>Q${qi+1}. ${q.q} <span>[${tag}]</span></h4><div class="options" data-ans="${q.a}"></div><div class="quiz-fb"></div>`;
    const opts = div.querySelector('.options');
    q.o.forEach((o, oi) => {
      const btn = document.createElement('button'); btn.className = 'opt-btn'; btn.textContent = o;
      btn.addEventListener('click', () => {
        if (div.classList.contains('done')) return;
        div.classList.add('done');
        answered++;
        const fb = div.querySelector('.quiz-fb');
        if (oi === q.a) { btn.classList.add('correct'); score++; fb.style.background = '#10b98122'; fb.style.color = '#10b981'; fb.textContent = '✔ Correct! ' + q.fb; }
        else { btn.classList.add('wrong'); opts.children[q.a].classList.add('correct'); fb.style.background = '#ef444422'; fb.style.color = '#ef4444'; fb.textContent = '✘ ' + q.fb; }
        btn.classList.add('chosen');
        fb.style.display = 'block';
        document.getElementById('quizScore').textContent = score;
      });
      opts.appendChild(btn);
    });
    qCont.appendChild(div);
  });
}
function resetQuiz() { buildQuiz(); }
buildQuiz();

// ===== KEYWORDS =====
const keywords = [
  { term: 'Eukaryotic', short: 'A cell type with a membrane-bound nucleus.', detail: 'Includes animal, plant, and fungal cells. "Eu" = true, "karyon" = nucleus. Typically 10–100 µm.' },
  { term: 'Prokaryotic', short: 'A cell type WITHOUT a membrane-bound nucleus.', detail: 'Includes bacteria and archaea. "Pro" = before. DNA is free in the cytoplasm. Typically 0.2–5 µm.' },
  { term: 'Nucleus', short: 'Membrane-bound organelle containing DNA.', detail: 'Controls cell activity by regulating gene expression. Has nuclear pores for mRNA transport. Only in eukaryotes.' },
  { term: 'Cytoplasm', short: 'Jelly-like substance inside the cell membrane.', detail: 'Where most chemical reactions take place. Contains water, enzymes, salts, and organelles (in eukaryotes).' },
  { term: 'Cell Membrane', short: 'Thin barrier around all cells.', detail: 'Phospholipid bilayer. Controls movement of substances in/out by diffusion, osmosis, and active transport.' },
  { term: 'DNA', short: 'Deoxyribonucleic acid — carries genetic code.', detail: 'In eukaryotes: linear, in chromosomes, inside nucleus. In prokaryotes: single circular loop in cytoplasm.' },
  { term: 'Plasmid', short: 'Small extra ring of DNA in bacteria.', detail: 'Can replicate independently. Often carries genes for antibiotic resistance. Used in genetic engineering.' },
  { term: 'Ribosome', short: 'Site of protein synthesis.', detail: '80S in eukaryotes, 70S in prokaryotes. Reads mRNA to assemble amino acids into proteins.' },
  { term: 'Standard Form', short: 'Writing numbers as A × 10ⁿ (1 ≤ A < 10).', detail: 'Used for very large or very small numbers in science. E.g., 0.000002 m = 2 × 10⁻⁶ m.' },
  { term: 'Order of Magnitude', short: 'A factor of 10 difference between values.', detail: 'If X is 100× bigger than Y, that\'s 2 orders of magnitude (10²). Useful for comparing cell sizes.' },
];

const kwGrid = document.getElementById('kwGrid');
keywords.forEach(k => {
  const card = document.createElement('div'); card.className = 'kw-card';
  card.innerHTML = `<h4>${k.term}</h4><p>${k.short}</p><div class="reveal">${k.detail}</div><div class="hint">Click to reveal more</div>`;
  card.addEventListener('click', () => { card.classList.toggle('open'); card.querySelector('.hint').textContent = card.classList.contains('open') ? 'Click to hide' : 'Click to reveal more'; });
  kwGrid.appendChild(card);
});
</script>
</body>
</html>
