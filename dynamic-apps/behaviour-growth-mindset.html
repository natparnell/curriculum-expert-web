<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Growth Mindset Reframer</title>
<style>
  :root {
    --bg: #fdf8f3;
    --bg-card: #ffffff;
    --text: #2d2a26;
    --text-light: #6b6560;
    --fixed-red: #d94f3d;
    --fixed-bg: #fdecea;
    --fixed-border: #f5b7b1;
    --growth-green: #1a8a6e;
    --growth-bg: #e8f6f1;
    --growth-border: #a3dbc8;
    --accent: #e67e22;
    --accent-light: #fef3e6;
    --teal: #1a8a6e;
    --teal-light: #e0f4ed;
    --header-bg: #2d2a26;
    --header-text: #fdf8f3;
    --shadow: 0 2px 8px rgba(0,0,0,0.08);
    --shadow-hover: 0 4px 16px rgba(0,0,0,0.12);
    --radius: 10px;
    --radius-sm: 6px;
    --transition: 0.25s ease;
    --neuron-color: #1a8a6e;
    --synapse-color: #e67e22;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
  }

  header {
    position: sticky;
    top: 0;
    z-index: 100;
    background: var(--header-bg);
    color: var(--header-text);
    padding: 16px 24px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.15);
  }

  header h1 { font-size: 1.5rem; font-weight: 700; }
  header p { font-size: 0.85rem; opacity: 0.8; margin-top: 2px; }

  nav {
    display: flex;
    gap: 6px;
    margin-top: 10px;
    flex-wrap: wrap;
  }

  nav button {
    padding: 7px 16px;
    border: 2px solid rgba(255,255,255,0.25);
    border-radius: 20px;
    background: transparent;
    color: var(--header-text);
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    transition: var(--transition);
  }

  nav button:hover { background: rgba(255,255,255,0.1); }
  nav button.active {
    background: var(--teal);
    border-color: var(--teal);
    color: #fff;
  }

  main { max-width: 960px; margin: 0 auto; padding: 24px 16px 60px; }

  .section { display: none; }
  .section.active { display: block; }

  h2 {
    font-size: 1.35rem;
    margin-bottom: 6px;
    color: var(--text);
  }

  .section-intro {
    color: var(--text-light);
    margin-bottom: 20px;
    font-size: 0.95rem;
  }

  /* Learn Mode */
  .pair-grid { display: flex; flex-direction: column; gap: 14px; }

  .pair-card {
    display: grid;
    grid-template-columns: 1fr 40px 1fr;
    align-items: stretch;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition);
  }

  .pair-card:hover { box-shadow: var(--shadow-hover); transform: translateY(-1px); }

  .pair-fixed, .pair-growth {
    padding: 16px 18px;
    font-size: 0.95rem;
    display: flex;
    align-items: center;
  }

  .pair-fixed {
    background: var(--fixed-bg);
    border-left: 4px solid var(--fixed-red);
    color: var(--fixed-red);
    font-weight: 600;
  }

  .pair-growth {
    background: var(--growth-bg);
    border-right: 4px solid var(--growth-green);
    color: var(--growth-green);
    font-weight: 600;
  }

  .pair-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.3rem;
    color: var(--text-light);
    background: var(--bg-card);
  }

  .pair-explanation {
    display: none;
    grid-column: 1 / -1;
    padding: 14px 18px;
    background: var(--accent-light);
    border-top: 1px solid #f0dcc4;
    font-size: 0.88rem;
    color: var(--text);
    line-height: 1.7;
  }

  .pair-card.expanded .pair-explanation { display: block; }

  .pair-explanation strong { color: var(--accent); }

  /* Practice Mode */
  .practice-container {
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 28px;
  }

  .practice-progress {
    display: flex;
    gap: 6px;
    margin-bottom: 20px;
  }

  .progress-dot {
    width: 28px;
    height: 6px;
    border-radius: 3px;
    background: #e0dbd6;
    transition: var(--transition);
  }

  .progress-dot.done { background: var(--growth-green); }
  .progress-dot.current { background: var(--accent); }

  .practice-prompt {
    background: var(--fixed-bg);
    border-left: 4px solid var(--fixed-red);
    padding: 18px 20px;
    border-radius: var(--radius-sm);
    margin-bottom: 18px;
  }

  .practice-prompt .label {
    font-size: 0.75rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--fixed-red);
    font-weight: 700;
    margin-bottom: 4px;
  }

  .practice-prompt .statement { font-size: 1.15rem; font-weight: 600; color: var(--text); }

  .practice-input-area { margin-bottom: 16px; }

  .practice-input-area label {
    display: block;
    font-size: 0.85rem;
    font-weight: 600;
    margin-bottom: 6px;
    color: var(--teal);
  }

  .practice-input-area textarea {
    width: 100%;
    padding: 12px 14px;
    border: 2px solid #ddd;
    border-radius: var(--radius-sm);
    font-size: 1rem;
    font-family: inherit;
    resize: vertical;
    min-height: 60px;
    transition: var(--transition);
  }

  .practice-input-area textarea:focus {
    outline: none;
    border-color: var(--teal);
    box-shadow: 0 0 0 3px var(--teal-light);
  }

  .btn {
    display: inline-block;
    padding: 10px 22px;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;
    transition: var(--transition);
  }

  .btn-primary { background: var(--teal); color: #fff; }
  .btn-primary:hover { background: #157a60; }
  .btn-primary:disabled { background: #b0c9c0; cursor: not-allowed; }
  .btn-secondary { background: var(--accent); color: #fff; }
  .btn-secondary:hover { background: #cf6e17; }

  .comparison-box {
    display: none;
    margin-top: 18px;
    gap: 14px;
  }

  .comparison-box.visible { display: grid; grid-template-columns: 1fr 1fr; gap: 14px; }

  .comparison-yours, .comparison-suggested {
    padding: 14px 16px;
    border-radius: var(--radius-sm);
    font-size: 0.92rem;
  }

  .comparison-yours {
    background: #f0f4ff;
    border: 2px solid #b3c7f7;
  }

  .comparison-suggested {
    background: var(--growth-bg);
    border: 2px solid var(--growth-border);
  }

  .comparison-yours .label, .comparison-suggested .label {
    font-size: 0.72rem;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    font-weight: 700;
    margin-bottom: 4px;
  }

  .comparison-yours .label { color: #4a6fbd; }
  .comparison-suggested .label { color: var(--growth-green); }

  .score-display {
    display: none;
    margin-top: 14px;
    padding: 14px 18px;
    border-radius: var(--radius-sm);
    background: var(--accent-light);
    border: 1px solid #f0dcc4;
  }

  .score-display.visible { display: block; }

  .score-bar {
    height: 10px;
    background: #e0dbd6;
    border-radius: 5px;
    margin: 8px 0;
    overflow: hidden;
  }

  .score-fill {
    height: 100%;
    border-radius: 5px;
    background: var(--growth-green);
    transition: width 0.5s ease;
  }

  .keyword-highlight-fixed {
    background: var(--fixed-bg);
    color: var(--fixed-red);
    padding: 1px 4px;
    border-radius: 3px;
    font-weight: 600;
  }

  .keyword-highlight-growth {
    background: var(--growth-bg);
    color: var(--growth-green);
    padding: 1px 4px;
    border-radius: 3px;
    font-weight: 600;
  }

  .practice-actions { display: flex; gap: 10px; flex-wrap: wrap; }

  .practice-summary {
    text-align: center;
    padding: 30px;
  }

  .practice-summary h3 { font-size: 1.3rem; margin-bottom: 10px; color: var(--teal); }

  .final-score-circle {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: var(--growth-bg);
    border: 4px solid var(--growth-green);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    margin: 16px auto;
  }

  .final-score-circle .num { font-size: 2rem; font-weight: 700; color: var(--growth-green); }
  .final-score-circle .of { font-size: 0.8rem; color: var(--text-light); }

  /* Quiz */
  .quiz-question {
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 18px 20px;
    margin-bottom: 12px;
  }

  .quiz-question p { font-size: 0.95rem; margin-bottom: 10px; font-weight: 500; }

  .quiz-scale {
    display: flex;
    gap: 0;
    justify-content: center;
  }

  .quiz-scale label {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 6px 10px;
    cursor: pointer;
    font-size: 0.72rem;
    color: var(--text-light);
    transition: var(--transition);
  }

  .quiz-scale input[type="radio"] { display: none; }

  .quiz-scale .radio-dot {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    border: 2px solid #ccc;
    margin-bottom: 4px;
    transition: var(--transition);
  }

  .quiz-scale label:hover .radio-dot { border-color: var(--teal); }
  .quiz-scale input:checked + .radio-dot {
    background: var(--teal);
    border-color: var(--teal);
  }

  .quiz-result {
    display: none;
    text-align: center;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 28px;
    margin-top: 20px;
  }

  .quiz-result.visible { display: block; }

  .spectrum-bar {
    height: 18px;
    border-radius: 9px;
    background: linear-gradient(to right, var(--fixed-red), var(--accent), var(--growth-green));
    position: relative;
    margin: 20px 0 8px;
  }

  .spectrum-marker {
    position: absolute;
    top: -6px;
    width: 30px;
    height: 30px;
    border-radius: 50%;
    background: #fff;
    border: 3px solid var(--text);
    transform: translateX(-50%);
    transition: left 0.6s ease;
  }

  .spectrum-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.78rem;
    color: var(--text-light);
  }

  /* Brain Science */
  .brain-section { text-align: center; }

  #neuronCanvas {
    display: block;
    margin: 16px auto;
    border-radius: var(--radius);
    background: #1a1a2e;
    max-width: 100%;
  }

  .canvas-controls {
    display: flex;
    gap: 10px;
    justify-content: center;
    margin-top: 12px;
  }

  .brain-text {
    text-align: left;
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 22px;
    margin-top: 20px;
    font-size: 0.92rem;
    line-height: 1.75;
  }

  .brain-text h3 {
    color: var(--teal);
    margin-bottom: 8px;
    font-size: 1.05rem;
  }

  .brain-text p { margin-bottom: 12px; }

  /* Info Panel */
  .info-cards { display: flex; flex-direction: column; gap: 14px; }

  .info-card {
    background: var(--bg-card);
    border-radius: var(--radius);
    box-shadow: var(--shadow);
    padding: 20px 22px;
  }

  .info-card h3 {
    font-size: 1.05rem;
    color: var(--teal);
    margin-bottom: 8px;
  }

  .info-card p, .info-card li {
    font-size: 0.9rem;
    line-height: 1.7;
    color: var(--text);
  }

  .info-card ul { padding-left: 18px; margin-top: 6px; }
  .info-card li { margin-bottom: 4px; }

  .yet-example {
    display: inline-block;
    background: var(--growth-bg);
    color: var(--growth-green);
    padding: 2px 10px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 0.95rem;
  }

  /* Responsive */
  @media (max-width: 640px) {
    header h1 { font-size: 1.2rem; }
    main { padding: 16px 10px 40px; }
    .pair-card { grid-template-columns: 1fr; }
    .pair-arrow { display: none; }
    .pair-growth { border-left: 4px solid var(--growth-green); border-right: none; }
    .comparison-box.visible { grid-template-columns: 1fr; }
    .quiz-scale label { padding: 4px 6px; }
    .quiz-scale .radio-dot { width: 24px; height: 24px; }
    nav button { padding: 6px 12px; font-size: 0.8rem; }
  }
</style>
</head>
<body>

<header>
  <h1>Growth Mindset Reframer</h1>
  <p>Transform fixed mindset statements into growth mindset alternatives</p>
  <nav>
    <button class="active" onclick="showSection('learn')">Learn</button>
    <button onclick="showSection('practice')">Practice</button>
    <button onclick="showSection('quiz')">Mindset Quiz</button>
    <button onclick="showSection('brain')">Brain Science</button>
    <button onclick="showSection('info')">Research</button>
  </nav>
</header>

<main>
  <!-- LEARN MODE -->
  <div id="section-learn" class="section active">
    <h2>Fixed vs Growth Mindset</h2>
    <p class="section-intro">Click any pair to learn the neuroscience behind the reframe.</p>
    <div class="pair-grid" id="learnGrid"></div>
  </div>

  <!-- PRACTICE MODE -->
  <div id="section-practice" class="section">
    <h2>Practice Reframing</h2>
    <p class="section-intro">Read each fixed mindset statement and write your own growth mindset reframe.</p>
    <div class="practice-container" id="practiceContainer"></div>
  </div>

  <!-- QUIZ -->
  <div id="section-quiz" class="section">
    <h2>Mindset Self-Assessment</h2>
    <p class="section-intro">Rate how much you agree with each statement to see where you fall on the mindset spectrum.</p>
    <div id="quizContainer"></div>
    <div style="text-align:center;margin-top:16px;">
      <button class="btn btn-primary" id="quizSubmitBtn" onclick="submitQuiz()">See My Results</button>
    </div>
    <div class="quiz-result" id="quizResult"></div>
  </div>

  <!-- BRAIN SCIENCE -->
  <div id="section-brain" class="section">
    <div class="brain-section">
      <h2>Your Brain on Growth Mindset</h2>
      <p class="section-intro">Watch how neural connections strengthen with practice. Click "Practice" to see neurons fire and build stronger pathways.</p>
      <canvas id="neuronCanvas" width="700" height="400"></canvas>
      <div class="canvas-controls">
        <button class="btn btn-primary" onclick="fireSynapse()">Practice!</button>
        <button class="btn btn-secondary" onclick="resetBrain()">Reset</button>
      </div>
    </div>
    <div class="brain-text">
      <h3>Neuroplasticity: Your Brain Can Change</h3>
      <p>Every time you learn something new, your brain forms new neural connections called synapses. When you practise a skill repeatedly, the connections between neurons grow stronger and faster. This is called neuroplasticity.</p>
      <h3>What Happens When You Struggle</h3>
      <p>When you find something difficult and keep trying, your brain is working hard to build new pathways. The feeling of difficulty is actually your brain growing. Mistakes activate the brain more than getting things right because they signal that new learning is needed.</p>
      <h3>Myelin: The Speed Booster</h3>
      <p>As you practise, a substance called myelin wraps around the neural pathways you use most. Myelin acts like insulation on a wire, making signals travel faster and more efficiently. This is why repetition turns slow, effortful tasks into quick, automatic ones.</p>
    </div>
  </div>

  <!-- INFO / RESEARCH -->
  <div id="section-info" class="section">
    <h2>The Research Behind Growth Mindset</h2>
    <p class="section-intro">Understanding the evidence base for mindset theory.</p>
    <div class="info-cards">
      <div class="info-card">
        <h3>Carol Dweck's Research</h3>
        <p>Professor Carol Dweck of Stanford University spent decades studying how beliefs about intelligence affect achievement. Her research, published in her book "Mindset" (2006), found that people generally hold one of two core beliefs about their abilities:</p>
        <ul>
          <li><strong style="color:var(--fixed-red)">Fixed mindset:</strong> Intelligence and talent are innate, static traits. You either have ability or you don't.</li>
          <li><strong style="color:var(--growth-green)">Growth mindset:</strong> Abilities can be developed through dedication, effort, and effective strategies.</li>
        </ul>
        <p>Dweck's studies showed that students who believed intelligence could be developed outperformed those who believed it was fixed, even when starting at the same level.</p>
      </div>
      <div class="info-card">
        <h3>Fixed vs Growth Mindset</h3>
        <p>The two mindsets create entirely different relationships with effort, challenges, and failure:</p>
        <ul>
          <li><strong>Challenges:</strong> Fixed mindset avoids them (fear of looking stupid). Growth mindset embraces them (opportunities to improve).</li>
          <li><strong>Effort:</strong> Fixed mindset sees it as pointless ("if I were smart, it'd be easy"). Growth mindset sees it as the path to mastery.</li>
          <li><strong>Mistakes:</strong> Fixed mindset treats them as evidence of lack of ability. Growth mindset treats them as essential information for learning.</li>
          <li><strong>Feedback:</strong> Fixed mindset ignores constructive criticism. Growth mindset actively seeks it out.</li>
          <li><strong>Others' success:</strong> Fixed mindset feels threatened. Growth mindset finds inspiration and lessons.</li>
        </ul>
      </div>
      <div class="info-card">
        <h3>The Power of <span class="yet-example">Yet</span></h3>
        <p>One of the simplest and most powerful tools in growth mindset is the word "yet". Adding it to a statement of inability transforms it from a verdict into a journey:</p>
        <ul>
          <li>"I don't understand fractions" becomes "I don't understand fractions <strong>yet</strong>"</li>
          <li>"I can't ride a bike" becomes "I can't ride a bike <strong>yet</strong>"</li>
          <li>"I'm not a good writer" becomes "I'm not a good writer <strong>yet</strong>"</li>
        </ul>
        <p>"Yet" acknowledges the current state while keeping the door open for future growth. It shifts the brain from threat mode (amygdala) to learning mode (prefrontal cortex).</p>
      </div>
      <div class="info-card">
        <h3>How Praise Affects Mindset</h3>
        <p>Dweck's studies on praise revealed a critical distinction. In one study, children who completed a puzzle were given one of two types of praise:</p>
        <ul>
          <li><strong style="color:var(--fixed-red)">Person praise:</strong> "You're so smart!" (praises innate ability)</li>
          <li><strong style="color:var(--growth-green)">Process praise:</strong> "You worked really hard on that!" (praises effort and strategy)</li>
        </ul>
        <p>When later offered a choice between an easy task and a challenging one, 67% of the "smart" group chose the easy task (to protect their "smart" label), while 92% of the "effort" group chose the challenge.</p>
        <p>The lesson: praise the process (effort, strategy, persistence, improvement) rather than the person (smart, talented, gifted). Process praise builds resilience; person praise builds fragility.</p>
      </div>
    </div>
  </div>
</main>

<script>
  /* ---- DATA ---- */
  const reframePairs = [
    { fixed: "I can't do this", growth: "I can't do this yet", explanation: "Adding 'yet' activates your prefrontal cortex, the part of the brain responsible for planning and problem-solving. It reframes inability as a temporary state, which keeps your brain in learning mode rather than shutting down in defeat." },
    { fixed: "I'm not good at maths", growth: "I'm still learning maths strategies", explanation: "Maths ability is not a fixed trait. Research shows the brain's number-processing regions (the intraparietal sulcus) grow denser neural connections with practice. Focusing on strategies rather than ability reminds your brain that skills are built, not born." },
    { fixed: "This is too hard", growth: "This will take time and effort", explanation: "When something feels hard, your brain is forming new synaptic connections. The feeling of difficulty is literally the sensation of your neurons building new pathways. Reframing 'hard' as 'time and effort' keeps you engaged in the productive struggle." },
    { fixed: "I made a mistake", growth: "Mistakes help me learn", explanation: "Brain scan studies show that the brain is more active when processing a mistake than when getting something right. Errors trigger the anterior cingulate cortex, which signals the brain to pay closer attention and adjust its approach. Mistakes are essential learning signals." },
    { fixed: "She's smarter than me", growth: "I can learn from her approach", explanation: "Mirror neurons in your brain fire both when you perform an action and when you watch someone else perform it. Observing others' strategies literally activates the same learning pathways as doing it yourself. Seeing others succeed is a learning opportunity, not a threat." },
    { fixed: "I'll never understand this", growth: "I need to try a different strategy", explanation: "When one neural pathway isn't working, your brain can build alternative routes. Switching strategies activates different brain regions and creates new connections. The brain has many paths to understanding; persistence and flexibility help you find them." },
    { fixed: "I'm just not a creative person", growth: "Creativity is a skill I can develop", explanation: "Neuroscience has shown that creativity involves connections between multiple brain regions, and these connections strengthen with practice. Divergent thinking exercises have been shown to increase creative output in as little as two weeks of regular practice." },
    { fixed: "I give up", growth: "I'll try a different approach", explanation: "When you feel like giving up, stress hormones (cortisol) flood the brain and impair the prefrontal cortex. Taking a step back and choosing a new approach lets your brain regulate those hormones and re-engage its problem-solving systems." },
    { fixed: "I'm either good at it or I'm not", growth: "I can improve with practice", explanation: "Brain imaging studies show measurable changes in brain structure after sustained practice. London taxi drivers, for example, develop larger hippocampi (the memory region) through years of navigating complex routes. Your brain physically reshapes itself through effort." },
    { fixed: "This is good enough", growth: "How can I improve this further?", explanation: "The brain's reward system releases dopamine not just when you succeed, but when you make progress toward a goal. Seeking improvement keeps this motivational circuit active, driving further learning and engagement." },
    { fixed: "I'm terrible at writing", growth: "My writing improves every time I practise", explanation: "Writing activates Broca's area and Wernicke's area alongside motor and visual regions. Each time you write, these areas coordinate more efficiently. Studies show that regular writing practice measurably improves fluency, structure, and expression within weeks." },
    { fixed: "Feedback means I failed", growth: "Feedback shows me how to improve", explanation: "Constructive feedback activates the brain's error-monitoring system (the anterior cingulate cortex) without triggering the full threat response. When framed as guidance rather than judgement, feedback becomes fuel for the brain's learning mechanisms." },
    { fixed: "I'll never be as good as them", growth: "Their success shows me what's possible", explanation: "Seeing someone similar to you succeed activates both the brain's motivational circuits and its mirror neuron system. Their achievement becomes a mental model your brain can study and replicate through its own practice." },
    { fixed: "If I have to try hard, I must be bad at it", growth: "Effort is how I build my abilities", explanation: "Neuroscience has debunked the myth that talent means effortlessness. Brain scans of experts show intense activity even during peak performance. Myelin, the substance that speeds neural signals, is built exclusively through effortful practice, not through ease." },
    { fixed: "There's no point in trying", growth: "Every attempt teaches me something new", explanation: "Each attempt, successful or not, strengthens neural pathways. The basal ganglia, which govern habit formation, record every repetition. Even 'failed' attempts encode learning that makes the next attempt slightly better." }
  ];

  const practiceStatements = [
    { fixed: "I can't solve this problem", growth: "I haven't found the right approach yet", keywords: ["yet", "approach", "strategy", "try", "learn", "different", "way", "keep"] },
    { fixed: "Reading is boring", growth: "I haven't found the right book yet", keywords: ["yet", "find", "right", "enjoy", "try", "different", "discover", "explore"] },
    { fixed: "I always fail at tests", growth: "Each test shows me what I need to study more", keywords: ["shows", "learn", "study", "improve", "practice", "next", "better", "preparation"] },
    { fixed: "I'm not a science person", growth: "I'm building my science skills step by step", keywords: ["building", "learning", "developing", "growing", "step", "practice", "skills", "yet"] },
    { fixed: "It's too confusing", growth: "I need to break this into smaller steps", keywords: ["break", "smaller", "steps", "parts", "one", "time", "understand", "piece"] },
    { fixed: "I'll never be good at sport", growth: "My fitness and skills improve with training", keywords: ["improve", "training", "practice", "better", "grow", "develop", "effort", "yet"] },
    { fixed: "Everyone else gets it but me", growth: "I learn at my own pace and that's okay", keywords: ["pace", "own", "time", "okay", "ask", "help", "different", "understand"] },
    { fixed: "My teacher doesn't like me", growth: "I can build a better relationship with my teacher", keywords: ["build", "better", "relationship", "talk", "communicate", "work", "try", "improve"] },
    { fixed: "I can't draw", growth: "Drawing is a skill I can practise and develop", keywords: ["skill", "practise", "practice", "develop", "learn", "improve", "yet", "grow"] },
    { fixed: "I'm going to get it wrong", growth: "Getting it wrong is part of the learning process", keywords: ["learning", "process", "part", "grow", "improve", "try", "helps", "okay"] }
  ];

  const quizQuestions = [
    { text: "Your intelligence is something that you can't change very much.", direction: "fixed" },
    { text: "You can always substantially change how intelligent you are.", direction: "growth" },
    { text: "No matter how much intelligence you have, you can always change it quite a bit.", direction: "growth" },
    { text: "You can learn new things, but you can't really change your basic intelligence.", direction: "fixed" },
    { text: "Truly smart people do not need to try hard.", direction: "fixed" },
    { text: "When something is difficult, it means I am learning.", direction: "growth" },
    { text: "If I have to work hard at something, I'm probably not good at it.", direction: "fixed" },
    { text: "Challenges help me to grow and improve.", direction: "growth" },
    { text: "People are either naturally talented at something or they are not.", direction: "fixed" },
    { text: "With enough effort and good strategies, most people can get significantly better at almost anything.", direction: "growth" }
  ];

  /* ---- STATE ---- */
  let practiceIndex = 0;
  let practiceScores = [];
  let practiceComplete = false;
  let neurons = [];
  let synapses = [];
  let practiceLevel = 0;
  let animationId = null;
  let particles = [];

  /* ---- NAVIGATION ---- */
  function showSection(id) {
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    document.getElementById('section-' + id).classList.add('active');
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
    if (id === 'brain') startBrainAnimation();
  }

  /* ---- LEARN MODE ---- */
  function buildLearnGrid() {
    const grid = document.getElementById('learnGrid');
    grid.innerHTML = reframePairs.map((p, i) => `
      <div class="pair-card" onclick="this.classList.toggle('expanded')">
        <div class="pair-fixed">${p.fixed}</div>
        <div class="pair-arrow">&#10140;</div>
        <div class="pair-growth">${p.growth}</div>
        <div class="pair-explanation"><strong>Neuroscience:</strong> ${p.explanation}</div>
      </div>
    `).join('');
  }

  /* ---- PRACTICE MODE ---- */
  function buildPractice() {
    practiceIndex = 0;
    practiceScores = [];
    practiceComplete = false;
    renderPracticeQuestion();
  }

  function renderPracticeQuestion() {
    const container = document.getElementById('practiceContainer');
    if (practiceComplete) {
      const total = practiceScores.reduce((a, b) => a + b, 0);
      const max = practiceScores.length * 5;
      const pct = Math.round((total / max) * 100);
      container.innerHTML = `
        <div class="practice-summary">
          <h3>Practice Complete!</h3>
          <div class="final-score-circle">
            <span class="num">${total}</span>
            <span class="of">out of ${max}</span>
          </div>
          <p style="margin:12px 0;color:var(--text-light)">${getFinalMessage(pct)}</p>
          <button class="btn btn-primary" onclick="buildPractice()">Try Again</button>
        </div>`;
      return;
    }

    const stmt = practiceStatements[practiceIndex];
    container.innerHTML = `
      <div class="practice-progress">${practiceStatements.map((_, i) =>
        `<div class="progress-dot ${i < practiceIndex ? 'done' : ''} ${i === practiceIndex ? 'current' : ''}"></div>`
      ).join('')}</div>
      <div class="practice-prompt">
        <div class="label">Fixed Mindset Statement (${practiceIndex + 1} of ${practiceStatements.length})</div>
        <div class="statement">"${stmt.fixed}"</div>
      </div>
      <div class="practice-input-area">
        <label>Write your growth mindset reframe:</label>
        <textarea id="practiceInput" placeholder="Type your growth mindset version here..."></textarea>
      </div>
      <div class="practice-actions">
        <button class="btn btn-primary" id="compareBtn" onclick="comparePractice()">Compare</button>
        <button class="btn btn-secondary" id="nextBtn" style="display:none" onclick="nextPractice()">Next</button>
      </div>
      <div class="comparison-box" id="comparisonBox"></div>
      <div class="score-display" id="scoreDisplay"></div>`;
  }

  function comparePractice() {
    const input = document.getElementById('practiceInput').value.trim();
    if (!input) return;

    const stmt = practiceStatements[practiceIndex];
    const score = scorePractice(input, stmt.keywords);
    practiceScores.push(score);

    const highlighted = highlightKeywords(input, stmt.keywords);

    const box = document.getElementById('comparisonBox');
    box.classList.add('visible');
    box.innerHTML = `
      <div class="comparison-yours">
        <div class="label">Your Reframe</div>
        <div>${highlighted}</div>
      </div>
      <div class="comparison-suggested">
        <div class="label">Suggested Reframe</div>
        <div>"${stmt.growth}"</div>
      </div>`;

    const scoreBox = document.getElementById('scoreDisplay');
    scoreBox.classList.add('visible');
    scoreBox.innerHTML = `
      <strong>Score: ${score}/5</strong> ${getScoreComment(score)}
      <div class="score-bar"><div class="score-fill" style="width:${score * 20}%"></div></div>
      <div style="font-size:0.82rem;color:var(--text-light);margin-top:6px;">
        Growth mindset keywords to look for: ${stmt.keywords.map(k =>
          `<span class="keyword-highlight-growth">${k}</span>`
        ).join(' ')}
      </div>`;

    document.getElementById('compareBtn').style.display = 'none';
    document.getElementById('nextBtn').style.display = 'inline-block';
  }

  function scorePractice(input, keywords) {
    const lower = input.toLowerCase();
    const fixedWords = ["can't", "never", "not", "don't", "won't", "impossible", "stupid", "dumb", "bad at", "give up", "no point"];
    let score = 1; // base score for attempting

    let hits = 0;
    keywords.forEach(k => { if (lower.includes(k)) hits++; });
    if (hits >= 4) score += 2;
    else if (hits >= 2) score += 1;

    const hasPositive = /improv|learn|grow|develop|practic|strateg|effort|yet|step|build|try|better|progress|can/.test(lower);
    if (hasPositive) score += 1;

    const hasFixed = fixedWords.some(w => lower.includes(w));
    if (!hasFixed) score += 1;

    return Math.min(score, 5);
  }

  function highlightKeywords(text, keywords) {
    let result = text;
    const fixedWords = ["can't", "never", "not good", "won't", "impossible", "stupid", "give up"];
    fixedWords.forEach(w => {
      const re = new RegExp(`\\b${w}\\b`, 'gi');
      result = result.replace(re, `<span class="keyword-highlight-fixed">$&</span>`);
    });
    keywords.forEach(w => {
      const re = new RegExp(`\\b${w}\\b`, 'gi');
      result = result.replace(re, `<span class="keyword-highlight-growth">$&</span>`);
    });
    return result;
  }

  function getScoreComment(s) {
    if (s >= 5) return "Excellent reframe! You really captured the growth mindset.";
    if (s >= 4) return "Great job! A strong growth-oriented response.";
    if (s >= 3) return "Good attempt. Try adding more growth-focused language.";
    if (s >= 2) return "A start, but try emphasising effort, learning, or 'yet'.";
    return "Keep practising! Focus on effort, strategies, and possibility.";
  }

  function getFinalMessage(pct) {
    if (pct >= 85) return "Outstanding! You are a natural reframer. Keep spreading the growth mindset.";
    if (pct >= 65) return "Great work! You are developing a strong ability to reframe thoughts.";
    if (pct >= 45) return "Good progress. With more practice, your reframing skills will keep growing.";
    return "This is a skill that develops with practice. Try again and notice how you improve!";
  }

  function nextPractice() {
    practiceIndex++;
    if (practiceIndex >= practiceStatements.length) practiceComplete = true;
    renderPracticeQuestion();
  }

  /* ---- QUIZ ---- */
  function buildQuiz() {
    const container = document.getElementById('quizContainer');
    container.innerHTML = quizQuestions.map((q, i) => `
      <div class="quiz-question">
        <p>${i + 1}. ${q.text}</p>
        <div class="quiz-scale">
          ${['Strongly Disagree', 'Disagree', 'Neutral', 'Agree', 'Strongly Agree'].map((label, v) => `
            <label>
              <input type="radio" name="q${i}" value="${v + 1}">
              <span class="radio-dot"></span>
              ${label}
            </label>
          `).join('')}
        </div>
      </div>
    `).join('');
  }

  function submitQuiz() {
    let total = 0;
    let answered = 0;

    quizQuestions.forEach((q, i) => {
      const selected = document.querySelector(`input[name="q${i}"]:checked`);
      if (selected) {
        answered++;
        let val = parseInt(selected.value);
        // For fixed-direction questions, reverse the score
        if (q.direction === 'fixed') val = 6 - val;
        total += val;
      }
    });

    if (answered < quizQuestions.length) {
      alert('Please answer all ' + quizQuestions.length + ' questions before seeing your results.');
      return;
    }

    // Score ranges from 10 (fully fixed) to 50 (fully growth)
    const pct = ((total - 10) / 40) * 100;
    const resultDiv = document.getElementById('quizResult');
    resultDiv.classList.add('visible');
    resultDiv.innerHTML = `
      <h3 style="color:var(--teal);margin-bottom:6px;">${getQuizLabel(pct)}</h3>
      <p style="color:var(--text-light);font-size:0.9rem;margin-bottom:8px;">Your mindset score: ${total}/50</p>
      <div class="spectrum-bar">
        <div class="spectrum-marker" style="left:${pct}%"></div>
      </div>
      <div class="spectrum-labels">
        <span>Fixed Mindset</span>
        <span>Mixed</span>
        <span>Growth Mindset</span>
      </div>
      <p style="margin-top:18px;font-size:0.88rem;line-height:1.7;text-align:left;">${getQuizFeedback(pct)}</p>`;
    resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
  }

  function getQuizLabel(pct) {
    if (pct >= 80) return "Strong Growth Mindset";
    if (pct >= 60) return "Growth-Leaning Mindset";
    if (pct >= 40) return "Mixed Mindset";
    if (pct >= 20) return "Fixed-Leaning Mindset";
    return "Strong Fixed Mindset";
  }

  function getQuizFeedback(pct) {
    if (pct >= 80) return "You strongly believe that abilities can be developed. You likely embrace challenges, persist through difficulties, and see effort as a path to mastery. Keep it up, and remember that even a growth mindset can keep growing!";
    if (pct >= 60) return "You lean towards a growth mindset but may have some areas where fixed thinking creeps in. This is completely normal. Pay attention to situations where you feel threatened by challenge or comparison, as these are opportunities to practise reframing.";
    if (pct >= 40) return "You show a mix of both mindsets, which is very common. Most people hold different beliefs in different areas. You might have a growth mindset about social skills but a fixed mindset about maths, for example. The good news is that awareness is the first step to shifting towards growth.";
    if (pct >= 20) return "You may tend towards a fixed mindset in many areas. This does not mean you are stuck. Mindset itself is not fixed! Start by noticing when you use fixed language ('I can't', 'I'm not') and practise adding 'yet'. Small shifts in self-talk can lead to big changes in how you approach learning.";
    return "Your responses suggest a predominantly fixed mindset. Remember: the belief that mindset can change is itself a growth mindset belief. Start with one small area where you are willing to see effort as a path to improvement, and build from there.";
  }

  /* ---- BRAIN SCIENCE CANVAS ---- */
  function initBrain() {
    const canvas = document.getElementById('neuronCanvas');
    const w = canvas.width, h = canvas.height;
    neurons = [];
    synapses = [];
    particles = [];
    practiceLevel = 0;

    // Place neurons in a network pattern
    const positions = [
      [120, 100], [250, 60], [400, 80], [550, 110], [600, 250],
      [520, 340], [350, 350], [180, 320], [80, 220], [300, 200],
      [450, 210], [160, 200], [400, 300], [250, 260], [540, 180]
    ];

    positions.forEach(([x, y], i) => {
      neurons.push({ x, y, r: 14, activity: 0, connections: [] });
    });

    // Define potential synapses
    const pairs = [
      [0,1],[1,2],[2,3],[3,4],[4,5],[5,6],[6,7],[7,8],[8,0],
      [9,10],[9,13],[10,4],[11,0],[11,9],[12,6],[12,10],[13,7],[13,9],
      [1,9],[2,10],[3,10],[5,12],[6,13],[8,11],[14,3],[14,4],[14,10]
    ];

    pairs.forEach(([a, b]) => {
      synapses.push({ from: a, to: b, strength: 0, maxStrength: 0.3 + Math.random() * 0.7 });
      neurons[a].connections.push(b);
      neurons[b].connections.push(a);
    });
  }

  function startBrainAnimation() {
    if (animationId) return;
    if (neurons.length === 0) initBrain();
    animateBrain();
  }

  function animateBrain() {
    const canvas = document.getElementById('neuronCanvas');
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;

    ctx.fillStyle = '#1a1a2e';
    ctx.fillRect(0, 0, w, h);

    // Draw synapses
    synapses.forEach(s => {
      if (s.strength <= 0) return;
      const a = neurons[s.from], b = neurons[s.to];
      ctx.beginPath();
      ctx.moveTo(a.x, a.y);
      ctx.lineTo(b.x, b.y);
      ctx.strokeStyle = `rgba(230, 126, 34, ${s.strength * 0.7})`;
      ctx.lineWidth = 1 + s.strength * 4;
      ctx.stroke();
    });

    // Draw particles (travelling signals)
    particles = particles.filter(p => p.t <= 1);
    particles.forEach(p => {
      p.t += 0.02;
      const a = neurons[p.from], b = neurons[p.to];
      const x = a.x + (b.x - a.x) * p.t;
      const y = a.y + (b.y - a.y) * p.t;
      ctx.beginPath();
      ctx.arc(x, y, 3, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(46, 204, 113, ${1 - p.t})`;
      ctx.fill();

      if (p.t >= 0.95) {
        neurons[p.to].activity = Math.min(neurons[p.to].activity + 0.3, 1);
      }
    });

    // Draw neurons
    neurons.forEach(n => {
      n.activity *= 0.97;
      // Glow
      if (n.activity > 0.05) {
        const grad = ctx.createRadialGradient(n.x, n.y, n.r, n.x, n.y, n.r + 20 * n.activity);
        grad.addColorStop(0, `rgba(26, 138, 110, ${n.activity * 0.4})`);
        grad.addColorStop(1, 'rgba(26, 138, 110, 0)');
        ctx.beginPath();
        ctx.arc(n.x, n.y, n.r + 20 * n.activity, 0, Math.PI * 2);
        ctx.fillStyle = grad;
        ctx.fill();
      }
      // Body
      ctx.beginPath();
      ctx.arc(n.x, n.y, n.r, 0, Math.PI * 2);
      const brightness = 60 + n.activity * 120;
      ctx.fillStyle = `rgb(${brightness * 0.2}, ${brightness}, ${brightness * 0.8})`;
      ctx.fill();
      ctx.strokeStyle = `rgba(255,255,255,${0.15 + n.activity * 0.3})`;
      ctx.lineWidth = 1.5;
      ctx.stroke();
    });

    // Level text
    ctx.fillStyle = 'rgba(255,255,255,0.6)';
    ctx.font = '13px sans-serif';
    ctx.fillText(`Practice sessions: ${practiceLevel}`, 14, 24);
    const strengthPct = Math.round(avgStrength() * 100);
    ctx.fillText(`Connection strength: ${strengthPct}%`, 14, 44);

    animationId = requestAnimationFrame(animateBrain);
  }

  function avgStrength() {
    if (synapses.length === 0) return 0;
    return synapses.reduce((a, s) => a + s.strength, 0) / synapses.length;
  }

  function fireSynapse() {
    practiceLevel++;
    // Pick a random starting neuron
    const startIdx = Math.floor(Math.random() * neurons.length);
    propagate(startIdx, 3);

    // Strengthen used synapses
    synapses.forEach(s => {
      s.strength = Math.min(s.strength + 0.06, s.maxStrength);
    });
  }

  function propagate(idx, depth) {
    if (depth <= 0) return;
    neurons[idx].activity = 1;
    const conns = neurons[idx].connections;
    conns.forEach(c => {
      particles.push({ from: idx, to: c, t: 0 });
      setTimeout(() => propagate(c, depth - 1), 200 + Math.random() * 300);
    });
  }

  function resetBrain() {
    if (animationId) {
      cancelAnimationFrame(animationId);
      animationId = null;
    }
    initBrain();
    startBrainAnimation();
  }

  /* ---- INIT ---- */
  buildLearnGrid();
  buildPractice();
  buildQuiz();
  initBrain();
</script>
</body>
</html>
