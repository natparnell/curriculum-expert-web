<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Revolution vs Rebellion — Teacher's Tool</title>
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --rev: #1a5276;
    --rev-light: #d4e6f1;
    --reb: #922b21;
    --reb-light: #f2d7d5;
    --bg: #f5f6fa;
    --text: #2c3e50;
    --card-shadow: 0 4px 20px rgba(0,0,0,.1);
  }

  body {
    font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
  }

  /* ── Header ── */
  header {
    background: linear-gradient(135deg, var(--rev), var(--reb));
    color: #fff;
    text-align: center;
    padding: 2.5rem 1rem 2rem;
  }
  header h1 { font-size: 2.2rem; letter-spacing: .5px; }
  header p  { opacity: .85; margin-top: .4rem; font-size: 1.05rem; }

  /* ── Nav tabs ── */
  nav {
    display: flex;
    justify-content: center;
    gap: .5rem;
    padding: 1rem;
    flex-wrap: wrap;
    position: sticky;
    top: 0;
    background: var(--bg);
    z-index: 10;
    box-shadow: 0 2px 8px rgba(0,0,0,.06);
  }
  nav button {
    padding: .55rem 1.3rem;
    border: 2px solid #bbb;
    border-radius: 999px;
    background: #fff;
    font-size: .95rem;
    cursor: pointer;
    transition: .2s;
    font-weight: 500;
  }
  nav button:hover { border-color: var(--rev); color: var(--rev); }
  nav button.active {
    background: var(--rev);
    color: #fff;
    border-color: var(--rev);
  }

  /* ── Sections ── */
  .section { display: none; max-width: 1100px; margin: 0 auto; padding: 2rem 1rem 3rem; }
  .section.active { display: block; animation: fadeUp .35s ease; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  h2 { font-size: 1.6rem; margin-bottom: 1.2rem; text-align: center; }

  /* ── Compare cards ── */
  .compare {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
  }
  @media (max-width: 700px) { .compare { grid-template-columns: 1fr; } }

  .card {
    background: #fff;
    border-radius: 14px;
    padding: 1.8rem;
    box-shadow: var(--card-shadow);
    border-top: 5px solid;
    transition: transform .2s;
  }
  .card:hover { transform: translateY(-4px); }
  .card.rev { border-color: var(--rev); }
  .card.reb { border-color: var(--reb); }
  .card h3 { font-size: 1.35rem; margin-bottom: .8rem; }
  .card.rev h3 { color: var(--rev); }
  .card.reb h3 { color: var(--reb); }
  .card ul { padding-left: 1.2rem; }
  .card li { margin-bottom: .45rem; }
  .card .tag {
    display: inline-block;
    font-size: .75rem;
    font-weight: 700;
    text-transform: uppercase;
    padding: .15rem .55rem;
    border-radius: 4px;
    margin-bottom: .6rem;
  }
  .card.rev .tag { background: var(--rev-light); color: var(--rev); }
  .card.reb .tag { background: var(--reb-light); color: var(--reb); }

  /* ── Venn diagram ── */
  .venn-wrap { display: flex; justify-content: center; margin: 1.5rem 0; }
  .venn {
    position: relative;
    width: 580px;
    height: 320px;
  }
  @media (max-width: 640px) { .venn { transform: scale(.6); transform-origin: top center; } }
  .venn-circle {
    position: absolute;
    width: 300px;
    height: 300px;
    border-radius: 50%;
    top: 10px;
    display: flex;
    align-items: center;
    padding: 1.4rem;
    font-size: .85rem;
    line-height: 1.5;
    transition: opacity .3s;
    cursor: pointer;
  }
  .venn-circle:hover { opacity: .92; }
  .venn-circle.left  {
    left: 0;
    background: rgba(26,82,118,.22);
    border: 3px solid var(--rev);
    padding-right: 5rem;
    justify-content: flex-start;
    text-align: left;
  }
  .venn-circle.right {
    right: 0;
    background: rgba(146,43,33,.2);
    border: 3px solid var(--reb);
    padding-left: 5rem;
    justify-content: flex-end;
    text-align: right;
  }
  .venn-overlap {
    position: absolute;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    width: 140px;
    text-align: center;
    font-size: .82rem;
    font-weight: 600;
    line-height: 1.5;
    z-index: 2;
    pointer-events: none;
  }
  .venn-label {
    position: absolute;
    bottom: -8px;
    font-weight: 700;
    font-size: 1rem;
  }
  .venn-label.l { left: 70px; color: var(--rev); }
  .venn-label.r { right: 70px; color: var(--reb); }

  /* ── Timeline ── */
  .timeline {
    position: relative;
    padding: 1rem 0;
  }
  .timeline::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0; bottom: 0;
    width: 3px;
    background: #d5d8dc;
    transform: translateX(-50%);
  }
  @media (max-width: 700px) {
    .timeline::before { left: 20px; }
  }
  .tl-item {
    position: relative;
    width: 45%;
    padding: 1.2rem 1.5rem;
    background: #fff;
    border-radius: 12px;
    box-shadow: var(--card-shadow);
    margin-bottom: 1.5rem;
    cursor: pointer;
    transition: transform .2s, box-shadow .2s;
  }
  .tl-item:hover { transform: scale(1.02); box-shadow: 0 6px 28px rgba(0,0,0,.14); }
  .tl-item:nth-child(odd)  { margin-left: 55%; }
  .tl-item:nth-child(even) { margin-left: 0; }
  @media (max-width: 700px) {
    .tl-item, .tl-item:nth-child(odd), .tl-item:nth-child(even) {
      width: calc(100% - 50px);
      margin-left: 50px;
    }
  }
  .tl-item .dot {
    position: absolute;
    width: 16px; height: 16px;
    border-radius: 50%;
    top: 1.5rem;
    border: 3px solid;
  }
  .tl-item:nth-child(odd) .dot  { left: -32px; }
  .tl-item:nth-child(even) .dot { right: -32px; }
  @media (max-width: 700px) {
    .tl-item .dot, .tl-item:nth-child(odd) .dot, .tl-item:nth-child(even) .dot {
      left: -38px; right: auto;
    }
  }
  .tl-item.rev .dot { background: var(--rev-light); border-color: var(--rev); }
  .tl-item.reb .dot { background: var(--reb-light); border-color: var(--reb); }
  .tl-item h4 { margin-bottom: .3rem; }
  .tl-item.rev h4 { color: var(--rev); }
  .tl-item.reb h4 { color: var(--reb); }
  .tl-item .year { font-size: .8rem; font-weight: 700; opacity: .6; }
  .tl-item .detail {
    max-height: 0;
    overflow: hidden;
    transition: max-height .35s ease, margin .35s;
    font-size: .9rem;
    color: #555;
  }
  .tl-item.open .detail { max-height: 200px; margin-top: .6rem; }

  /* ── Spectrum slider ── */
  .spectrum-area { text-align: center; margin: 1rem 0 2rem; }
  .spectrum-bar {
    position: relative;
    height: 40px;
    border-radius: 20px;
    background: linear-gradient(90deg, var(--reb), #e67e22, #f1c40f, #2ecc71, var(--rev));
    max-width: 700px;
    margin: 1rem auto;
  }
  .spectrum-labels {
    display: flex;
    justify-content: space-between;
    max-width: 700px;
    margin: 0 auto;
    font-size: .85rem;
    font-weight: 600;
  }
  .spectrum-labels span:first-child { color: var(--reb); }
  .spectrum-labels span:last-child  { color: var(--rev); }

  .spectrum-pins {
    position: relative;
    max-width: 700px;
    height: 50px;
    margin: 0 auto;
  }
  .pin {
    position: absolute;
    transform: translateX(-50%);
    text-align: center;
    cursor: pointer;
    transition: .2s;
  }
  .pin:hover { transform: translateX(-50%) scale(1.12); }
  .pin .marker {
    width: 12px; height: 12px;
    border-radius: 50%;
    background: #fff;
    border: 3px solid var(--text);
    margin: 0 auto 2px;
  }
  .pin .pin-label { font-size: .68rem; font-weight: 600; white-space: nowrap; }
  .pin-tooltip {
    display: none;
    position: absolute;
    bottom: calc(100% + 14px);
    left: 50%;
    transform: translateX(-50%);
    background: #fff;
    padding: .8rem 1rem;
    border-radius: 10px;
    box-shadow: var(--card-shadow);
    width: 220px;
    font-size: .82rem;
    text-align: left;
    z-index: 5;
  }
  .pin.active .pin-tooltip { display: block; animation: fadeUp .25s ease; }

  /* ── Sort game ── */
  .sort-game { max-width: 750px; margin: 0 auto; }
  .sort-bank {
    display: flex;
    flex-wrap: wrap;
    gap: .6rem;
    justify-content: center;
    min-height: 56px;
    padding: 1rem;
    background: #eaecee;
    border-radius: 12px;
    margin-bottom: 1.5rem;
  }
  .chip {
    padding: .5rem 1rem;
    background: #fff;
    border: 2px solid #bbb;
    border-radius: 999px;
    font-size: .88rem;
    cursor: grab;
    user-select: none;
    transition: .15s;
    font-weight: 500;
  }
  .chip:active { cursor: grabbing; transform: scale(.95); }
  .chip.placed { opacity: .35; pointer-events: none; }

  .drop-zones { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
  @media (max-width: 600px) { .drop-zones { grid-template-columns: 1fr; } }
  .drop-zone {
    min-height: 180px;
    border: 3px dashed;
    border-radius: 14px;
    padding: 1rem;
    transition: background .2s;
  }
  .drop-zone.rev { border-color: var(--rev); }
  .drop-zone.reb { border-color: var(--reb); }
  .drop-zone.drag-over { background: rgba(0,0,0,.04); }
  .drop-zone h3 { text-align: center; margin-bottom: .8rem; font-size: 1.1rem; }
  .drop-zone.rev h3 { color: var(--rev); }
  .drop-zone.reb h3 { color: var(--reb); }
  .drop-zone .placed-chips { display: flex; flex-wrap: wrap; gap: .5rem; }

  .placed-chip {
    padding: .4rem .9rem;
    border-radius: 999px;
    font-size: .82rem;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: .4rem;
    animation: fadeUp .25s;
  }
  .placed-chip.correct { background: #d5f5e3; color: #1e8449; }
  .placed-chip.wrong   { background: #fadbd8; color: #922b21; text-decoration: line-through; }
  .placed-chip button {
    background: none; border: none; cursor: pointer;
    font-size: .9rem; opacity: .6; line-height: 1;
  }
  .placed-chip button:hover { opacity: 1; }

  .sort-score {
    text-align: center;
    margin-top: 1.2rem;
    font-size: 1.1rem;
    font-weight: 600;
  }
  .sort-btns { text-align: center; margin-top: 1rem; }
  .btn {
    padding: .6rem 1.6rem;
    border: none;
    border-radius: 999px;
    font-size: .95rem;
    cursor: pointer;
    font-weight: 600;
    transition: .2s;
  }
  .btn-primary { background: var(--rev); color: #fff; }
  .btn-primary:hover { background: #154360; }
  .btn-outline { background: #fff; border: 2px solid var(--rev); color: var(--rev); }
  .btn-outline:hover { background: var(--rev-light); }

  /* ── Quiz ── */
  .quiz-area { max-width: 650px; margin: 0 auto; }
  .quiz-card {
    background: #fff;
    border-radius: 14px;
    padding: 2rem;
    box-shadow: var(--card-shadow);
  }
  .quiz-progress {
    font-size: .85rem;
    font-weight: 600;
    opacity: .6;
    margin-bottom: .6rem;
  }
  .quiz-q { font-size: 1.15rem; font-weight: 600; margin-bottom: 1.2rem; }
  .quiz-opts button {
    display: block;
    width: 100%;
    text-align: left;
    padding: .85rem 1.2rem;
    margin-bottom: .6rem;
    border: 2px solid #d5d8dc;
    border-radius: 10px;
    background: #fff;
    font-size: .95rem;
    cursor: pointer;
    transition: .15s;
  }
  .quiz-opts button:hover:not(:disabled) { border-color: var(--rev); background: var(--rev-light); }
  .quiz-opts button.correct { border-color: #27ae60; background: #d5f5e3; }
  .quiz-opts button.wrong   { border-color: #c0392b; background: #fadbd8; }
  .quiz-opts button:disabled { cursor: default; }
  .quiz-explain {
    margin-top: 1rem;
    padding: 1rem;
    background: #fef9e7;
    border-left: 4px solid #f1c40f;
    border-radius: 6px;
    font-size: .9rem;
    display: none;
  }
  .quiz-explain.show { display: block; animation: fadeUp .3s; }
  .quiz-next { margin-top: 1.2rem; text-align: right; }
  .quiz-result { text-align: center; padding: 2rem; }
  .quiz-result h3 { font-size: 1.5rem; margin-bottom: .5rem; }

  footer {
    text-align: center;
    padding: 2rem 1rem;
    font-size: .82rem;
    opacity: .5;
  }
</style>
</head>
<body>

<header>
  <h1>Revolution vs Rebellion</h1>
  <p>An interactive teaching tool for understanding political upheaval</p>
</header>

<nav id="tabs">
  <button class="active" data-tab="compare">Compare</button>
  <button data-tab="venn">Venn Diagram</button>
  <button data-tab="timeline">Examples</button>
  <button data-tab="spectrum">Spectrum</button>
  <button data-tab="sort">Sort Game</button>
  <button data-tab="quiz">Quiz</button>
</nav>

<!-- ════════ COMPARE ════════ -->
<div class="section active" id="sec-compare">
  <h2>Side-by-Side Comparison</h2>
  <div class="compare">
    <div class="card rev">
      <span class="tag">Revolution</span>
      <h3>Revolution</h3>
      <ul>
        <li><strong>Goal:</strong> Fundamentally transform the entire political, social, or economic system</li>
        <li><strong>Scope:</strong> Broad — involves large segments of society</li>
        <li><strong>Outcome:</strong> A new system of government or social order replaces the old one</li>
        <li><strong>Ideology:</strong> Usually driven by a unifying vision for a new society</li>
        <li><strong>Duration:</strong> Can last years; involves sustained institutional change</li>
        <li><strong>Legitimacy:</strong> Often claims to represent "the people" or a national identity</li>
      </ul>
    </div>
    <div class="card reb">
      <span class="tag">Rebellion</span>
      <h3>Rebellion</h3>
      <ul>
        <li><strong>Goal:</strong> Resist, oppose, or overthrow specific authorities or policies</li>
        <li><strong>Scope:</strong> Narrower — may be regional, ethnic, or class-based</li>
        <li><strong>Outcome:</strong> May or may not succeed; doesn't always create a new system</li>
        <li><strong>Ideology:</strong> Often driven by grievances rather than a comprehensive new vision</li>
        <li><strong>Duration:</strong> Can be brief uprisings or prolonged guerrilla conflicts</li>
        <li><strong>Legitimacy:</strong> Often labeled "rebels" or "insurgents" by the ruling power</li>
      </ul>
    </div>
  </div>
  <div style="text-align:center; margin-top:1.8rem;">
    <p style="max-width:600px; margin:0 auto; font-size:.95rem; color:#666;">
      <strong>Key insight:</strong> A rebellion <em>can become</em> a revolution if it gains enough support and
      produces systemic change. The label often depends on who wins and who writes the history.
    </p>
  </div>
</div>

<!-- ════════ VENN ════════ -->
<div class="section" id="sec-venn">
  <h2>What They Share — and Where They Differ</h2>
  <div class="venn-wrap">
    <div class="venn">
      <div class="venn-circle left">
        <div>
          Systemic change<br>
          Broad coalition<br>
          New government<br>
          Ideological vision<br>
          Claims popular mandate
        </div>
      </div>
      <div class="venn-circle right">
        <div>
          Targeted resistance<br>
          Can be regional<br>
          May lack clear plan<br>
          Grievance-driven<br>
          Often labeled illegitimate
        </div>
      </div>
      <div class="venn-overlap">
        Defiance of authority<br>
        Risk of violence<br>
        Desire for change<br>
        Political motivation
      </div>
      <span class="venn-label l">Revolution</span>
      <span class="venn-label r">Rebellion</span>
    </div>
  </div>
</div>

<!-- ════════ TIMELINE ════════ -->
<div class="section" id="sec-timeline">
  <h2>Historical Examples — Click to Expand</h2>
  <div class="timeline" id="timeline"></div>
</div>

<!-- ════════ SPECTRUM ════════ -->
<div class="section" id="sec-spectrum">
  <h2>The Uprising Spectrum</h2>
  <p style="text-align:center; max-width:600px; margin:0 auto 1rem; color:#666; font-size:.92rem;">
    Not every conflict is purely a revolution or rebellion. Many fall on a spectrum.
    Click each pin to learn more.
  </p>
  <div class="spectrum-bar"></div>
  <div class="spectrum-labels"><span>Rebellion</span><span>Revolution</span></div>
  <div class="spectrum-pins" id="spectrumPins"></div>
</div>

<!-- ════════ SORT GAME ════════ -->
<div class="section" id="sec-sort">
  <h2>Sort the Characteristics</h2>
  <p style="text-align:center; margin-bottom:1rem; color:#666; font-size:.92rem;">
    Drag each trait to the correct category. Some may surprise you!
  </p>
  <div class="sort-game">
    <div class="sort-bank" id="sortBank"></div>
    <div class="drop-zones">
      <div class="drop-zone rev" id="dropRev" data-zone="revolution">
        <h3>Revolution</h3>
        <div class="placed-chips"></div>
      </div>
      <div class="drop-zone reb" id="dropReb" data-zone="rebellion">
        <h3>Rebellion</h3>
        <div class="placed-chips"></div>
      </div>
    </div>
    <div class="sort-score" id="sortScore"></div>
    <div class="sort-btns">
      <button class="btn btn-outline" onclick="resetSort()">Reset</button>
    </div>
  </div>
</div>

<!-- ════════ QUIZ ════════ -->
<div class="section" id="sec-quiz">
  <h2>Test Your Understanding</h2>
  <div class="quiz-area">
    <div class="quiz-card" id="quizCard"></div>
  </div>
</div>

<footer>Revolution vs Rebellion — Classroom Teaching Tool</footer>

<script>
/* ── Tab Navigation ── */
document.querySelectorAll('#tabs button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('#tabs button').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('sec-' + btn.dataset.tab).classList.add('active');
  });
});

/* ── Timeline Data ── */
const timelineData = [
  { year: '1776', title: 'American Revolution', type: 'rev',
    detail: 'Began as colonial rebellion against British taxation, but became a full revolution — creating a new republic with a written constitution and democratic ideals that reshaped the world.' },
  { year: '1791', title: 'Haitian Revolution', type: 'rev',
    detail: 'Enslaved people rose up against French colonial rule. It was both a rebellion against slavery and a revolution that produced the first free Black republic and abolished slavery.' },
  { year: '1831', title: "Nat Turner's Rebellion", type: 'reb',
    detail: 'A slave uprising in Virginia. It was a rebellion — violent resistance against an oppressive system — but did not produce systemic change or a new political order.' },
  { year: '1789', title: 'French Revolution', type: 'rev',
    detail: 'Overthrew the monarchy and feudal system, replacing them with a republic founded on "Liberty, Equality, Fraternity." Produced the Declaration of the Rights of Man.' },
  { year: '1857', title: 'Indian Rebellion (Sepoy Mutiny)', type: 'reb',
    detail: 'Indian soldiers and civilians revolted against the British East India Company. Though widespread, it was suppressed and did not produce a new system — hence typically classified as a rebellion.' },
  { year: '1917', title: 'Russian Revolution', type: 'rev',
    detail: 'Toppled the Tsarist autocracy and, after a second revolution the same year, established a communist state — fundamentally transforming Russia\'s political and economic system.' },
  { year: '1936', title: 'Spanish Civil War / Nationalist Rebellion', type: 'reb',
    detail: 'Military officers rebelled against the elected Republic. Though it succeeded militarily, scholars often classify the initial uprising as a rebellion (or coup) rather than a revolution.' },
  { year: '2011', title: 'Arab Spring (Egypt)', type: 'rev',
    detail: 'Mass protests toppled President Mubarak and briefly established democratic elections — a revolutionary moment, though later developments complicated the outcome.' },
];
timelineData.sort((a, b) => +a.year - +b.year);

const tl = document.getElementById('timeline');
timelineData.forEach(d => {
  const el = document.createElement('div');
  el.className = `tl-item ${d.type}`;
  el.innerHTML = `
    <div class="dot"></div>
    <span class="year">${d.year}</span>
    <h4>${d.title} <span style="font-weight:400;font-size:.85rem;opacity:.7;">(${d.type === 'rev' ? 'Revolution' : 'Rebellion'})</span></h4>
    <div class="detail">${d.detail}</div>`;
  el.addEventListener('click', () => el.classList.toggle('open'));
  tl.appendChild(el);
});

/* ── Spectrum ── */
const spectrumData = [
  { pct: 5,  label: 'Riot', tip: 'Spontaneous, short-lived, no organized goal — pure rebellion impulse.' },
  { pct: 18, label: "Nat Turner '31", tip: 'A slave rebellion: targeted, localized resistance without a plan for new government.' },
  { pct: 30, label: "Sepoy Mutiny '57", tip: 'Large-scale rebellion with revolutionary potential, but ultimately suppressed before systemic change.' },
  { pct: 45, label: "Spartacus '73 BC", tip: 'Massive slave revolt that shook Rome. Rebellion in form, but its scale hinted at revolutionary possibility.' },
  { pct: 62, label: "American '76", tip: 'Started as rebellion against taxes, evolved into a full revolution with a new constitutional republic.' },
  { pct: 78, label: "French '89", tip: 'Classic revolution: overthrew monarchy, redefined citizenship, and inspired revolutionary movements worldwide.' },
  { pct: 92, label: "Russian '17", tip: 'Total systemic revolution — replaced autocracy with communism, transforming economy, society, and government.' },
];

const pinsEl = document.getElementById('spectrumPins');
spectrumData.forEach(d => {
  const pin = document.createElement('div');
  pin.className = 'pin';
  pin.style.left = d.pct + '%';
  pin.style.top = '4px';
  pin.innerHTML = `
    <div class="marker"></div>
    <div class="pin-label">${d.label}</div>
    <div class="pin-tooltip">${d.tip}</div>`;
  pin.addEventListener('click', e => {
    e.stopPropagation();
    document.querySelectorAll('.pin').forEach(p => p.classList.remove('active'));
    pin.classList.toggle('active');
  });
  pinsEl.appendChild(pin);
});
document.addEventListener('click', () => document.querySelectorAll('.pin').forEach(p => p.classList.remove('active')));

/* ── Sort Game ── */
const sortTraits = [
  { text: 'Creates a new system of government', answer: 'revolution' },
  { text: 'Driven by specific grievances', answer: 'rebellion' },
  { text: 'Involves broad popular coalition', answer: 'revolution' },
  { text: 'Can be regional or localized', answer: 'rebellion' },
  { text: 'Produces a new constitution or legal order', answer: 'revolution' },
  { text: 'May lack a plan for what comes next', answer: 'rebellion' },
  { text: 'Claims to represent "the people"', answer: 'revolution' },
  { text: 'Participants often called insurgents', answer: 'rebellion' },
  { text: 'Driven by a unifying ideology', answer: 'revolution' },
  { text: 'May be suppressed without lasting change', answer: 'rebellion' },
];
let sortCorrect = 0, sortTotal = 0;

function buildSort() {
  const bank = document.getElementById('sortBank');
  bank.innerHTML = '';
  const shuffled = [...sortTraits].sort(() => Math.random() - .5);
  shuffled.forEach((t, i) => {
    const chip = document.createElement('div');
    chip.className = 'chip';
    chip.draggable = true;
    chip.textContent = t.text;
    chip.dataset.answer = t.answer;
    chip.dataset.idx = i;
    chip.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', JSON.stringify({ text: t.text, answer: t.answer, idx: i }));
    });
    // touch support
    chip.addEventListener('click', () => {
      if (chip.classList.contains('placed')) return;
      if (chip.classList.contains('selected')) {
        chip.classList.remove('selected');
        chip.style.border = '2px solid #bbb';
      } else {
        document.querySelectorAll('.chip.selected').forEach(c => { c.classList.remove('selected'); c.style.border = '2px solid #bbb'; });
        chip.classList.add('selected');
        chip.style.border = '2px solid var(--rev)';
      }
    });
    bank.appendChild(chip);
  });
}

document.querySelectorAll('.drop-zone').forEach(zone => {
  zone.addEventListener('dragover', e => { e.preventDefault(); zone.classList.add('drag-over'); });
  zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
  zone.addEventListener('drop', e => {
    e.preventDefault();
    zone.classList.remove('drag-over');
    const data = JSON.parse(e.dataTransfer.getData('text/plain'));
    placeChip(data, zone.dataset.zone, zone);
  });
  // tap to place selected chip
  zone.addEventListener('click', () => {
    const sel = document.querySelector('.chip.selected');
    if (!sel) return;
    placeChip({ text: sel.textContent, answer: sel.dataset.answer, idx: sel.dataset.idx }, zone.dataset.zone, zone);
    sel.classList.remove('selected');
    sel.style.border = '2px solid #bbb';
  });
});

function placeChip(data, zone, zoneEl) {
  const isCorrect = data.answer === zone;
  sortTotal++;
  if (isCorrect) sortCorrect++;

  // mark bank chip
  document.querySelectorAll('.chip').forEach(c => {
    if (c.dataset.idx == data.idx) c.classList.add('placed');
  });

  const placed = document.createElement('span');
  placed.className = 'placed-chip ' + (isCorrect ? 'correct' : 'wrong');
  placed.innerHTML = `${data.text} <button onclick="this.parentElement.remove()">&times;</button>`;
  zoneEl.querySelector('.placed-chips').appendChild(placed);

  document.getElementById('sortScore').textContent =
    `Score: ${sortCorrect} / ${sortTotal}` + (sortTotal === sortTraits.length ? '  —  All done!' : '');
}

function resetSort() {
  sortCorrect = 0; sortTotal = 0;
  document.getElementById('sortScore').textContent = '';
  document.querySelectorAll('.placed-chips').forEach(c => c.innerHTML = '');
  buildSort();
}
buildSort();

/* ── Quiz ── */
const quizData = [
  { q: 'The American colonies initially protested British taxes. What made their movement a revolution rather than just a rebellion?',
    opts: ['They used violence','They created a fundamentally new system of government','They had foreign allies','They wore uniforms'],
    ans: 1, explain: 'Violence, allies, and uniforms don\'t define revolution. What matters is that the colonists didn\'t just resist — they created an entirely new constitutional republic with democratic principles.' },
  { q: 'A group of farmers in a kingdom revolt over high grain taxes and burn the tax collector\'s office. Is this more likely a rebellion or revolution?',
    opts: ['Revolution','Rebellion'],
    ans: 1, explain: 'This is a rebellion — a targeted act of resistance against a specific grievance (taxes). There\'s no indication of a plan to replace the entire political system.' },
  { q: 'Which of these is the BEST indicator that an uprising is a revolution?',
    opts: ['It involves many people','It is violent','A new political system replaces the old one','The government falls'],
    ans: 2, explain: 'Revolutions are defined by systemic transformation. A government can fall from a coup (not a revolution), and size and violence don\'t guarantee systemic change.' },
  { q: 'The Haitian uprising (1791) is classified as a revolution because…',
    opts: ['It was violent','It was led by enslaved people','It created a new independent nation and abolished slavery','It defeated a European power'],
    ans: 2, explain: 'While all options are true, the defining factor is systemic change: Haiti became the first free Black republic, abolished slavery, and established a new political order.' },
  { q: '"One person\'s rebellion is another person\'s revolution." What does this phrase mean?',
    opts: ['Rebellions and revolutions are identical','The labels depend on perspective and outcome','Only winners get to have revolutions','Language doesn\'t matter in politics'],
    ans: 1, explain: 'Those in power tend to call uprisings "rebellions" to delegitimize them, while supporters call them "revolutions." The label often depends on who wins and who writes the history.' },
  { q: 'Which event started as a rebellion but is now considered a revolution?',
    opts: ['Spartacus\'s slave revolt (73 BC)','Nat Turner\'s Rebellion (1831)','The French Revolution (1789)','The Boxer Rebellion (1900)'],
    ans: 2, explain: 'The French Revolution began with localized unrest and the storming of the Bastille (rebellion), but escalated into total systemic transformation — a textbook revolution.' },
];

let quizIdx = 0, quizScore = 0;

function renderQuiz() {
  const card = document.getElementById('quizCard');
  if (quizIdx >= quizData.length) {
    const pct = Math.round(quizScore / quizData.length * 100);
    card.innerHTML = `<div class="quiz-result">
      <h3>${pct >= 80 ? 'Excellent!' : pct >= 50 ? 'Good effort!' : 'Keep studying!'}</h3>
      <p style="font-size:1.3rem; margin:.6rem 0;">${quizScore} / ${quizData.length} correct (${pct}%)</p>
      <button class="btn btn-primary" onclick="quizIdx=0;quizScore=0;renderQuiz();">Try Again</button>
    </div>`;
    return;
  }
  const q = quizData[quizIdx];
  card.innerHTML = `
    <div class="quiz-progress">Question ${quizIdx + 1} of ${quizData.length}</div>
    <div class="quiz-q">${q.q}</div>
    <div class="quiz-opts">${q.opts.map((o, i) => `<button data-i="${i}">${o}</button>`).join('')}</div>
    <div class="quiz-explain">${q.explain}</div>
    <div class="quiz-next" style="display:none"><button class="btn btn-primary" id="nextBtn">Next &rarr;</button></div>`;

  card.querySelectorAll('.quiz-opts button').forEach(btn => {
    btn.addEventListener('click', () => {
      const chosen = +btn.dataset.i;
      card.querySelectorAll('.quiz-opts button').forEach(b => {
        b.disabled = true;
        if (+b.dataset.i === q.ans) b.classList.add('correct');
      });
      if (chosen !== q.ans) btn.classList.add('wrong');
      else quizScore++;
      card.querySelector('.quiz-explain').classList.add('show');
      card.querySelector('.quiz-next').style.display = 'block';
      card.querySelector('#nextBtn').addEventListener('click', () => { quizIdx++; renderQuiz(); });
    });
  });
}
renderQuiz();
</script>
</body>
</html>
