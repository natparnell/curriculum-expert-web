<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>De-escalation Scenario Trainer</title>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
--blue-50:#eff6ff;--blue-100:#dbeafe;--blue-200:#bfdbfe;--blue-300:#93c5fd;
--blue-400:#60a5fa;--blue-500:#3b82f6;--blue-600:#2563eb;--blue-700:#1d4ed8;
--grey-50:#f9fafb;--grey-100:#f3f4f6;--grey-200:#e5e7eb;--grey-300:#d1d5db;
--grey-400:#9ca3af;--grey-500:#6b7280;--grey-600:#4b5563;--grey-700:#374151;
--grey-800:#1f2937;--grey-900:#111827;
--green-500:#22c55e;--green-600:#16a34a;
--amber-400:#fbbf24;--amber-500:#f59e0b;
--red-400:#f87171;--red-500:#ef4444;--red-600:#dc2626;
--radius:12px;--shadow:0 1px 3px rgba(0,0,0,.1),0 1px 2px rgba(0,0,0,.06);
--shadow-md:0 4px 6px rgba(0,0,0,.07),0 2px 4px rgba(0,0,0,.06);
--shadow-lg:0 10px 15px rgba(0,0,0,.1),0 4px 6px rgba(0,0,0,.05);
--transition:all .3s ease;
}
body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--blue-50);color:var(--grey-800);line-height:1.6;min-height:100vh}
button{cursor:pointer;font-family:inherit}
.container{max-width:1100px;margin:0 auto;padding:20px}

/* Header */
.app-header{text-align:center;padding:32px 20px 24px;background:linear-gradient(135deg,#1e3a5f 0%,#2563eb 100%);color:#fff;position:relative}
.app-header h1{font-size:clamp(1.5rem,3vw,2.2rem);font-weight:700;margin-bottom:4px;letter-spacing:-.5px}
.app-header p{opacity:.85;font-size:.95rem}
.header-actions{position:absolute;top:16px;right:20px;display:flex;gap:8px}
.header-btn{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.25);color:#fff;padding:8px 14px;border-radius:8px;font-size:.82rem;font-weight:500;transition:var(--transition);display:flex;align-items:center;gap:6px}
.header-btn:hover{background:rgba(255,255,255,.25)}
.header-btn svg{width:16px;height:16px}

/* Progress bar in header */
.progress-strip{display:flex;gap:4px;justify-content:center;margin-top:16px}
.progress-dot{width:32px;height:6px;border-radius:3px;background:rgba(255,255,255,.2);transition:var(--transition)}
.progress-dot.done{background:var(--green-500)}
.progress-dot.active{background:var(--amber-400)}

/* Screens */
.screen{display:none;animation:fadeIn .4s ease}
.screen.active{display:block}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

/* Home screen */
.home-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-top:24px}
.scenario-card{background:#fff;border-radius:var(--radius);padding:24px;box-shadow:var(--shadow);border:2px solid transparent;transition:var(--transition);position:relative;overflow:hidden}
.scenario-card:hover{border-color:var(--blue-300);box-shadow:var(--shadow-lg);transform:translateY(-2px)}
.scenario-card.completed{border-color:var(--green-500)}
.scenario-card.completed::after{content:'Completed';position:absolute;top:12px;right:-28px;background:var(--green-500);color:#fff;font-size:.7rem;font-weight:600;padding:2px 32px;transform:rotate(45deg);text-transform:uppercase;letter-spacing:.5px}
.card-icon{width:48px;height:48px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.5rem;margin-bottom:12px}
.card-icon.corridor{background:#dbeafe;color:var(--blue-600)}
.card-icon.classroom{background:#fef3c7;color:var(--amber-500)}
.card-icon.playground{background:#fce7f3;color:#db2777}
.card-icon.defiant{background:#ede9fe;color:#7c3aed}
.scenario-card h3{font-size:1.1rem;margin-bottom:6px;color:var(--grey-800)}
.scenario-card .year-tag{font-size:.75rem;font-weight:600;color:var(--blue-600);background:var(--blue-100);padding:2px 8px;border-radius:4px;display:inline-block;margin-bottom:8px}
.scenario-card p{font-size:.88rem;color:var(--grey-500);margin-bottom:16px}
.start-btn{width:100%;padding:10px;border:none;border-radius:8px;background:linear-gradient(135deg,var(--blue-500),var(--blue-600));color:#fff;font-weight:600;font-size:.9rem;transition:var(--transition)}
.start-btn:hover{background:linear-gradient(135deg,var(--blue-600),var(--blue-700))}

/* Stats bar */
.stats-bar{display:flex;gap:16px;justify-content:center;margin-top:24px;flex-wrap:wrap}
.stat-box{background:#fff;border-radius:10px;padding:14px 24px;box-shadow:var(--shadow);text-align:center;min-width:140px}
.stat-box .val{font-size:1.4rem;font-weight:700;color:var(--blue-600)}
.stat-box .lbl{font-size:.75rem;color:var(--grey-400);text-transform:uppercase;letter-spacing:.5px}

/* Scenario screen */
.scenario-header{background:#fff;border-radius:var(--radius);padding:20px 24px;box-shadow:var(--shadow);margin-bottom:20px;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px}
.scenario-header h2{font-size:1.2rem;color:var(--grey-800)}
.step-indicator{font-size:.8rem;color:var(--grey-400);font-weight:500}

/* Escalation meter */
.escalation-panel{background:#fff;border-radius:var(--radius);padding:20px 24px;box-shadow:var(--shadow);margin-bottom:20px}
.escalation-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.escalation-label span{font-size:.85rem;font-weight:600;color:var(--grey-600)}
.escalation-level{font-size:1.1rem;font-weight:700;padding:2px 10px;border-radius:6px}
.escalation-level.low{background:#dcfce7;color:var(--green-600)}
.escalation-level.medium{background:#fef3c7;color:#b45309}
.escalation-level.high{background:#fee2e2;color:var(--red-600)}
.meter-track{height:16px;background:var(--grey-100);border-radius:8px;overflow:hidden;position:relative}
.meter-fill{height:100%;border-radius:8px;transition:width .6s ease,background .6s ease;min-width:4%}
.meter-fill.low{background:linear-gradient(90deg,#22c55e,#4ade80)}
.meter-fill.medium{background:linear-gradient(90deg,#f59e0b,#fbbf24)}
.meter-fill.high{background:linear-gradient(90deg,#ef4444,#f87171)}
.meter-numbers{display:flex;justify-content:space-between;margin-top:4px;padding:0 2px}
.meter-numbers span{font-size:.65rem;color:var(--grey-400);width:10%;text-align:center}

/* Scene card */
.scene-card{background:#fff;border-radius:var(--radius);padding:28px;box-shadow:var(--shadow-md);margin-bottom:20px}
.scene-narrative{font-size:.95rem;line-height:1.75;color:var(--grey-700);margin-bottom:20px;padding:16px 20px;background:var(--blue-50);border-left:4px solid var(--blue-400);border-radius:0 8px 8px 0}
.scene-prompt{font-weight:600;color:var(--grey-800);margin-bottom:16px;font-size:1rem}

/* Choices */
.choices{display:flex;flex-direction:column;gap:10px}
.choice-btn{text-align:left;padding:14px 18px;border:2px solid var(--grey-200);border-radius:10px;background:#fff;font-size:.9rem;line-height:1.5;color:var(--grey-700);transition:var(--transition);position:relative;padding-left:42px}
.choice-btn::before{content:attr(data-letter);position:absolute;left:14px;top:14px;width:22px;height:22px;border-radius:6px;background:var(--blue-100);color:var(--blue-600);font-weight:700;font-size:.75rem;display:flex;align-items:center;justify-content:center}
.choice-btn:hover{border-color:var(--blue-400);background:var(--blue-50)}
.choice-btn.selected{border-color:var(--blue-500);background:var(--blue-50)}
.choice-btn:disabled{opacity:.6;cursor:default}

/* Feedback */
.feedback-panel{background:#fff;border-radius:var(--radius);padding:24px;box-shadow:var(--shadow-md);margin-bottom:20px;animation:fadeIn .3s ease}
.feedback-header{display:flex;align-items:center;gap:10px;margin-bottom:12px}
.feedback-icon{width:36px;height:36px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;flex-shrink:0}
.feedback-icon.positive{background:#dcfce7;color:var(--green-600)}
.feedback-icon.neutral{background:#fef3c7;color:#b45309}
.feedback-icon.negative{background:#fee2e2;color:var(--red-600)}
.feedback-header h4{font-size:1rem}
.feedback-text{font-size:.88rem;color:var(--grey-600);line-height:1.7;margin-bottom:12px}
.feedback-psychology{padding:12px 16px;background:var(--grey-50);border-radius:8px;border-left:3px solid var(--blue-400);font-size:.82rem;color:var(--grey-600);line-height:1.65}
.feedback-psychology strong{color:var(--blue-700)}
.continue-btn{margin-top:16px;padding:10px 28px;border:none;border-radius:8px;background:var(--blue-500);color:#fff;font-weight:600;font-size:.9rem;transition:var(--transition)}
.continue-btn:hover{background:var(--blue-600)}

/* Summary screen */
.summary-card{background:#fff;border-radius:var(--radius);padding:28px;box-shadow:var(--shadow-md);margin-bottom:20px}
.summary-card h3{font-size:1.15rem;color:var(--grey-800);margin-bottom:16px;padding-bottom:10px;border-bottom:2px solid var(--grey-100)}
.outcome-banner{padding:20px;border-radius:var(--radius);text-align:center;margin-bottom:24px}
.outcome-banner.success{background:linear-gradient(135deg,#dcfce7,#bbf7d0);border:1px solid #86efac}
.outcome-banner.partial{background:linear-gradient(135deg,#fef3c7,#fde68a);border:1px solid #fcd34d}
.outcome-banner.escalated{background:linear-gradient(135deg,#fee2e2,#fecaca);border:1px solid #fca5a5}
.outcome-banner h3{font-size:1.3rem;border:none;padding:0;margin-bottom:6px}
.outcome-banner p{font-size:.9rem;opacity:.8}

/* Timeline */
.timeline{position:relative;padding-left:28px}
.timeline::before{content:'';position:absolute;left:8px;top:4px;bottom:4px;width:2px;background:var(--grey-200)}
.timeline-item{position:relative;margin-bottom:16px;padding:10px 14px;background:var(--grey-50);border-radius:8px;font-size:.85rem}
.timeline-item::before{content:'';position:absolute;left:-24px;top:14px;width:12px;height:12px;border-radius:50%;border:2px solid #fff;box-shadow:0 0 0 2px var(--grey-300)}
.timeline-item.good::before{background:var(--green-500);box-shadow:0 0 0 2px var(--green-500)}
.timeline-item.ok::before{background:var(--amber-500);box-shadow:0 0 0 2px var(--amber-500)}
.timeline-item.bad::before{background:var(--red-500);box-shadow:0 0 0 2px var(--red-500)}
.timeline-item .ti-step{font-weight:600;color:var(--grey-500);font-size:.75rem;text-transform:uppercase;margin-bottom:2px}
.timeline-item .ti-choice{color:var(--grey-700)}
.timeline-item .ti-effect{font-size:.78rem;color:var(--grey-400);margin-top:2px}

/* Graph */
.graph-container{width:100%;height:180px;position:relative;margin:16px 0}
.graph-container canvas{width:100%;height:100%}

/* Expert path */
.expert-path{padding:16px;background:var(--blue-50);border-radius:8px;border:1px solid var(--blue-200)}
.expert-step{display:flex;gap:10px;margin-bottom:10px;font-size:.85rem;align-items:flex-start}
.expert-step .num{width:22px;height:22px;border-radius:50%;background:var(--blue-500);color:#fff;font-size:.7rem;font-weight:700;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:2px}
.expert-step .desc{color:var(--grey-600);line-height:1.5}

/* Tips list */
.tips-list{list-style:none;padding:0}
.tips-list li{padding:8px 12px 8px 32px;position:relative;font-size:.88rem;color:var(--grey-600);line-height:1.6;margin-bottom:4px}
.tips-list li::before{content:'\2713';position:absolute;left:8px;color:var(--green-500);font-weight:700}

/* Learning points */
.learning-points{display:flex;flex-direction:column;gap:10px}
.lp-item{display:flex;gap:12px;padding:12px;background:var(--grey-50);border-radius:8px}
.lp-icon{width:32px;height:32px;border-radius:8px;background:var(--blue-100);color:var(--blue-600);display:flex;align-items:center;justify-content:center;font-size:.9rem;flex-shrink:0}
.lp-text{font-size:.85rem;color:var(--grey-600);line-height:1.6}

.summary-actions{display:flex;gap:12px;justify-content:center;margin-top:20px;flex-wrap:wrap}
.summary-actions button{padding:10px 24px;border-radius:8px;font-weight:600;font-size:.9rem;transition:var(--transition)}
.btn-primary{border:none;background:var(--blue-500);color:#fff}
.btn-primary:hover{background:var(--blue-600)}
.btn-secondary{border:2px solid var(--grey-300);background:#fff;color:var(--grey-600)}
.btn-secondary:hover{border-color:var(--blue-400);color:var(--blue-600)}

/* Toolkit modal */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.4);z-index:1000;align-items:center;justify-content:center;padding:20px;animation:fadeIn .2s ease}
.modal-overlay.active{display:flex}
.modal{background:#fff;border-radius:var(--radius);max-width:700px;width:100%;max-height:85vh;overflow-y:auto;box-shadow:var(--shadow-lg);position:relative}
.modal-header{padding:20px 24px;border-bottom:1px solid var(--grey-200);display:flex;justify-content:space-between;align-items:center;position:sticky;top:0;background:#fff;z-index:1;border-radius:var(--radius) var(--radius) 0 0}
.modal-header h3{font-size:1.15rem;color:var(--grey-800)}
.modal-close{width:32px;height:32px;border:none;background:var(--grey-100);border-radius:8px;font-size:1.1rem;display:flex;align-items:center;justify-content:center;color:var(--grey-500);transition:var(--transition)}
.modal-close:hover{background:var(--grey-200)}
.modal-body{padding:24px}
.toolkit-section{margin-bottom:24px}
.toolkit-section h4{font-size:.95rem;color:var(--blue-700);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.toolkit-section h4 span{font-size:1.1rem}
.technique{padding:10px 14px;background:var(--grey-50);border-radius:8px;margin-bottom:8px;font-size:.85rem;line-height:1.6}
.technique strong{color:var(--grey-800)}
.technique em{color:var(--blue-600);font-style:normal;font-size:.8rem}

/* Responsive */
@media(max-width:768px){
.header-actions{position:static;justify-content:center;margin-top:12px}
.scenario-header{flex-direction:column;text-align:center}
.container{padding:12px}
.scene-card{padding:18px}
}
@media(min-width:1200px){
.container{max-width:1100px}
}
</style>
</head>
<body>

<div class="app-header">
<h1>De-escalation Scenario Trainer</h1>
<p>Interactive professional development for school staff behaviour management</p>
<div class="header-actions">
<button class="header-btn" onclick="openToolkit()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14.7 6.3a1 1 0 000 1.4l1.6 1.6a1 1 0 001.4 0l3.77-3.77a6 6 0 01-7.94 7.94l-6.91 6.91a2.12 2.12 0 01-3-3l6.91-6.91a6 6 0 017.94-7.94l-3.76 3.76z"/></svg>
Strategies Toolkit
</button>
<button class="header-btn" onclick="resetAll()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 4v6h6"/><path d="M3.51 15a9 9 0 105.64-11.36L1 10"/></svg>
Reset Progress
</button>
</div>
<div class="progress-strip" id="progressStrip">
<div class="progress-dot" data-scenario="0"></div>
<div class="progress-dot" data-scenario="1"></div>
<div class="progress-dot" data-scenario="2"></div>
<div class="progress-dot" data-scenario="3"></div>
</div>
</div>

<!-- HOME SCREEN -->
<div class="screen active" id="homeScreen">
<div class="container">
<div class="stats-bar" id="statsBar">
<div class="stat-box"><div class="val" id="statCompleted">0/4</div><div class="lbl">Completed</div></div>
<div class="stat-box"><div class="val" id="statAvgEsc">--</div><div class="lbl">Avg. Final Escalation</div></div>
<div class="stat-box"><div class="val" id="statBestOutcome">--</div><div class="lbl">Best Outcome</div></div>
</div>
<div class="home-grid" id="homeGrid"></div>
</div>
</div>

<!-- SCENARIO SCREEN -->
<div class="screen" id="scenarioScreen">
<div class="container">
<div class="scenario-header">
<div>
<h2 id="scenTitle"></h2>
<span class="step-indicator" id="stepIndicator"></span>
</div>
<button class="header-btn" onclick="exitScenario()" style="color:var(--grey-600);border-color:var(--grey-300)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="width:14px;height:14px"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
Back to Menu
</button>
</div>
<div class="escalation-panel">
<div class="escalation-label">
<span>Escalation Level</span>
<span class="escalation-level" id="escLevel">3</span>
</div>
<div class="meter-track">
<div class="meter-fill" id="meterFill"></div>
</div>
<div class="meter-numbers"><span>1</span><span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span></div>
</div>
<div id="sceneArea"></div>
</div>
</div>

<!-- SUMMARY SCREEN -->
<div class="screen" id="summaryScreen">
<div class="container" id="summaryContent"></div>
</div>

<!-- TOOLKIT MODAL -->
<div class="modal-overlay" id="toolkitModal">
<div class="modal">
<div class="modal-header">
<h3>Strategies Toolkit</h3>
<button class="modal-close" onclick="closeToolkit()">&times;</button>
</div>
<div class="modal-body">
<div class="toolkit-section">
<h4><span>&#128483;</span> Communication Techniques</h4>
<div class="technique"><strong>Active Listening:</strong> Give full attention, nod, paraphrase what the student says. <em>"So what you're telling me is..."</em></div>
<div class="technique"><strong>Empathy Statements:</strong> Acknowledge the emotion before addressing behaviour. <em>"I can see you're really frustrated right now."</em></div>
<div class="technique"><strong>Naming Emotions:</strong> Help the student identify what they are feeling. This engages the prefrontal cortex and reduces amygdala activation. <em>"It sounds like you're feeling angry about this."</em></div>
<div class="technique"><strong>Lowering Your Voice:</strong> Speak more quietly and slowly when a student is escalating. This co-regulates their nervous system and avoids triggering a fight response.</div>
<div class="technique"><strong>Limited Language:</strong> Use short, clear sentences. When stressed, the brain's capacity to process complex language is reduced.</div>
</div>
<div class="toolkit-section">
<h4><span>&#129309;</span> Relational Approaches</h4>
<div class="technique"><strong>Offering Choices:</strong> Give two acceptable options rather than demands. This preserves the student's sense of autonomy. <em>"Would you prefer to sit here or work in the quiet room?"</em></div>
<div class="technique"><strong>Giving Space:</strong> Allow physical and emotional space. Step back, reduce proximity. Do not crowd or loom over a student.</div>
<div class="technique"><strong>Wondering Aloud:</strong> Use curious, non-judgmental language. <em>"I'm wondering if something happened before this lesson..."</em></div>
<div class="technique"><strong>Connection Before Correction:</strong> Establish rapport and safety before discussing the behaviour. Students cannot learn from consequences when dysregulated.</div>
</div>
<div class="toolkit-section">
<h4><span>&#129504;</span> Understanding the Brain</h4>
<div class="technique"><strong>Amygdala Hijack:</strong> When a student feels threatened (physically or emotionally), the amygdala triggers a fight, flight or freeze response. Rational thinking shuts down. De-escalation must calm the amygdala before engaging the thinking brain.</div>
<div class="technique"><strong>Co-Regulation:</strong> Students learn to regulate their emotions through interactions with calm, regulated adults. Your calm is their anchor.</div>
<div class="technique"><strong>Window of Tolerance:</strong> Everyone has a range within which they can manage stress. When pushed outside this window, behaviour becomes survival-driven, not intentional.</div>
<div class="technique"><strong>Attachment Theory:</strong> Students with insecure attachment may perceive authority figures as threats. Predictable, warm and consistent responses build trust over time.</div>
</div>
<div class="toolkit-section">
<h4><span>&#9888;</span> What to Avoid</h4>
<div class="technique"><strong>Public Confrontation:</strong> Avoid challenging a student in front of peers. This backs them into a corner where saving face becomes the priority.</div>
<div class="technique"><strong>Ultimatums:</strong> "Do it now or else..." removes all choice and escalates power struggles.</div>
<div class="technique"><strong>Sarcasm or Dismissal:</strong> Undermines trust and models poor emotional regulation.</div>
<div class="technique"><strong>Physical Proximity Pressure:</strong> Standing too close, blocking exits or towering over a student can trigger a fight/flight response.</div>
</div>
</div>
</div>
</div>

<script>
// ========== SCENARIO DATA ==========
const SCENARIOS = [
// === SCENARIO 1: CORRIDOR CONFRONTATION ===
{
id:0,title:"Corridor Confrontation",icon:"corridor",emoji:"\uD83D\uDEB6",
yearTag:"Year 10",
description:"A Year 10 student refuses to go to lesson and becomes verbally aggressive when challenged. They are clearly upset about something.",
startEscalation:4,
steps:[
// Step 0
{
narrative:"You are walking down the corridor during Period 3 when you notice Kieran, a Year 10 student, sitting on the floor against the wall outside his Maths classroom. His bag is thrown to one side, his hood is up, and he is staring at the floor. The lesson started 10 minutes ago. As you approach, he glances up and immediately looks hostile.\n\n\"Just leave me alone,\" he mutters before you have even spoken.",
prompt:"How do you respond?",
choices:[
{
text:"Pause a few metres away, lower yourself to a less imposing height, and say calmly: \"I'm not here to get you in trouble, Kieran. I just noticed you're out here and wanted to check you're okay.\"",
escalationChange:-1,
quality:"good",
feedback:"Kieran's shoulders drop slightly. He does not reply, but he does not tell you to go away either. He scuffs his shoe on the floor.",
psychology:"By pausing at a distance, lowering your height and leading with concern rather than correction, you signalled safety. This approach works with the brain's threat-detection system: the amygdala did not register you as a threat, so Kieran's defensive wall lowered slightly. Connection before correction is key.",
nextStep:1
},
{
text:"\"Kieran, you should be in your lesson. Come on, up you get -- let's get you back in there.\"",
escalationChange:1,
quality:"ok",
feedback:"Kieran pulls his hood further down. \"I'm not going back in there. You can't make me.\" His voice is louder now and a couple of students glance out from a nearby classroom.",
psychology:"While your tone was not aggressive, you led with an instruction rather than connection. When a student is already dysregulated, instructions feel like demands and trigger resistance. The brain interprets 'you should' as pressure, pushing Kieran further outside his window of tolerance.",
nextStep:1
},
{
text:"\"Kieran, hood down, bag up, get to lesson. You're already 10 minutes late -- do you want me to add a detention to that?\"",
escalationChange:3,
quality:"bad",
feedback:"Kieran jumps to his feet. \"Go on then! Give me a detention! Give me ten! I don't care!\" He kicks his bag down the corridor. Two doors open as staff look out to see what's happening.",
psychology:"Multiple rapid commands combined with a threat activated Kieran's fight response. The amygdala hijack is now fully engaged. When we stack demands and threaten consequences during escalation, we remove all sense of control from the student. Their only options become fight, flight or freeze. Kieran chose fight.",
nextStep:1
},
{
text:"You decide Kieran is not your responsibility and walk past, avoiding eye contact.",
escalationChange:1,
quality:"bad",
feedback:"Kieran watches you walk away. He mutters something under his breath and pulls out his phone. Five minutes later, he leaves the building through a fire exit. The school spends an hour trying to locate him.",
psychology:"Avoidance can feel like rejection to a student who is already struggling, confirming their belief that adults do not care. For students with insecure attachment histories, being ignored by an adult in a moment of distress reinforces their internal working model that they are not worth helping.",
nextStep:1
}
]
},
// Step 1
{
narrative:"You are now standing near Kieran in the corridor. Regardless of how the initial contact went, you need to move forward. Kieran is showing signs of distress -- he keeps clenching and unclenching his fists, his breathing is rapid, and he will not make eye contact.\n\nAfter a pause, he blurts out: \"Everything's rubbish. Mr Harris had a go at me in front of everyone and I'm done with this place.\"",
prompt:"Kieran has revealed what is bothering him. What is your next move?",
choices:[
{
text:"\"That sounds really frustrating -- having someone call you out in front of the class is horrible. I get why you're upset. Do you want to tell me what happened?\"",
escalationChange:-2,
quality:"good",
feedback:"Kieran's breathing slows slightly. He looks at you properly for the first time. \"He said I was being lazy in front of everyone. I wasn't -- I just didn't understand the work.\" His voice cracks slightly.",
psychology:"You named his emotion (frustrated), validated his experience, and invited him to share more. This is affect labelling -- when we put words to feelings, fMRI studies show reduced amygdala activity. You also modelled that his feelings are legitimate, which builds trust and moves him toward his window of tolerance.",
nextStep:2
},
{
text:"\"I understand you're upset, but Mr Harris is your teacher and you need to show respect. Let's go and sort this out with him.\"",
escalationChange:1,
quality:"ok",
feedback:"Kieran shakes his head vigorously. \"No way. I'm not going back in there. He'll just have a go at me again.\" He starts pacing.",
psychology:"While acknowledging the emotion was good, immediately defending the teacher and suggesting a return felt like taking sides. The word 'but' effectively cancelled out your empathy. The student heard: 'Your feelings do not matter as much as the teacher's authority.' This is a common well-intentioned mistake.",
nextStep:2
},
{
text:"\"Well, I'm sure Mr Harris had his reasons. Sometimes teachers have to be firm. You need to learn to handle that.\"",
escalationChange:2,
quality:"bad",
feedback:"\"You're just like the rest of them!\" Kieran shouts. He punches the wall and then cradles his hand, eyes filling with tears of pain and frustration.",
psychology:"Dismissing the student's perspective and siding with the teacher felt like a betrayal. When a young person is vulnerable enough to share what hurt them, minimising their experience triggers shame and rage. The punching is a physical release of emotional energy that had nowhere else to go -- classic fight response.",
nextStep:2
}
]
},
// Step 2
{
narrative:"Kieran is still in the corridor with you. The initial surge of anger seems to have shifted into something more vulnerable -- he looks tired and upset rather than aggressive. He says quietly:\n\n\"I'm thick anyway. No point being in Maths. I can't do any of it and everyone knows it.\"",
prompt:"Kieran has revealed deeper feelings of inadequacy. How do you respond?",
choices:[
{
text:"\"I hear you saying you feel like you can't do it. That must be really tough, sitting in a lesson where you feel lost. That takes courage, actually -- just being there when it's hard.\"",
escalationChange:-2,
quality:"good",
feedback:"Kieran blinks, surprised. Nobody has called him courageous before. \"I do try,\" he says quietly. \"I just... I don't get it like everyone else does.\"",
psychology:"Reframing the narrative -- from 'I'm thick' to 'it takes courage' -- challenges the student's negative self-belief without dismissing their experience. This is a technique from strengths-based practice. You also reflected his feeling without trying to fix it, which is crucial. The brain needs to feel heard before it can problem-solve.",
nextStep:3
},
{
text:"\"Don't say that about yourself, Kieran. You're not thick. You just need to try harder and ask for help when you don't understand.\"",
escalationChange:0,
quality:"ok",
feedback:"Kieran shrugs. \"Yeah, whatever.\" He does not seem comforted. The moment of vulnerability has closed.",
psychology:"While well-intentioned, 'you're not thick' directly contradicts his felt experience and 'try harder' implies the problem is effort, not support. Toxic positivity -- denying negative emotions -- can feel invalidating. The student's window of openness closed because the response did not truly meet him where he was.",
nextStep:3
},
{
text:"\"Well, have you thought about speaking to your Maths teacher about getting extra support? There are interventions available.\"",
escalationChange:0,
quality:"ok",
feedback:"Kieran rolls his eyes. \"Right, so I can be the kid who needs extra help. Great.\" He pulls his hood back up.",
psychology:"Jumping to solutions when a student is emotionally vulnerable misses the point. The brain is not ready for problem-solving during emotional distress -- the prefrontal cortex is still partially offline. This is a 'fixing' response when what was needed was a 'feeling' response. Solutions come later, after regulation.",
nextStep:3
}
]
},
// Step 3
{
narrative:"The corridor is quiet. The tension has significantly reduced. Kieran is now leaning against the wall rather than sitting defensively on the floor. He is still not ready to go back to Maths, but he is no longer aggressive or in crisis.\n\nHe asks: \"Am I going to get a detention for missing the lesson?\"",
prompt:"Kieran is asking about consequences. This is a pivotal moment. What do you say?",
choices:[
{
text:"\"Let's not worry about that right now. The most important thing is that you're okay. How about we find somewhere quiet where you can have a few minutes, and then we can work out a plan together? I can speak to Mr Harris as well.\"",
escalationChange:-1,
quality:"good",
feedback:"Kieran nods slowly. \"Yeah... okay. Thanks.\" He picks up his bag. For the first time, he looks like a 15-year-old rather than someone ready for battle.",
psychology:"Parking consequences for later demonstrates that the relationship matters more than the rule in this moment. Offering a plan gives Kieran agency. Mentioning you will speak to Mr Harris shows you will advocate for him. This approach builds trust and models what repair looks like -- a key concept in restorative practice.",
nextStep:4
},
{
text:"\"Honestly, Kieran, I think there might be a consequence for missing the lesson, but I'll make sure your side of the story is heard. Shall we go and talk to your Head of Year?\"",
escalationChange:0,
quality:"ok",
feedback:"Kieran tenses slightly but then nods. \"As long as they actually listen,\" he says, picking up his bag reluctantly.",
psychology:"Honesty about potential consequences is respectful, and offering to ensure his voice is heard is good practice. However, introducing consequences while the student is still emotionally fragile can feel like the empathy was conditional. The timing is slightly premature -- ideally, consequences are discussed once the student is fully regulated.",
nextStep:4
},
{
text:"\"I'm afraid you will need to catch up on the missed work, and I'll have to log this as an unauthorised absence from lesson. Rules are rules, Kieran.\"",
escalationChange:2,
quality:"bad",
feedback:"Kieran's face hardens. \"Forget it then. I knew you were just pretending to be nice.\" He walks away down the corridor. The progress made in the last few minutes unravels.",
psychology:"Shifting abruptly from empathy to enforcement feels like a betrayal -- the student opened up and was met with rules. This confirms the belief that adults cannot be trusted. The phrase 'rules are rules' removes your humanity from the interaction and signals that the system matters more than the person. Relationship rupture without repair causes lasting damage.",
nextStep:4
}
]
},
// Step 4
{
narrative:"Kieran has agreed to come with you. You walk together toward the pastoral office. He is quiet but no longer hostile. As you walk, he says:\n\n\"Do you think Mr Harris actually thinks I'm lazy? Because I'm not. I just... I didn't sleep last night. Things at home are...\" He trails off.",
prompt:"Kieran is on the verge of disclosing something about his home life. How do you handle this?",
choices:[
{
text:"\"You don't have to tell me anything you don't want to. But I want you to know that if things are tough at home, there are people here who can help. Whatever's going on, you don't have to deal with it alone.\"",
escalationChange:-1,
quality:"good",
feedback:"Kieran nods. \"Maybe... maybe I could talk to someone. Not today though.\" He seems calmer and more grounded than he has been all morning.",
psychology:"Giving permission NOT to share is paradoxically what makes students feel safe enough to eventually share. You respected his autonomy while planting the seed that support exists. This approach aligns with trauma-informed practice: safety, trustworthiness, choice, collaboration and empowerment. You demonstrated all five.",
nextStep:5
},
{
text:"\"What's happening at home, Kieran? It's important you tell me so we can help you properly.\"",
escalationChange:1,
quality:"ok",
feedback:"Kieran clams up immediately. \"Nothing. Forget I said anything.\" He looks at the floor and does not speak again until you reach the office.",
psychology:"Pushing for disclosure when a student is tentatively opening up feels intrusive and creates pressure. The question 'What's happening?' demands vulnerability the student is not yet ready for. In trauma-informed practice, we follow the student's pace. Pushing too hard can re-traumatise and breaks the trust you have built.",
nextStep:5
},
{
text:"\"I'm sure Mr Harris doesn't think you're lazy. Try to get an early night tonight -- sleep makes everything feel better. Shall we get you a drink of water?\"",
escalationChange:0,
quality:"ok",
feedback:"Kieran goes quiet. He seems slightly deflated, as though the moment to share something important has passed. He accepts the water but seems withdrawn.",
psychology:"Minimising ('I'm sure he doesn't') and offering practical advice ('get an early night') bypasses the emotional content. Kieran was signalling a safeguarding concern and it was inadvertently redirected. While not harmful, this represents a missed opportunity. The water is kind but serves as a distraction from what matters.",
nextStep:5
}
]
},
// Step 5
{
narrative:"You have arrived at the pastoral office with Kieran. He sits down and accepts a glass of water. The Head of Year is available and you brief them discreetly.\n\nBefore you leave, Kieran looks up and says: \"Sir/Miss... thanks. For not just shouting at me like everyone else does.\"",
prompt:"This is your final interaction with Kieran. What do you say?",
choices:[
{
text:"\"Everyone has tough days, Kieran. I'm glad you talked to me. I'll check in with you tomorrow to see how you're doing, okay?\"",
escalationChange:-1,
quality:"good",
feedback:"Kieran gives a small nod and the faintest hint of a smile. You leave knowing that a consistent follow-up tomorrow will reinforce that this was genuine care, not just crisis management.",
psychology:"Normalising bad days reduces shame. Committing to follow up is crucial: many students have experienced adults who show care in the crisis but disappear afterward. Consistent follow-through builds secure attachment and teaches the student that relationships can survive difficult moments. This is repair in action.",
nextStep:-1
},
{
text:"\"That's alright, Kieran. Let's make sure tomorrow's a better day. You've got Maths again -- I'd like you to give it another go.\"",
escalationChange:0,
quality:"ok",
feedback:"Kieran nods but looks a bit anxious about the mention of Maths. A reasonable ending, though it shifts focus back to the academic issue rather than the relational one.",
psychology:"Redirecting to academics at the close is understandable but slightly premature. The student has just been through an emotional experience and is not yet ready to commit to Maths. Ending on a relational note rather than an instructional one would have been more powerful for long-term trust building.",
nextStep:-1
},
{
text:"\"No problem. But remember, next time you're upset, come and find an adult rather than storming out of lessons, yeah?\"",
escalationChange:1,
quality:"ok",
feedback:"Kieran's expression flickers -- the gentle correction at the end takes the edge off an otherwise positive interaction. He nods but the warmth in the moment has cooled.",
psychology:"Ending on an instruction ('next time do this') undermines the positive experience. It turns a moment of genuine human connection into a teaching moment, which can feel transactional. The student hears: 'I helped you, but here is a condition.' Unconditional positive regard means the care has no strings attached, especially at the point of goodbye.",
nextStep:-1
}
]
}
],
expertPath:[
"Approach calmly at a distance and lead with concern, not correction.",
"Validate Kieran's frustration and use affect labelling to name his emotion.",
"Reframe his negative self-belief by acknowledging his courage rather than dismissing his feelings.",
"Park consequences and focus on a collaborative plan forward.",
"Give permission not to disclose while gently signposting support.",
"End with a genuine, unconditional relational close and commit to follow up."
],
tips:[
"Always lead with connection before correction when a student is visibly distressed.",
"Lower your physical height and keep a respectful distance to reduce perceived threat.",
"Name emotions to activate the prefrontal cortex and calm the amygdala.",
"Never use the word 'but' after an empathy statement -- it cancels the empathy.",
"Park consequences until the student is regulated enough to process them.",
"Follow up the next day -- consistency builds trust over time."
],
learningPoints:[
{icon:"\uD83E\uDDE0",text:"When a student is in amygdala hijack, the rational brain is offline. No amount of reasoning or consequences will work until they feel safe."},
{icon:"\u2764\uFE0F",text:"Connection before correction is not soft -- it is strategic. It is the fastest route to de-escalation and the only route to lasting behaviour change."},
{icon:"\uD83D\uDD11",text:"The phrase 'rules are rules' removes our humanity. Relational approaches do not mean ignoring boundaries -- they mean enforcing them with compassion."}
]
},

// === SCENARIO 2: CLASSROOM DISRUPTION ===
{
id:1,title:"Classroom Disruption",icon:"classroom",emoji:"\uD83D\uDCDA",
yearTag:"Year 8",
description:"A Year 8 student keeps calling out and throwing paper. When asked to stop, they stand up and say \"Make me\" in front of the whole class.",
startEscalation:5,
steps:[
{
narrative:"You are teaching your Year 8 class. It is mid-lesson and most students are working quietly. However, Tyler has been calling out repeatedly, making comments to get laughs from the students around him. He has thrown a ball of paper at another student. You have already given him a verbal warning five minutes ago.\n\nYou are mid-explanation when Tyler calls out again: \"This is so boring!\" and flicks an eraser across the table. Several students laugh. Twenty-eight pairs of eyes turn to watch how you handle this.",
prompt:"The class is watching. How do you respond?",
choices:[
{
text:"Without breaking your stride, walk slowly toward Tyler's area of the room. Lower your voice so only nearby students can hear: \"Tyler, I can see you're finding this tricky to focus on. I need you to hold it together for the next ten minutes. Can you do that for me?\"",
escalationChange:-1,
quality:"good",
feedback:"Tyler looks slightly caught off guard by the private, low-key approach. He shrugs and mutters \"Whatever\" but stops throwing things. A few students turn back to their work.",
psychology:"Tactical ignoring of the audience, combined with proximity and lowered voice, removes the performance element. By framing it as a request ('Can you do that for me?') rather than a demand, you preserved Tyler's autonomy. The phrase 'for me' subtly invokes the relationship. Public confrontation would have made the classroom the stage for a power struggle.",
nextStep:1
},
{
text:"From the front of the room, clearly and firmly: \"Tyler, that's your second warning. I need you to stop calling out and focus on your work. If it happens again, there will be a consequence.\"",
escalationChange:1,
quality:"ok",
feedback:"Tyler sits up straighter and crosses his arms. \"I was only saying it's boring. Everyone thinks it.\" A few students nod. The class is now divided -- some annoyed at Tyler, some quietly agreeing.",
psychology:"A clear, public warning is a common approach but it creates a stage. Tyler now has to perform for his audience. Backing down would mean losing face. The escalating consequence ('if it happens again') is a veiled ultimatum which can trigger defiance in students who feel they have nothing to lose. You have been fair, but the public arena works against you.",
nextStep:1
},
{
text:"\"Right, Tyler, that's enough. Move seats -- go and sit at the empty desk at the front. Now.\"",
escalationChange:2,
quality:"bad",
feedback:"Tyler stands up abruptly. \"No. I'm not moving. Make me.\" The entire class falls silent. This is now a public standoff.",
psychology:"A direct command to move seats in front of peers is experienced as humiliation. The word 'now' adds urgency that feels threatening. Tyler's response -- 'Make me' -- is a classic fight response: he is not thinking rationally, he is protecting his social status. The amygdala has taken over. You have inadvertently created the confrontation you were trying to avoid.",
nextStep:1
},
{
text:"You ignore Tyler and continue teaching, hoping it will pass.",
escalationChange:1,
quality:"bad",
feedback:"Tyler takes the lack of response as permission. He leans back in his chair and starts drumming on the desk. Other students begin to lose focus. Someone whispers, \"How come he gets away with it?\"",
psychology:"While tactical ignoring can work for minor, attention-seeking behaviours, Tyler has escalated beyond that threshold. The other students' reaction reveals the hidden cost: inaction undermines your authority with the whole class and signals that disruption has no consequence. The social contract of the classroom begins to erode.",
nextStep:1
}
]
},
// Step 1
{
narrative:"The situation has developed. Tyler is now standing behind his chair with his arms folded. Whether he stood up of his own accord or in response to an instruction, the effect is the same: the class is watching. Tyler looks defiant but also slightly anxious -- his bravado is a mask.\n\n\"I'm not doing this stupid work,\" he says loudly. \"And you can't make me.\"",
prompt:"Tyler is standing and the whole class is watching. What do you do?",
choices:[
{
text:"Take a breath. Turn to the class calmly: \"Everyone, carry on with your work please.\" Then walk to Tyler and speak quietly: \"Tyler, I'm not going to argue with you in front of everyone. I can see something's not right. Let's step outside for a minute -- just you and me.\"",
escalationChange:-2,
quality:"good",
feedback:"Tyler hesitates. The audience has been redirected. Without the pressure of being watched, his shoulders drop. He walks to the door, trying to look casual. \"Fine. Whatever.\"",
psychology:"Three crucial things happened: (1) You redirected the audience, removing Tyler's stage. (2) You acknowledged something is wrong without labelling him as the problem. (3) You offered a face-saving exit. The phrase 'just you and me' signals safety and privacy. Removing the audience is one of the most powerful de-escalation strategies in a classroom context.",
nextStep:2
},
{
text:"\"Tyler, I understand you're frustrated, but standing up and refusing is not going to help. Sit down, have a look at the first question, and I'll come and help you in a minute.\"",
escalationChange:0,
quality:"ok",
feedback:"Tyler does not sit down but he stops escalating. \"The questions are stupid,\" he mutters, but he glances at the sheet. Stalemate -- not worse, not resolved.",
psychology:"The empathy-then-redirect approach is sound, but asking him to sit down publicly still requires him to visibly comply, which can feel like submission. The offer to help is good but slightly too distant ('in a minute'). When a student is escalating, 'in a minute' can feel dismissive. Immediacy matters.",
nextStep:2
},
{
text:"\"Right, Tyler, you've made your choice. Step outside and wait for me. I'll be calling home tonight.\"",
escalationChange:2,
quality:"bad",
feedback:"\"Call them then! They won't care!\" Tyler shoves his chair under the desk with a bang and storms toward the door. He slams it behind him. The class is shaken. Two students look upset.",
psychology:"'You've made your choice' implies the student is deliberately choosing to misbehave. For a dysregulated student, there was no rational choice -- the behaviour is survival-driven. Threatening to call home can trigger anxiety about family dynamics you may know nothing about. Tyler's 'they won't care' is revealing -- this may be a student who feels unsupported at home too.",
nextStep:2
}
]
},
// Step 2
{
narrative:"You and Tyler are now in the corridor (or the doorway area). The class is working inside. Tyler leans against the wall, arms still folded, but the intensity has dropped now that the audience is gone.\n\n\"I hate Maths,\" he says. \"I can never do it and then I look stupid in front of everyone.\"",
prompt:"Tyler has revealed the root issue. How do you respond?",
choices:[
{
text:"\"I hear you, Tyler. Feeling like you can't do something, especially in front of your mates -- that's really hard. I don't think you're stupid. I think the work might not be at the right level for you yet, and that's on me to sort out.\"",
escalationChange:-2,
quality:"good",
feedback:"Tyler unfolds his arms. He looks surprised that you took some responsibility. \"It's not your fault,\" he says, almost generously. \"I just... I don't get fractions. I never have.\"",
psychology:"Owning partial responsibility ('that's on me to sort out') is a powerful de-escalation tool. It models accountability and removes the blame dynamic. Tyler expected confrontation and received empathy -- this mismatch disrupts the escalation pattern. You also separated the behaviour from the person: 'I don't think you're stupid' validates his worth even while the behaviour needs addressing.",
nextStep:3
},
{
text:"\"I understand Maths is tough for you, but the way you handled it in there wasn't okay. You disrupted the lesson and threw things. We need to talk about that.\"",
escalationChange:1,
quality:"ok",
feedback:"Tyler kicks the wall gently. \"Yeah well, maybe if the lesson wasn't so boring I wouldn't have to.\" He is deflecting but not escalating significantly. The moment of openness has passed.",
psychology:"Addressing behaviour too quickly after a student shows vulnerability shuts down the emotional processing. Tyler shared something real ('I look stupid') and the response pivoted to his actions. While accountability matters, the timing is premature. The rule of thumb: regulate first, then relate, then reason. You jumped to 'reason' too quickly.",
nextStep:3
},
{
text:"\"Well, throwing erasers and calling out isn't going to help you learn, is it? If you'd asked for help quietly, I would have come over.\"",
escalationChange:1,
quality:"bad",
feedback:"Tyler rolls his eyes. \"Yeah right. You were too busy with your explanation. You never come round to help me.\" There is hurt behind the defiance.",
psychology:"This response is technically accurate but emotionally tone-deaf. It puts the responsibility entirely on the student ('if you'd asked for help') without acknowledging the barrier: for many students, asking for help publicly is humiliating. Tyler's behaviour WAS his way of asking for help -- just in the only language his dysregulated brain could manage.",
nextStep:3
}
]
},
// Step 3
{
narrative:"Tyler is calmer now. He has shared that he struggles with the work and feels embarrassed. The defensiveness is fading. He picks at the strap of his bag and says:\n\n\"So... am I in trouble?\"",
prompt:"Tyler is asking about consequences. How do you handle this?",
choices:[
{
text:"\"We'll sort all of that out properly later. Right now, I want to work out a plan so you don't end up in this situation again. What if I set you different work at your level, and you sit nearer to me so I can help more easily? Would that work?\"",
escalationChange:-1,
quality:"good",
feedback:"Tyler thinks about it. \"I don't want people knowing I've got easy work.\" This is a practical concern, not defiance. You can problem-solve together.",
psychology:"Forward-focused, collaborative problem-solving engages the prefrontal cortex. By offering choices and asking for Tyler's input, you are treating him as a partner in the solution. His concern about peers seeing 'easy work' shows he is now thinking rationally -- a sign that he has returned to his window of tolerance. The de-escalation has worked.",
nextStep:4
},
{
text:"\"There will need to be some kind of consequence for the disruption, Tyler. That's only fair to the other students. But I'll make sure it's proportionate and I'll also make sure you get more support with the Maths.\"",
escalationChange:0,
quality:"ok",
feedback:"Tyler sighs. \"Okay. Fair enough.\" He is not happy but he accepts it. A reasonable outcome, though the relational opportunity has been partially replaced by a transactional one.",
psychology:"Fairness-based framing ('that's fair to the other students') is logical but operates at the reasoning level. Tyler is only just returning to his window of tolerance, so abstract concepts of fairness are harder to process. Combining consequence with support is balanced, but leading with consequence rather than plan may feel like the help is conditional on punishment.",
nextStep:4
},
{
text:"\"Yes, Tyler, you are. You threw things, you refused to work, and you were rude. There have to be consequences.\"",
escalationChange:2,
quality:"bad",
feedback:"Tyler pushes off the wall. \"Fine. Whatever. I knew this would happen.\" His face hardens and the connection you built starts to crumble. He is expecting punishment, not support.",
psychology:"Listing the offences feels like prosecution rather than education. 'I knew this would happen' reveals Tyler's script: adults pretend to care but always resort to punishment. This confirms his internal working model. The moment of vulnerability he showed has been punished, making it less likely he will open up in future. We have reinforced the cycle rather than breaking it.",
nextStep:4
}
]
},
// Step 4
{
narrative:"You have been outside for about four minutes. Tyler seems ready to re-enter the classroom, but there is anxiety on his face.\n\n\"Everyone's going to stare at me when I go back in,\" he says.",
prompt:"Tyler is worried about re-entering the classroom. How do you support this transition?",
choices:[
{
text:"\"Tell you what -- I'll go in first, get everyone focused on a task, and then you come in quietly and sit down. I'll come straight over with a different worksheet so you've got something to do. Nobody will notice.\"",
escalationChange:-1,
quality:"good",
feedback:"Tyler nods, relieved. \"Okay. Yeah.\" You re-enter, settle the class, and Tyler slips back in. You immediately provide him with accessible work and a quiet \"Nice one\" as you place it on his desk. The lesson continues.",
psychology:"Micro-planning the re-entry removes uncertainty, which reduces anxiety. The 'nobody will notice' reassurance addresses his core fear (public humiliation). Providing work immediately upon return gives him a task to anchor to and signals that the expectation is learning, not punishment. The quiet 'Nice one' is a powerful micro-affirmation.",
nextStep:5
},
{
text:"\"Just walk in normally and sit down. Nobody's going to say anything -- I'll make sure of it. Come on, let's go.\"",
escalationChange:0,
quality:"ok",
feedback:"Tyler follows you in but looks uncomfortable. A couple of students glance up. Tyler sits down quickly and hunches over his desk. The situation is resolved but not comfortably.",
psychology:"The reassurance is kind but lacks practical detail. 'I'll make sure of it' is a promise you may not be able to keep -- students communicate through glances and whispers. Walking in together marks Tyler out. A staged re-entry with a distraction for the class would have been smoother. The intent is right but the execution could be more thoughtful.",
nextStep:5
},
{
text:"\"Come on, Tyler, don't overthink it. Just go in and get on with your work. The longer we stand out here, the more attention it'll get.\"",
escalationChange:1,
quality:"ok",
feedback:"Tyler goes back in but he looks tense. He sits down and puts his head on his arms for a minute before reluctantly picking up a pen. The situation is technically resolved but Tyler feels unsupported.",
psychology:"Minimising his anxiety ('don't overthink it') dismisses a valid social concern. For adolescents, peer perception is not trivial -- it is neurologically significant. The adolescent brain is hypersensitive to social evaluation. What feels like 'overthinking' to an adult is a genuine threat response for a teenager. Acknowledging and planning around this shows social awareness.",
nextStep:5
}
]
},
// Step 5
{
narrative:"The lesson ends. Students begin packing away. Tyler hangs back slightly, hovering near the door as others leave. He is not quite making eye contact but he is clearly waiting to say something.",
prompt:"Tyler is lingering. What do you do?",
choices:[
{
text:"Catch his eye with a warm, brief look and say: \"Tyler, good effort getting back on track today. I meant what I said about sorting the work out -- I'll have something ready for you next lesson. Have a good lunch.\"",
escalationChange:-1,
quality:"good",
feedback:"Tyler almost smiles. \"Yeah... cheers, Miss/Sir.\" He leaves. You note to prepare differentiated materials and to have a brief word with the SENCO about Tyler's Maths needs. The cycle has been interrupted.",
psychology:"Affirming the effort, not just the outcome, reinforces a growth mindset. Following through on your promise (preparing materials) is essential -- if Tyler arrives next lesson and nothing has changed, trust is broken. The warm, brief close respects his need to not make a big deal of it while also cementing the relational repair.",
nextStep:-1
},
{
text:"\"Tyler, quick word. I need you to understand that what happened today can't happen again. Next time, just put your hand up if you need help, okay?\"",
escalationChange:0,
quality:"ok",
feedback:"Tyler nods quickly. \"Yeah, okay.\" He leaves. The instruction is clear but the closing note is correctional rather than relational.",
psychology:"Ending on an instruction rather than a connection puts the emphasis back on compliance rather than growth. Tyler will remember this interaction as 'the time I got told off' rather than 'the time a teacher listened to me.' The relational repair is incomplete. A brief positive close would have anchored the experience differently in his emotional memory.",
nextStep:-1
},
{
text:"You are busy sorting resources and do not notice Tyler waiting. He leaves without speaking.",
escalationChange:1,
quality:"bad",
feedback:"Tyler walks out feeling like the corridor conversation meant nothing. By the next lesson, his attitude has hardened again. The opportunity for sustained change was missed.",
psychology:"In the busyness of teaching, these micro-moments are easy to miss. But for Tyler, lingering took courage -- it was a bid for connection. When bids for connection go unnoticed, the student internalises the message: 'I'm not worth paying attention to.' In attachment theory, these missed bids accumulate and shape how the student relates to adults in school.",
nextStep:-1
}
]
}
],
expertPath:[
"Use proximity and lowered voice to address disruption privately, preserving Tyler's dignity.",
"Remove the audience by redirecting the class, then offer a face-saving exit to the corridor.",
"Validate the underlying struggle and take shared responsibility for the learning gap.",
"Park consequences and co-create a forward-focused plan with Tyler's input.",
"Micro-plan the re-entry to reduce Tyler's social anxiety about returning to class.",
"Close with a warm affirmation and commit to concrete follow-through for next lesson."
],
tips:[
"Remove the audience wherever possible -- adolescents will escalate to protect social status.",
"Never issue ultimatums publicly. The student is forced to choose between compliance and dignity.",
"Disruption is often communication. Ask yourself: what is this behaviour trying to tell me?",
"Take partial responsibility where genuine ('that's on me to sort out') -- it models accountability.",
"Plan re-entry carefully. The transition back into the classroom is where progress can unravel.",
"Follow through on promises made during de-escalation. Broken promises break trust permanently."
],
learningPoints:[
{icon:"\uD83C\uDFAD",text:"For many students, disruptive behaviour is a mask for feelings of inadequacy. Addressing the behaviour without addressing the cause guarantees it will recur."},
{icon:"\uD83D\uDC65",text:"Removing the audience is one of the most powerful de-escalation tools. Without spectators, most students will de-escalate quickly because the performance has no purpose."},
{icon:"\uD83D\uDD04",text:"Regulate, Relate, Reason -- in that order. A dysregulated student cannot learn from consequences, engage in problem-solving, or take responsibility for their actions."}
]
},

// === SCENARIO 3: FRIENDSHIP FALLOUT ===
{
id:2,title:"Friendship Fallout",icon:"playground",emoji:"\uD83E\uDD1D",
yearTag:"Year 9",
description:"Two Year 9 students are having a heated argument in the playground that is attracting a crowd. One is crying, the other is shouting accusations.",
startEscalation:6,
steps:[
{
narrative:"It is break time. You are on duty in the playground when you notice a cluster of students forming near the picnic benches. As you approach, you can hear shouting.\n\nAisha is standing with tears streaming down her face, arms wrapped around herself. Priya is pointing at her and shouting: \"You told everyone! I trusted you and you told everyone! You're a snake!\"\n\nAbout fifteen students are watching. Some are filming on phones. Others are egging them on. The situation is volatile and could become physical.",
prompt:"You are arriving at the scene. What is your first action?",
choices:[
{
text:"Walk calmly but purposefully into the space between them. Use a clear but not shouting voice: \"Okay everyone, break's over here. Move along please.\" Direct a nearby student: \"Put that phone away now.\" Then to both girls: \"I can see you're both really upset. Let's move somewhere private. Aisha, come with me. Priya, stay here -- I'll come back for you in one moment.\"",
escalationChange:-2,
quality:"good",
feedback:"The crowd begins to disperse. The students filming pocket their phones when addressed directly. Aisha moves with you, still crying. Priya stays, trembling with anger but no longer performing for an audience.",
psychology:"Three priorities were addressed simultaneously: (1) Dispersing the crowd removes the fuel. Conflict escalates with an audience. (2) Physically positioning between them creates a barrier. (3) Separating them is essential -- two escalated individuals cannot de-escalate in each other's presence. Dealing with the phone filming addresses safeguarding and removes the sense of spectacle.",
nextStep:1
},
{
text:"Step between them and say firmly: \"Both of you, stop this right now. Whatever's going on, shouting at each other in the playground is not going to solve it. Come with me, both of you.\"",
escalationChange:0,
quality:"ok",
feedback:"Priya turns her anger toward you: \"She's the one who started it! She told everyone my business!\" Aisha sobs louder. The crowd is still watching. Both students are too escalated to move together.",
psychology:"Telling both students to come with you simultaneously keeps them in proximity and does not account for the power dynamic -- Priya is in attack mode and Aisha is in distress. Walking together would either continue the argument or force a suppressed silence that explodes later. Separating them first is essential for safety and de-escalation.",
nextStep:1
},
{
text:"Shout over the noise: \"RIGHT! Everyone move! You two -- headteacher's office, NOW!\"",
escalationChange:2,
quality:"bad",
feedback:"The shouting adds to the chaos. Priya screams, \"I'M NOT GOING ANYWHERE!\" Aisha sinks to the ground, overwhelmed. The crowd gets more excited. A colleague has to come and help.",
psychology:"Matching the volume and intensity of the situation is a natural but counterproductive instinct. Shouting activates every student's threat response -- including bystanders. The instruction to go to the head's office feels like punishment when neither student has been heard. In crowd situations, a calm, authoritative presence is more effective than volume. Your regulation sets the tone.",
nextStep:1
},
{
text:"Approach Priya directly and say: \"Priya, what's going on here? Tell me what happened.\"",
escalationChange:1,
quality:"ok",
feedback:"Priya launches into a furious account while pointing at Aisha: \"She told Jade about my mum and dad splitting up. The whole year knows now!\" This is a significant disclosure made publicly. The crowd murmurs. Priya realises what she has said and her anger turns to humiliation.",
psychology:"Asking an escalated student to explain publicly was well-intentioned but risky. In her heightened state, Priya could not filter what she shared, resulting in further public exposure of the very private information she was angry about. Always separate first, listen second. Public questioning during a crisis can cause secondary harm.",
nextStep:1
}
]
},
// Step 1
{
narrative:"You have managed to partially separate the students, with or without help from colleagues. You are now with Aisha near the entrance to the school building. She is crying hard, her breathing is erratic, and she keeps repeating: \"I didn't mean to. I only told one person. I didn't know they'd tell everyone.\"\n\nPriya is with another member of staff nearby but is pacing and still visibly agitated.",
prompt:"You are with Aisha, who is in significant distress. What do you do?",
choices:[
{
text:"Position yourself beside her rather than in front of her. Speak softly: \"Aisha, I'm here. You don't need to explain anything right now. Let's just focus on breathing for a minute. In through the nose... out through the mouth. That's it. You're safe.\"",
escalationChange:-2,
quality:"good",
feedback:"Aisha's breathing gradually slows. The sobbing becomes quieter. After a minute, she wipes her face and says shakily: \"I really didn't mean for everyone to know.\"",
psychology:"Co-regulation in action. Positioning beside rather than in front reduces perceived confrontation. Guiding breathing activates the parasympathetic nervous system (the body's calming system). The phrase 'you're safe' directly addresses the threat the amygdala is responding to. You did not ask her to explain or justify -- you prioritised physiological regulation first.",
nextStep:2
},
{
text:"\"Aisha, I need you to calm down so you can tell me what happened. Take a deep breath. Now, did you share something Priya told you in confidence?\"",
escalationChange:0,
quality:"ok",
feedback:"Aisha tries to speak through her sobs but can barely get words out. \"I... she... I only told... I didn't...\" She is hyperventilating now, trying to explain and breathe at the same time.",
psychology:"'I need you to calm down' is one of the least effective phrases in de-escalation. It implies the student is choosing to be upset and should simply stop. Asking her to explain while crying forces cognitive processing when her brain is in survival mode. The prefrontal cortex (the explaining part) is offline during acute distress. Regulation must come before narration.",
nextStep:2
},
{
text:"\"Look Aisha, I know you're upset, but Priya is really hurt. Did you tell people about her parents? Because if you did, that's a serious breach of trust.\"",
escalationChange:2,
quality:"bad",
feedback:"Aisha's crying intensifies. \"Even you're blaming me!\" She pushes past you and runs into the toilets, locking herself in a cubicle.",
psychology:"Taking Priya's side while Aisha is in acute distress constitutes secondary harm. Both students deserve to be heard, but not simultaneously. Framing Aisha's action as 'a serious breach of trust' during a crisis is a judgment delivered at the worst possible moment. In a dispute between two students, the first task is to stabilise both, then hear from each individually, then bring them together if appropriate.",
nextStep:2
}
]
},
// Step 2
{
narrative:"Aisha has calmed enough to talk. She tells you that Priya told her, in confidence, that her parents are separating. Aisha told her best friend Jade, who then told others. Aisha feels terrible but also feels the situation has been blown out of proportion.\n\n\"Priya's acting like I did it on purpose. I made a mistake. But she called me a snake in front of everyone. That's not fair either.\"\n\nMeanwhile, the colleague with Priya reports that Priya has calmed slightly but is demanding that Aisha be punished.",
prompt:"Both girls have legitimate grievances. How do you proceed?",
choices:[
{
text:"\"You're right that telling Jade was a mistake, and you're also right that being shouted at in front of everyone was horrible. Both of those things can be true at the same time. I'm not here to decide who's right and who's wrong -- I want to help you both sort this out. How would you feel about talking to Priya, not right now but maybe later, with me there to help?\"",
escalationChange:-1,
quality:"good",
feedback:"Aisha sniffs and nods slowly. \"Maybe... but not yet. I'm not ready.\" This is a healthy boundary and shows she is thinking clearly again.",
psychology:"Holding space for both truths simultaneously ('both of those things can be true') is a sophisticated relational skill. It avoids triangulation (being pulled onto one side). Offering a facilitated conversation rather than imposed punishment points toward restorative practice. Aisha's 'not yet' shows she is self-regulating and you respected that without pushing.",
nextStep:3
},
{
text:"\"I understand how you feel, Aisha. What you did was wrong -- sharing someone's private information -- but I can see you didn't mean for it to spread. I think you need to apologise to Priya when you're ready.\"",
escalationChange:0,
quality:"ok",
feedback:"Aisha folds her arms. \"Why should I apologise when she called me a snake in front of the whole school? She should apologise too.\" The conversation has become about who is more wrong.",
psychology:"Directing Aisha to apologise before she has fully processed the situation skips the relational repair process. A genuine apology cannot be instructed -- it has to emerge from understanding. By focusing on Aisha's wrongdoing without equally addressing Priya's public humiliation of Aisha, the response felt one-sided, triggering a defensive 'what about her?' reaction.",
nextStep:3
},
{
text:"\"To be honest, Aisha, sharing someone's secret was a really unkind thing to do. Priya had every right to be upset. I think you need to think carefully about what kind of friend you want to be.\"",
escalationChange:2,
quality:"bad",
feedback:"Aisha's face crumples. \"I KNOW it was wrong! I already feel terrible!\" She begins crying again, harder than before. The trust she placed in you by opening up has been met with moral judgment.",
psychology:"Moral lecturing during emotional vulnerability causes shame, not growth. Aisha already knew she was wrong -- she said so herself. Reinforcing her guilt does not build understanding; it compounds distress. The phrase 'what kind of friend you want to be' is a character judgment that goes beyond the behaviour. Shame drives disconnection, not repair.",
nextStep:3
}
]
},
// Step 3
{
narrative:"Some time has passed. Both girls have had space. You have checked on Priya, who has calmed significantly and is sitting quietly with the other colleague. She looks sad rather than angry now.\n\nYou bring both students together in a private room. They sit on opposite sides of a table. Neither makes eye contact. Priya's arms are folded. Aisha is looking at the floor.\n\nThe silence is heavy.",
prompt:"You are facilitating a restorative conversation. How do you begin?",
choices:[
{
text:"\"Thank you both for coming to sit down together. That takes courage. I'm not here to judge or decide who's right. I'd like each of you to share how you're feeling -- not what happened, but how it made you feel. Priya, would you like to go first? Take your time.\"",
escalationChange:-1,
quality:"good",
feedback:"Priya takes a shaky breath. \"I feel... betrayed. And embarrassed. Everyone knows about my family now and I didn't want anyone to know.\" Aisha listens, her eyes filling with tears. \"I feel terrible,\" Aisha whispers. \"I didn't think it would spread. I'm sorry, Priya. I really am.\"",
psychology:"Restorative practice centres on feelings, not facts. Asking 'how did it make you feel?' rather than 'what happened?' shifts the conversation from accusation to vulnerability. When Priya expressed hurt rather than anger, it activated Aisha's empathy rather than her defences. This is the power of restorative dialogue -- it creates the conditions for genuine remorse, not performed compliance.",
nextStep:4
},
{
text:"\"Right, let's sort this out. Aisha, Priya is upset because you shared private information. Priya, Aisha didn't intend for it to spread. Both of you made mistakes and both of you got hurt. Can you see that?\"",
escalationChange:0,
quality:"ok",
feedback:"Priya mutters, \"I didn't make a mistake. She did.\" Aisha looks offended. The balance you tried to create has backfired because Priya does not see her shouting as equivalent to Aisha's breach of confidence.",
psychology:"Summarising the situation on their behalf, rather than letting them speak, removes their agency in the process. Telling students what happened and how to see it is directive, not restorative. The key difference: restorative practice is done WITH students, not TO them. Both need to arrive at understanding through their own words, not through your interpretation.",
nextStep:4
},
{
text:"\"Aisha, I'd like you to start by telling Priya that you understand why she's upset and that you're sorry.\"",
escalationChange:1,
quality:"ok",
feedback:"Aisha says flatly, \"Sorry.\" It is clearly performed, not felt. Priya scoffs. \"You don't even mean it.\" The conversation deteriorates.",
psychology:"Scripted apologies are performative and both parties can tell. Priya's dismissal of the apology shows that forced remorse has no relational currency. Genuine apology emerges when the person truly understands the impact of their actions -- and this understanding comes from hearing the other person's feelings, not from being told to say sorry. The process was rushed.",
nextStep:4
}
]
},
// Step 4
{
narrative:"The conversation has been going for about ten minutes. Both girls have had a chance to speak. The key moments have been shared: Priya's hurt at her private information being spread; Aisha's regret and her own hurt at being publicly called names.\n\nThere is a fragile but genuine softening between them. Priya says quietly: \"I shouldn't have called you a snake in front of everyone. That wasn't okay either.\"\n\nAisha replies: \"And I should never have told Jade. I'm genuinely sorry.\"",
prompt:"The students have reached a moment of mutual acknowledgment. What do you do?",
choices:[
{
text:"Let the silence sit for a moment. Then: \"I think you've both shown real maturity just now. What would you both need to feel okay going forward? Is there anything that would help?\"",
escalationChange:-2,
quality:"good",
feedback:"Priya says, \"I need people to stop talking about my family.\" Aisha says, \"I'll talk to Jade. And I'll shut down anyone who brings it up.\" Priya looks at her and nods. It is not fixed, but it is a start.",
psychology:"Honouring the silence respects the emotional weight of the moment. Rushing to fill silence after a breakthrough would diminish it. Asking 'What would you need?' shifts the ownership to the students, empowering them to define their own resolution. Aisha's offer to actively protect Priya going forward is restorative action -- it goes beyond apology to accountability.",
nextStep:5
},
{
text:"\"That's really good, both of you. I think you've learned an important lesson about trust and friendship. Let's shake hands and move on.\"",
escalationChange:0,
quality:"ok",
feedback:"The girls awkwardly shake hands. It feels performative. They leave together but there is an unspoken sense that things are not fully resolved.",
psychology:"'Shake hands and move on' is a common but shallow resolution. It prioritises visible closure over genuine repair. The 'lesson about trust' framing is teacherly and slightly patronising for Year 9 students who have just navigated complex emotions. Restorative practice does not need a neat ending -- it needs authentic next steps that the students themselves define.",
nextStep:5
},
{
text:"\"Right, now that you've both apologised, I need to talk about consequences. Aisha, sharing private information will go on your behaviour record. Priya, the shouting and name-calling will be noted too.\"",
escalationChange:2,
quality:"bad",
feedback:"Both girls look stunned. Priya: \"But we just sorted it out!\" Aisha: \"You said you weren't here to judge!\" They leave the room unified -- but against you, not with each other.",
psychology:"Introducing punitive consequences immediately after a restorative conversation undermines the entire process. The students did the hard emotional work, and the reward was punishment. This teaches them that opening up leads to consequences -- next time, they will not engage honestly. Restorative and punitive approaches can coexist, but the timing and framing matter enormously.",
nextStep:5
}
]
},
// Step 5
{
narrative:"The immediate crisis is resolved. Both girls have left, separately, to return to lessons. You have a moment to reflect and decide on next steps.\n\nYou need to consider: follow-up for both students, communication with form tutors, any safeguarding actions regarding Priya's family situation, and whether any phone footage needs to be addressed.",
prompt:"What are your priority follow-up actions?",
choices:[
{
text:"(1) Brief both form tutors on the situation, framing it as a pastoral concern rather than a behaviour incident. (2) Log a safeguarding note about Priya's family situation through the proper channels. (3) Ask IT/pastoral to identify and address any phone footage. (4) Schedule individual check-ins with both girls for the following day. (5) Monitor the friendship over the coming week.",
escalationChange:-1,
quality:"good",
feedback:"A thorough, holistic response. Both students are followed up appropriately, the safeguarding concern is logged, and the digital dimension is addressed. This is professional, proportionate and caring.",
psychology:"Effective follow-up is where de-escalation becomes sustained change. Framing it as pastoral rather than behavioural ensures both girls receive support rather than punishment. Logging the safeguarding concern is a professional obligation. Addressing phone footage prevents online re-escalation. Monitoring the friendship acknowledges that one conversation does not resolve complex social dynamics.",
nextStep:-1
},
{
text:"Brief both form tutors and ask them to keep an eye on the girls. Log the incident and move on with your day.",
escalationChange:0,
quality:"ok",
feedback:"The basics are covered but the safeguarding concern about Priya's family may not have been formally logged, and the phone footage issue is unaddressed. Adequate but not thorough.",
psychology:"In the pace of a school day, this level of follow-up is common and understandable. However, Priya's family situation constitutes a welfare concern that requires formal logging. Phone footage from the incident could resurface on social media, causing renewed distress. The difference between adequate and excellent follow-up often determines whether the resolution holds.",
nextStep:-1
},
{
text:"Issue behaviour points to both students for the public disturbance and move on.",
escalationChange:2,
quality:"bad",
feedback:"Both students receive the notification and feel betrayed. Priya tells her form tutor, \"I told a teacher about my parents splitting up and got a behaviour point.\" Aisha refuses to engage with staff for the rest of the week.",
psychology:"Reducing a complex interpersonal conflict to a behaviour point misses everything that matters. It punishes students for having emotions. The message received: 'expressing distress in school leads to punishment.' This approach also ignores the safeguarding dimension entirely. Behaviour systems exist to maintain order, but they must not override professional judgment about what students actually need.",
nextStep:-1
}
]
}
],
expertPath:[
"Disperse the crowd, confiscate phones, physically separate the two students and assign a colleague to one.",
"Co-regulate Aisha through guided breathing and reassurance before asking for any explanation.",
"Validate both perspectives simultaneously without taking sides or directing an immediate apology.",
"Begin a restorative conversation focused on feelings rather than facts, letting each student speak in turn.",
"Allow the natural resolution to breathe, then ask the students to define their own next steps.",
"Complete thorough follow-up: form tutors, safeguarding log, phone footage, and individual check-ins."
],
tips:[
"In crowd situations, dispersing bystanders is your first priority -- conflict feeds on an audience.",
"Always separate students in conflict before attempting any conversation.",
"Never ask a dysregulated student to explain themselves. Regulate first, narrate later.",
"Hold space for multiple truths. Most conflicts involve hurt on both sides.",
"Restorative conversations focus on feelings, not facts. 'How did it make you feel?' not 'What happened?'",
"Always check for safeguarding concerns beneath the surface of peer conflict."
],
learningPoints:[
{icon:"\uD83D\uDCF1",text:"Phone filming during incidents adds a digital dimension to peer conflict. Footage can be shared, edited and used for bullying. Addressing this is a safeguarding responsibility."},
{icon:"\u2696\uFE0F",text:"In peer conflict, the instinct to find who is 'right' and who is 'wrong' is unhelpful. Most conflicts involve hurt on both sides. Restorative practice holds space for complexity."},
{icon:"\uD83E\uDE79",text:"Co-regulation (guiding breathing, speaking softly, creating safety) must come before any attempt at conversation or resolution. The body must calm before the mind can process."}
]
},

// === SCENARIO 4: DEFIANT REFUSAL ===
{
id:3,title:"Defiant Refusal",icon:"defiant",emoji:"\uD83D\uDCF1",
yearTag:"Year 11",
description:"A Year 11 student calmly but firmly refuses to hand over their phone when asked, stating \"It's my property, you can't take it.\"",
startEscalation:3,
steps:[
{
narrative:"You are walking through the sixth form corridor when you notice Zara, a Year 11 student, sitting in an alcove during lesson time. She is looking at her phone intently, and you can see she is scrolling through what appears to be social media. She should be in her English lesson.\n\nAs you approach, Zara looks up. She does not seem distressed or upset -- she looks composed and slightly defiant.\n\n\"I know what you're going to say,\" she says. \"I'm not going to English and I'm not giving you my phone.\"",
prompt:"Zara has pre-empted you. She is calm but firm. How do you respond?",
choices:[
{
text:"Smile slightly. \"Well, you've saved me a sentence. I appreciate the honesty. I'm not here for your phone -- I'm wondering why you're out here instead of in English. Everything okay?\"",
escalationChange:-1,
quality:"good",
feedback:"Zara seems slightly disarmed. She was expecting confrontation and got curiosity instead. \"English is pointless. I'm not going to pass anyway, so what's the point of sitting there?\" Her defiance has a reason.",
psychology:"By not taking the bait on the phone issue, you removed the power struggle entirely. Zara had prepared her defence for a phone confiscation battle, and when that battle did not materialise, her defiant stance had no target. Leading with genuine curiosity ('Everything okay?') signals that you see her as a person, not a rule-breaker. This wrong-foots the defensive brain.",
nextStep:1
},
{
text:"\"Zara, school policy is clear -- phones should be away during lesson time. I need you to put it in your bag, and then we can talk about why you're not in English.\"",
escalationChange:1,
quality:"ok",
feedback:"\"It's my property. The school can't confiscate my property.\" Zara holds the phone more tightly. The conversation is now about the phone, not about Zara.",
psychology:"Leading with policy turns the interaction into a legalistic debate. Zara is prepared for this argument and will win it in her own mind regardless of what you say. When we lead with rules, we invite resistance to rules. The phone is a symptom, not the problem. By focusing on the symptom, we miss the cause and create a power struggle over an object.",
nextStep:1
},
{
text:"\"Zara, hand the phone over please. You know the rules.\"",
escalationChange:2,
quality:"bad",
feedback:"\"No.\" Zara is calm, almost smiling. \"It's my property. You can't legally take it. I know my rights.\" She is now in a composed power position, and you have entered a negotiation you cannot win through force.",
psychology:"A direct demand to a calm, intelligent, Year 11 student who has already stated their position creates an immediate impasse. Unlike an angry student, Zara is not dysregulated -- she is strategically asserting her autonomy. This requires a different approach than de-escalating anger. You cannot out-authority a student who has decided not to recognise your authority. You need to find a different way in.",
nextStep:1
},
{
text:"\"Fine. If you won't go to English, at least put the phone away and do some revision out here.\"",
escalationChange:0,
quality:"ok",
feedback:"Zara shrugs. \"Maybe.\" She continues scrolling. You have effectively sanctioned her absence from class and she knows it.",
psychology:"Compromise can be a valid de-escalation strategy, but this compromise conceded too much without understanding the situation. By accepting her absence and only asking her to put the phone away, you have lowered the expectation to almost nothing. Zara is a capable student -- the question is not 'how do I get compliance?' but 'what is driving this avoidance?'",
nextStep:1
}
]
},
// Step 1
{
narrative:"You are sitting near Zara in the alcove. She is still holding her phone but is now engaging in conversation with you, which is progress. There is no audience and no urgency.\n\nShe says: \"I don't see the point of English. I'm predicted a 3. Even if I try, I'm going to fail. So why waste my time sitting in there being told I need to try harder?\"",
prompt:"Zara is expressing hopelessness about her English GCSE. How do you respond?",
choices:[
{
text:"\"A predicted 3 -- that must feel really demoralising when you're putting in effort and not seeing results. How long have you been feeling like this about English?\"",
escalationChange:-1,
quality:"good",
feedback:"Zara pauses. She was not expecting to be asked how she feels. \"Since Year 10, really. I got a 2 in my mock and Miss just said I needed to revise more. Like, I DID revise. It didn't help.\" There is genuine frustration beneath the composure.",
psychology:"Acknowledging the emotional weight of a low prediction validates her experience. Asking 'how long?' shows genuine interest and opens the door to a longer conversation. It also gathers important information -- this is not a one-off mood, it is a sustained experience of failure. Zara's calm defiance is actually learned helplessness with a protective shell of indifference.",
nextStep:2
},
{
text:"\"A Grade 3 isn't failing, Zara. And there are still months until the exam. Plenty of students improve with the right support. Have you looked at the intervention sessions?\"",
escalationChange:0,
quality:"ok",
feedback:"Zara gives you a withering look. \"A 3 is basically failing. And intervention sessions are during lunch. I'm not giving up my free time for a subject I hate.\" She returns to her phone.",
psychology:"Reframing a 3 as 'not failing' contradicts her lived experience -- for Zara, it IS failure. Offering solutions (intervention sessions) before fully understanding the barrier is premature problem-solving. The brain hears: 'Your feelings are wrong, and here is what you should do about it.' This is invalidating, even when well-intentioned. Meet her where she is first.",
nextStep:2
},
{
text:"\"I understand it's frustrating, but sitting out here on your phone isn't going to improve that grade, is it? You're only hurting yourself.\"",
escalationChange:1,
quality:"bad",
feedback:"\"I know that,\" Zara says coldly. \"But at least out here I'm not being humiliated.\" The word 'humiliated' hangs in the air. There is something deeper happening in that English classroom.",
psychology:"'You're only hurting yourself' is a guilt-based strategy that rarely works with adolescents. It implies the student is too foolish to see the obvious, which is condescending. However, Zara's response -- mentioning humiliation -- is significant. It suggests the avoidance is not about laziness but about self-protection. Shame in the classroom can be as powerful a driver of behaviour as anger.",
nextStep:2
}
]
},
// Step 2
{
narrative:"As you talk with Zara, a fuller picture emerges. She feels humiliated in English because she is in a set with students she perceives as more able. She has been asked to read aloud and struggled. She feels her teacher has given up on her.\n\nShe puts her phone in her lap -- a small but significant gesture of engagement.\n\n\"I'm not stupid,\" she says. \"I'm just not good at English. But the way Miss talks to me, it's like she thinks I don't try.\"",
prompt:"Zara is opening up about feeling unseen by her teacher. What do you say?",
choices:[
{
text:"\"I believe you. And I don't think you're stupid either. It sounds like you're working hard and not getting the results you deserve, and that's incredibly frustrating. I wonder if Miss actually knows how you're feeling -- sometimes teachers don't realise the impact of what they say. Would you be open to me having a quiet word with her?\"",
escalationChange:-2,
quality:"good",
feedback:"Zara considers this. \"You wouldn't tell her I was bunking, would you?\" The fact that she is negotiating terms shows she is engaged in the process. Her phone is now face-down on the bench beside her.",
psychology:"'I believe you' is one of the most powerful phrases in pastoral work. It communicates trust and validation. Wondering aloud whether the teacher knows ('sometimes teachers don't realise') gently opens the possibility for change without blaming either party. Offering to mediate positions you as an advocate, not an enforcer. Zara's phone going face-down is a subconscious signal of trust.",
nextStep:3
},
{
text:"\"I'm sorry you feel that way. But Miss is trying to push you to do your best. Sometimes that feels uncomfortable but it comes from a good place.\"",
escalationChange:1,
quality:"ok",
feedback:"Zara stiffens. \"You don't even know what she's like in the lesson. You're just assuming she's right because she's a teacher.\" The openness closes.",
psychology:"Defending a teacher you have not observed in that context, based on assumption, undermines credibility. The phrase 'I'm sorry you feel that way' is a non-apology that is widely recognised as dismissive. Taking the teacher's side without investigation tells Zara that the adult world is a closed shop where staff protect each other regardless of the student's experience.",
nextStep:3
},
{
text:"\"Have you thought about talking to Miss directly about how you're feeling? Sometimes having an honest conversation can really help.\"",
escalationChange:0,
quality:"ok",
feedback:"Zara scoffs. \"Yeah, because a Year 11 telling a teacher they're rubbish at their job is going to go really well.\" She has a point about the power dynamic.",
psychology:"Suggesting a student directly address a teacher about their teaching practice ignores the significant power imbalance. For a 16-year-old who already feels inadequate, this requires a level of confidence and communication skill that most adults would find challenging. The suggestion, while theoretically sound, places the burden of resolution on the person with the least power.",
nextStep:3
}
]
},
// Step 3
{
narrative:"Zara has agreed to let you have a quiet word with her English teacher. You have moved from a confrontation about a phone to a genuine pastoral conversation. The phone has not been mentioned for ten minutes.\n\nZara then says: \"So are you going to make me go back to English now? Because there's only twenty minutes left and if I walk in now, everyone will look at me.\"",
prompt:"Zara is asking about the immediate next step. What do you suggest?",
choices:[
{
text:"\"I'm not going to force you to do anything. But here's what I'd suggest: you could go to the library for the rest of this period and do some independent English work -- I'll clear it with the librarian. Then I'll speak to Miss before your next English lesson. How does that sound?\"",
escalationChange:-1,
quality:"good",
feedback:"Zara thinks, then nods. \"Yeah, okay. The library is fine.\" She picks up her bag and -- notably -- puts her phone inside it without being asked.",
psychology:"Offering a face-saving alternative ('the library') avoids the humiliation of a late return to class. Giving her agency ('How does that sound?') maintains the collaborative dynamic. The fact that she puts her phone away voluntarily is the most powerful moment in this scenario: when a student feels heard and respected, compliance follows naturally. You never needed to confiscate the phone -- you needed to address what was behind the behaviour.",
nextStep:4
},
{
text:"\"Twenty minutes is still twenty minutes of learning. I think you should go back -- I'll walk you there and explain to Miss. Better to be there than not.\"",
escalationChange:1,
quality:"ok",
feedback:"Zara frowns. \"I really don't want to. Can I just go to the library?\" She is asking, not defying -- but the suggestion to return has created anxiety.",
psychology:"While 'twenty minutes is still twenty minutes' is factually true, it prioritises attendance over wellbeing. Zara has just been emotionally vulnerable -- asking her to immediately re-enter the environment she was avoiding is pushing too hard, too fast. The offer to walk her there is kind, but it positions you as an escort rather than a collaborator. Her suggestion of the library is actually excellent self-regulation.",
nextStep:4
},
{
text:"\"Well, you've missed most of the lesson now. I'll mark you as present since I've been with you and we can start fresh next lesson.\"",
escalationChange:0,
quality:"ok",
feedback:"Zara looks relieved but also slightly confused about the attendance fudge. She wanders off toward the common area. The immediate crisis is over but there is no forward plan.",
psychology:"Manipulating the attendance record, even with good intentions, models dishonesty and creates a precedent. Zara may expect this flexibility in future. More importantly, there is no transitional step -- she moves from your conversation into unstructured time with no learning activity. A supportive alternative (library, study room) would have maintained the educational purpose while respecting her needs.",
nextStep:4
}
]
},
// Step 4
{
narrative:"It is the end of the school day. You have spoken to Zara's English teacher, who was genuinely surprised to hear how Zara feels. She said: \"I had no idea she felt humiliated. I thought she was just disengaged. I'll think about how I approach her.\"\n\nYou see Zara in the corridor as students are leaving. She catches your eye.",
prompt:"This is a brief, informal moment. What do you do?",
choices:[
{
text:"Give her a nod and say, as you pass: \"I spoke to Miss. She was really glad to hear your perspective. I think next lesson might feel a bit different. Have a good evening, Zara.\"",
escalationChange:-1,
quality:"good",
feedback:"Zara's eyebrows lift slightly -- she is surprised you actually followed through. \"Thanks,\" she says, and it sounds genuine. She leaves school knowing that an adult listened, acted, and kept their word.",
psychology:"Brief, warm follow-up in a natural setting is ideal. It does not make a big deal of the situation but confirms that you followed through. For students who have experienced adults breaking promises, seeing immediate action builds trust rapidly. The casual tone ('Have a good evening') normalises the interaction -- this is not a crisis, it is care.",
nextStep:5
},
{
text:"\"Zara, quick word. I spoke to Miss and she said she'll try to be more supportive. But you do need to be in lessons going forward, okay? No more sitting out in corridors.\"",
escalationChange:0,
quality:"ok",
feedback:"Zara nods. \"Yeah, fine.\" The instruction at the end slightly tarnishes the positive news. She leaves knowing you followed through, but the last thing she heard was a condition.",
psychology:"The positive update is good, but ending on a condition ('no more sitting in corridors') shifts the frame from care to compliance. Zara already knows she should be in lessons. Stating it explicitly implies you do not trust her to make that choice herself, despite spending the entire interaction building her agency. Trust the relational work to do its job.",
nextStep:5
},
{
text:"You are busy with another student and do not get a chance to speak to Zara. You plan to catch her tomorrow.",
escalationChange:1,
quality:"ok",
feedback:"Zara goes home uncertain whether anything actually happened. She checks her phone -- which is what she always does when anxious. Tomorrow she may or may not believe things will be different.",
psychology:"Delayed follow-up is not the same as no follow-up, but immediacy matters. Zara took a risk today by opening up to you. Every hour without confirmation that the risk was worth taking increases doubt. In attachment terms, this is an unresolved bid -- the student extended trust and is waiting to see if it was received. The sooner you confirm, the stronger the bond.",
nextStep:5
}
]
},
// Step 5
{
narrative:"One week later. You are passing the English corridor during Period 2 when you glance through the window. Zara is in her English lesson. She is working -- not enthusiastically, but working. Her phone is in her bag.\n\nHer English teacher catches your eye through the glass and gives you a thumbs up.",
prompt:"The longer-term outcome is emerging. What is your final reflection?",
choices:[
{
text:"You make a mental note to check in with Zara casually over the next few weeks, keeping the relationship warm without making it heavy. You also schedule a brief catch-up with her English teacher to see if the adjusted approach is making a difference. Sustained, quiet support is the goal.",
escalationChange:-1,
quality:"good",
feedback:"Over the following weeks, Zara's attendance in English improves. Her predicted grade moves to a 4. More importantly, she begins to approach adults when she needs help, rather than withdrawing. The phone was never the issue.",
psychology:"Long-term, consistent relational support changes outcomes. The initial incident was about a phone, but the real intervention was addressing learned helplessness, shame, and a breakdown in the student-teacher relationship. By maintaining quiet, steady contact, you modelled what a reliable adult looks like. This is the essence of attachment-aware practice in schools.",
nextStep:-1
},
{
text:"You are satisfied that the situation is resolved and move on to other priorities. Zara is in class, the phone issue is handled, job done.",
escalationChange:0,
quality:"ok",
feedback:"Zara attends English for the next two weeks. But without sustained support, old patterns gradually return. By Easter, she is finding reasons to miss lessons again. The intervention worked temporarily but did not embed.",
psychology:"One-off interventions rarely create lasting change. Behaviour is habitual and driven by deep-seated beliefs ('I can't do this, I'm not good enough'). Without sustained relational support, the old neural pathways reassert themselves. This is not a failure of the student -- it is a limitation of episodic intervention. Lasting change requires consistency over time.",
nextStep:-1
},
{
text:"You log the incident formally, including the missed lesson and the phone use during lesson time, so there is a record in case it happens again.",
escalationChange:1,
quality:"bad",
feedback:"Zara sees the incident log on the system and feels hurt. \"I thought they were helping me, not building a case against me.\" Her trust in staff takes a significant step backward.",
psychology:"Formal logging of an incident that was pastorally resolved transforms a supportive interaction into an institutional one. The student experiences this as surveillance, not care. While record-keeping has its place, the nature and framing of what is logged matters. A pastoral note ('spoke to Zara about English concerns; liaised with English teacher') is very different from a behaviour incident report.",
nextStep:-1
}
]
}
],
expertPath:[
"Sidestep the phone confrontation entirely by leading with curiosity about Zara's wellbeing.",
"Acknowledge the emotional weight of a low predicted grade and explore how long she has felt this way.",
"Validate her experience, believe her perspective, and offer to advocate on her behalf with her teacher.",
"Suggest a face-saving alternative (library) rather than forcing a return to the classroom.",
"Follow up promptly the same day to confirm you kept your word.",
"Maintain quiet, consistent relational support over the following weeks to embed the change."
],
tips:[
"Not all de-escalation involves anger. Calm defiance requires curiosity, not authority.",
"The presenting issue (phone, absence) is rarely the real issue. Look underneath.",
"'I believe you' is one of the most powerful phrases in pastoral work.",
"Give the student agency through choices and collaboration rather than commands.",
"Voluntary compliance is always more sustainable than enforced compliance.",
"Follow through on every promise you make. Trust is built in actions, not words."
],
learningPoints:[
{icon:"\uD83D\uDD0D",text:"Calm defiance is often a protective mechanism for a student who feels hopeless. It looks like attitude but is frequently rooted in learned helplessness and shame."},
{icon:"\uD83E\uDD1D",text:"When you address the root cause rather than the surface behaviour, compliance often follows naturally. Zara put her phone away without being asked because she felt heard."},
{icon:"\uD83D\uDCC8",text:"Sustained, consistent follow-up is what turns a single interaction into lasting behaviour change. One good conversation is a start, not a solution."}
]
}
];

// ========== APP STATE ==========
let state = {
currentScreen: 'home',
currentScenario: null,
currentStep: 0,
escalation: 0,
choices: [], // {stepIndex, choiceIndex, quality, escalationChange, escalationAfter}
completedScenarios: JSON.parse(localStorage.getItem('deesc_completed') || '{}'),
scenarioResults: JSON.parse(localStorage.getItem('deesc_results') || '{}')
};

// ========== INIT ==========
function init() {
renderHome();
updateProgressStrip();
}

function renderHome() {
const grid = document.getElementById('homeGrid');
grid.innerHTML = '';
SCENARIOS.forEach((s, i) => {
const done = state.completedScenarios[i];
const result = state.scenarioResults[i];
grid.innerHTML += `
<div class="scenario-card ${done ? 'completed' : ''}">
<div class="card-icon ${s.icon}">${s.emoji}</div>
<span class="year-tag">${s.yearTag}</span>
<h3>${s.title}</h3>
<p>${s.description}</p>
${result ? `<p style="font-size:.78rem;color:var(--grey-400);margin-bottom:12px">Last attempt: Escalation ${result.finalEsc}/10</p>` : ''}
<button class="start-btn" onclick="startScenario(${i})">${done ? 'Replay Scenario' : 'Begin Scenario'}</button>
</div>`;
});
updateStats();
}

function updateStats() {
const completedCount = Object.keys(state.completedScenarios).length;
document.getElementById('statCompleted').textContent = `${completedCount}/4`;
const results = Object.values(state.scenarioResults);
if (results.length > 0) {
const avg = results.reduce((s, r) => s + r.finalEsc, 0) / results.length;
document.getElementById('statAvgEsc').textContent = avg.toFixed(1) + '/10';
const best = Math.min(...results.map(r => r.finalEsc));
document.getElementById('statBestOutcome').textContent = best <= 3 ? 'Excellent' : best <= 5 ? 'Good' : best <= 7 ? 'Partial' : 'Needs Work';
} else {
document.getElementById('statAvgEsc').textContent = '--';
document.getElementById('statBestOutcome').textContent = '--';
}
}

function updateProgressStrip() {
document.querySelectorAll('.progress-dot').forEach(dot => {
const idx = parseInt(dot.dataset.scenario);
if (state.completedScenarios[idx]) dot.className = 'progress-dot done';
else if (state.currentScenario !== null && state.currentScenario.id === idx) dot.className = 'progress-dot active';
else dot.className = 'progress-dot';
});
}

// ========== SCREENS ==========
function showScreen(name) {
document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
document.getElementById(name + 'Screen').classList.add('active');
state.currentScreen = name;
window.scrollTo({ top: 0, behavior: 'smooth' });
}

// ========== START SCENARIO ==========
function startScenario(idx) {
state.currentScenario = SCENARIOS[idx];
state.currentStep = 0;
state.escalation = SCENARIOS[idx].startEscalation;
state.choices = [];
document.getElementById('scenTitle').textContent = state.currentScenario.title;
updateProgressStrip();
showScreen('scenario');
renderStep();
}

function exitScenario() {
state.currentScenario = null;
updateProgressStrip();
showScreen('home');
}

// ========== RENDER STEP ==========
function renderStep() {
const scenario = state.currentScenario;
const step = scenario.steps[state.currentStep];
updateEscalationMeter();
document.getElementById('stepIndicator').textContent = `Step ${state.currentStep + 1} of ${scenario.steps.length}`;
const area = document.getElementById('sceneArea');
const letters = ['A', 'B', 'C', 'D'];
let choicesHTML = step.choices.map((c, i) =>
`<button class="choice-btn" data-letter="${letters[i]}" onclick="selectChoice(${i})">${c.text}</button>`
).join('');

area.innerHTML = `
<div class="scene-card">
<div class="scene-narrative">${step.narrative.replace(/\n/g, '<br>')}</div>
<div class="scene-prompt">${step.prompt}</div>
<div class="choices" id="choicesContainer">${choicesHTML}</div>
</div>`;
}

// ========== SELECT CHOICE ==========
function selectChoice(idx) {
const scenario = state.currentScenario;
const step = scenario.steps[state.currentStep];
const choice = step.choices[idx];

// Disable all buttons
document.querySelectorAll('.choice-btn').forEach((btn, i) => {
btn.disabled = true;
if (i === idx) btn.classList.add('selected');
});

// Update escalation
state.escalation = Math.max(1, Math.min(10, state.escalation + choice.escalationChange));
updateEscalationMeter();

// Record choice
state.choices.push({
stepIndex: state.currentStep,
choiceIndex: idx,
quality: choice.quality,
escalationChange: choice.escalationChange,
escalationAfter: state.escalation,
text: choice.text.substring(0, 80) + '...'
});

// Show feedback
const feedbackClass = choice.quality === 'good' ? 'positive' : choice.quality === 'ok' ? 'neutral' : 'negative';
const feedbackIcon = choice.quality === 'good' ? '\u2713' : choice.quality === 'ok' ? '\u2014' : '\u2717';
const feedbackTitle = choice.quality === 'good' ? 'Effective Response' : choice.quality === 'ok' ? 'Partially Effective' : 'Counterproductive Response';

const isLast = choice.nextStep === -1;
const buttonText = isLast ? 'View Summary' : 'Continue';
const buttonAction = isLast ? 'showSummary()' : `goToStep(${choice.nextStep})`;

const feedbackHTML = `
<div class="feedback-panel">
<div class="feedback-header">
<div class="feedback-icon ${feedbackClass}">${feedbackIcon}</div>
<h4>${feedbackTitle}</h4>
</div>
<div class="feedback-text">${choice.feedback}</div>
<div class="feedback-psychology"><strong>Why this matters:</strong> ${choice.psychology}</div>
<button class="continue-btn" onclick="${buttonAction}">${buttonText}</button>
</div>`;

document.getElementById('sceneArea').insertAdjacentHTML('beforeend', feedbackHTML);
document.querySelector('.feedback-panel').scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

function goToStep(stepIndex) {
state.currentStep = stepIndex;
renderStep();
}

// ========== ESCALATION METER ==========
function updateEscalationMeter() {
const esc = state.escalation;
const fill = document.getElementById('meterFill');
const level = document.getElementById('escLevel');
const pct = (esc / 10) * 100;
fill.style.width = pct + '%';

let cls, text;
if (esc <= 3) { cls = 'low'; text = esc + ' - Low'; }
else if (esc <= 6) { cls = 'medium'; text = esc + ' - Medium'; }
else { cls = 'high'; text = esc + ' - High'; }

fill.className = 'meter-fill ' + cls;
level.className = 'escalation-level ' + cls;
level.textContent = text;
}

// ========== SUMMARY ==========
function showSummary() {
const scenario = state.currentScenario;
const finalEsc = state.escalation;

// Save results
state.completedScenarios[scenario.id] = true;
state.scenarioResults[scenario.id] = {
finalEsc: finalEsc,
choices: [...state.choices],
date: new Date().toISOString()
};
localStorage.setItem('deesc_completed', JSON.stringify(state.completedScenarios));
localStorage.setItem('deesc_results', JSON.stringify(state.scenarioResults));
updateProgressStrip();

// Determine outcome
let outcomeClass, outcomeTitle, outcomeText;
if (finalEsc <= 3) {
outcomeClass = 'success';
outcomeTitle = 'Successful De-escalation';
outcomeText = 'The situation was resolved effectively through empathetic, skilled intervention. The student felt heard, supported and safe.';
} else if (finalEsc <= 6) {
outcomeClass = 'partial';
outcomeTitle = 'Partial Success';
outcomeText = 'The situation was managed but there were missed opportunities for deeper de-escalation. The outcome was acceptable but could have been stronger.';
} else {
outcomeClass = 'escalated';
outcomeTitle = 'Escalation Required Senior Support';
outcomeText = 'The situation escalated beyond what could be resolved in the moment. Further intervention from senior staff was needed. This is a learning opportunity.';
}

// Build timeline
let timelineHTML = state.choices.map((c, i) => {
const qClass = c.quality === 'good' ? 'good' : c.quality === 'ok' ? 'ok' : 'bad';
const escDir = c.escalationChange < 0 ? 'Escalation decreased' : c.escalationChange > 0 ? 'Escalation increased' : 'Escalation unchanged';
return `<div class="timeline-item ${qClass}">
<div class="ti-step">Step ${i + 1}</div>
<div class="ti-choice">${c.text}</div>
<div class="ti-effect">${escDir} (now ${c.escalationAfter}/10)</div>
</div>`;
}).join('');

// Build expert path
let expertHTML = scenario.expertPath.map((step, i) =>
`<div class="expert-step"><div class="num">${i + 1}</div><div class="desc">${step}</div></div>`
).join('');

// Build tips
let tipsHTML = scenario.tips.map(t => `<li>${t}</li>`).join('');

// Build learning points
let lpHTML = scenario.learningPoints.map(lp =>
`<div class="lp-item"><div class="lp-icon">${lp.icon}</div><div class="lp-text">${lp.text}</div></div>`
).join('');

// Build escalation graph data
const graphData = [scenario.startEscalation, ...state.choices.map(c => c.escalationAfter)];

const content = document.getElementById('summaryContent');
content.innerHTML = `
<div class="outcome-banner ${outcomeClass}">
<h3>${outcomeTitle}</h3>
<p>${outcomeText}</p>
</div>

<div class="summary-card">
<h3>Your Decision Timeline</h3>
<div class="timeline">${timelineHTML}</div>
</div>

<div class="summary-card">
<h3>Escalation Graph</h3>
<div class="graph-container"><canvas id="escGraph"></canvas></div>
</div>

<div class="summary-card">
<h3>Key Learning Points</h3>
<div class="learning-points">${lpHTML}</div>
</div>

<div class="summary-card">
<h3>Expert Path -- The Optimal Route</h3>
<p style="font-size:.85rem;color:var(--grey-500);margin-bottom:16px;">This is the recommended sequence of responses for the best possible outcome:</p>
<div class="expert-path">${expertHTML}</div>
</div>

<div class="summary-card">
<h3>Strategies and Tips</h3>
<ul class="tips-list">${tipsHTML}</ul>
</div>

<div class="summary-actions">
<button class="btn-primary" onclick="startScenario(${scenario.id})">Replay This Scenario</button>
<button class="btn-secondary" onclick="exitScenario(); showScreen('home')">Back to All Scenarios</button>
</div>`;

showScreen('summary');

// Draw graph after DOM update
setTimeout(() => drawGraph(graphData), 100);
}

// ========== DRAW GRAPH ==========
function drawGraph(data) {
const canvas = document.getElementById('escGraph');
if (!canvas) return;
const ctx = canvas.getContext('2d');
const dpr = window.devicePixelRatio || 1;
const rect = canvas.parentElement.getBoundingClientRect();
canvas.width = rect.width * dpr;
canvas.height = rect.height * dpr;
canvas.style.width = rect.width + 'px';
canvas.style.height = rect.height + 'px';
ctx.scale(dpr, dpr);

const W = rect.width;
const H = rect.height;
const pad = { top: 20, right: 20, bottom: 30, left: 40 };
const graphW = W - pad.left - pad.right;
const graphH = H - pad.top - pad.bottom;

// Background
ctx.fillStyle = '#f9fafb';
ctx.fillRect(0, 0, W, H);

// Grid lines
ctx.strokeStyle = '#e5e7eb';
ctx.lineWidth = 1;
for (let i = 0; i <= 10; i += 2) {
const y = pad.top + graphH - (i / 10) * graphH;
ctx.beginPath();
ctx.moveTo(pad.left, y);
ctx.lineTo(W - pad.right, y);
ctx.stroke();
ctx.fillStyle = '#9ca3af';
ctx.font = '11px Segoe UI, sans-serif';
ctx.textAlign = 'right';
ctx.fillText(i, pad.left - 8, y + 4);
}

// Zone backgrounds
const zoneColors = [
{ from: 0, to: 3, color: 'rgba(34,197,94,0.08)' },
{ from: 3, to: 6, color: 'rgba(245,158,11,0.08)' },
{ from: 6, to: 10, color: 'rgba(239,68,68,0.08)' }
];
zoneColors.forEach(z => {
const y1 = pad.top + graphH - (z.to / 10) * graphH;
const y2 = pad.top + graphH - (z.from / 10) * graphH;
ctx.fillStyle = z.color;
ctx.fillRect(pad.left, y1, graphW, y2 - y1);
});

// Plot line
if (data.length < 2) return;
const stepW = graphW / (data.length - 1);

ctx.beginPath();
ctx.strokeStyle = '#3b82f6';
ctx.lineWidth = 3;
ctx.lineJoin = 'round';
ctx.lineCap = 'round';
data.forEach((val, i) => {
const x = pad.left + i * stepW;
const y = pad.top + graphH - (val / 10) * graphH;
if (i === 0) ctx.moveTo(x, y);
else ctx.lineTo(x, y);
});
ctx.stroke();

// Plot dots
data.forEach((val, i) => {
const x = pad.left + i * stepW;
const y = pad.top + graphH - (val / 10) * graphH;
let color = val <= 3 ? '#22c55e' : val <= 6 ? '#f59e0b' : '#ef4444';
ctx.beginPath();
ctx.arc(x, y, 5, 0, Math.PI * 2);
ctx.fillStyle = color;
ctx.fill();
ctx.strokeStyle = '#fff';
ctx.lineWidth = 2;
ctx.stroke();

// Label
ctx.fillStyle = '#374151';
ctx.font = 'bold 11px Segoe UI, sans-serif';
ctx.textAlign = 'center';
ctx.fillText(val, x, y - 12);
});

// X axis labels
ctx.fillStyle = '#9ca3af';
ctx.font = '11px Segoe UI, sans-serif';
ctx.textAlign = 'center';
data.forEach((val, i) => {
const x = pad.left + i * stepW;
ctx.fillText(i === 0 ? 'Start' : 'Step ' + i, x, H - 8);
});
}

// ========== TOOLKIT ==========
function openToolkit() {
document.getElementById('toolkitModal').classList.add('active');
}
function closeToolkit() {
document.getElementById('toolkitModal').classList.remove('active');
}
document.getElementById('toolkitModal').addEventListener('click', function(e) {
if (e.target === this) closeToolkit();
});
document.addEventListener('keydown', function(e) {
if (e.key === 'Escape') closeToolkit();
});

// ========== RESET ==========
function resetAll() {
if (!confirm('Reset all progress? This will clear your completed scenarios and results.')) return;
localStorage.removeItem('deesc_completed');
localStorage.removeItem('deesc_results');
state.completedScenarios = {};
state.scenarioResults = {};
state.currentScenario = null;
updateProgressStrip();
showScreen('home');
renderHome();
}

// ========== START ==========
init();
</script>
</body>
</html>
