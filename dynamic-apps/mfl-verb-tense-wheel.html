<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Verb Tense Wheel</title>
<style>
:root {
    --purple-900: #2d1b4e;
    --purple-800: #3d2466;
    --purple-700: #4c2d80;
    --purple-600: #5e3a9e;
    --purple-500: #7c4dff;
    --purple-400: #9c7cff;
    --purple-300: #b9a0ff;
    --purple-200: #d4c6ff;
    --purple-100: #efe8ff;
    --purple-50: #f7f3ff;
    --green-500: #22c55e;
    --green-100: #dcfce7;
    --red-500: #ef4444;
    --red-100: #fee2e2;
    --amber-500: #f59e0b;
    --amber-100: #fef3c7;
    --blue-500: #3b82f6;
    --blue-100: #dbeafe;
    --stem-change: #e879f9;
    --stem-bg: #fdf4ff;
    --irregular: #f97316;
    --irregular-bg: #fff7ed;
    --bg: #f8f6fc;
    --text: #1e1b2e;
    --text-light: #6b6580;
    --card: #ffffff;
    --border: #e5dff0;
    --shadow: 0 2px 12px rgba(45, 27, 78, 0.08);
    --radius: 10px;
    --transition: 0.25s ease;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.5;
    min-height: 100vh;
}
header {
    position: sticky; top: 0; z-index: 100;
    background: linear-gradient(135deg, var(--purple-800), var(--purple-600));
    color: white; padding: 12px 20px;
    box-shadow: 0 2px 16px rgba(45, 27, 78, 0.25);
}
.header-row {
    max-width: 1100px; margin: 0 auto;
    display: flex; align-items: center; justify-content: space-between;
    flex-wrap: wrap; gap: 10px;
}
header h1 { font-size: 1.3rem; font-weight: 700; letter-spacing: -0.3px; }
header h1 span { font-weight: 400; opacity: 0.85; font-size: 0.85em; }
.lang-tabs { display: flex; gap: 4px; }
.lang-tab {
    padding: 6px 16px; border-radius: 20px; border: 2px solid rgba(255,255,255,0.3);
    background: transparent; color: white; font-size: 0.85rem; font-weight: 600;
    cursor: pointer; transition: var(--transition);
}
.lang-tab:hover { border-color: rgba(255,255,255,0.6); }
.lang-tab.active { background: white; color: var(--purple-700); border-color: white; }
.score-badge {
    background: rgba(255,255,255,0.15); border-radius: 20px;
    padding: 6px 14px; font-size: 0.85rem; font-weight: 600;
    display: flex; align-items: center; gap: 8px;
}
.score-badge .streak { color: var(--amber-500); }
main {
    max-width: 1100px; margin: 0 auto; padding: 20px;
}
.verb-selector {
    display: flex; flex-wrap: wrap; gap: 6px; justify-content: center;
    margin-bottom: 20px;
}
.verb-btn {
    padding: 6px 14px; border-radius: 20px;
    border: 2px solid var(--border); background: var(--card);
    font-size: 0.82rem; font-weight: 600; cursor: pointer;
    transition: var(--transition); color: var(--text);
}
.verb-btn:hover { border-color: var(--purple-400); }
.verb-btn.active { background: var(--purple-500); color: white; border-color: var(--purple-500); }
.verb-btn .irr-dot {
    display: inline-block; width: 7px; height: 7px; border-radius: 50%;
    background: var(--irregular); margin-left: 4px; vertical-align: middle;
}
.layout { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; align-items: start; }
.wheel-panel { position: relative; display: flex; flex-direction: column; align-items: center; }
.wheel-container {
    position: relative; width: 100%; max-width: 420px; aspect-ratio: 1;
    cursor: pointer; user-select: none;
}
.wheel-container svg { width: 100%; height: 100%; }
.wheel-segment { cursor: pointer; transition: opacity 0.2s; }
.wheel-segment:hover { opacity: 0.85; }
.wheel-center-label {
    font-size: 14px; font-weight: 700; fill: white;
    text-anchor: middle; dominant-baseline: central; pointer-events: none;
}
.wheel-tense-label {
    font-size: 11px; font-weight: 600; fill: white;
    text-anchor: middle; dominant-baseline: central; pointer-events: none;
}
.spin-hint {
    text-align: center; margin-top: 8px; font-size: 0.8rem;
    color: var(--text-light); font-style: italic;
}
.right-panel { display: flex; flex-direction: column; gap: 16px; }
.card {
    background: var(--card); border-radius: var(--radius);
    box-shadow: var(--shadow); border: 1px solid var(--border);
    padding: 20px; transition: var(--transition);
}
.card h2 {
    font-size: 1rem; font-weight: 700; margin-bottom: 12px;
    color: var(--purple-700); display: flex; align-items: center; gap: 8px;
}
.tense-title-badge {
    display: inline-block; padding: 2px 10px; border-radius: 12px;
    font-size: 0.75rem; font-weight: 700; color: white;
}
.conj-table { width: 100%; border-collapse: collapse; }
.conj-table th {
    text-align: left; padding: 8px 10px; font-size: 0.8rem;
    color: var(--text-light); border-bottom: 2px solid var(--border);
    font-weight: 600;
}
.conj-table td { padding: 6px 10px; border-bottom: 1px solid var(--border); vertical-align: middle; }
.pronoun-cell { font-weight: 700; font-size: 0.9rem; color: var(--purple-700); width: 70px; }
.answer-input {
    width: 100%; padding: 7px 10px; border: 2px solid var(--border);
    border-radius: 6px; font-size: 0.9rem; font-family: inherit;
    transition: var(--transition); background: var(--purple-50);
}
.answer-input:focus { outline: none; border-color: var(--purple-400); background: white; }
.answer-input.correct { border-color: var(--green-500); background: var(--green-100); }
.answer-input.incorrect { border-color: var(--red-500); background: var(--red-100); }
.answer-cell { position: relative; min-width: 140px; }
.feedback-icon {
    position: absolute; right: 8px; top: 50%; transform: translateY(-50%);
    font-size: 1rem; pointer-events: none;
}
.correct-answer {
    font-size: 0.78rem; color: var(--green-500); font-weight: 600;
    margin-top: 2px; min-height: 1.1em;
}
.ending-highlight {
    font-weight: 700; padding: 1px 3px; border-radius: 3px;
}
.ending-regular { background: var(--purple-100); color: var(--purple-700); }
.ending-stem { background: var(--stem-bg); color: var(--stem-change); }
.ending-irregular { background: var(--irregular-bg); color: var(--irregular); }
.legend {
    display: flex; gap: 14px; flex-wrap: wrap; font-size: 0.78rem;
    padding: 10px 0; border-top: 1px solid var(--border); margin-top: 8px;
}
.legend-item { display: flex; align-items: center; gap: 5px; }
.legend-dot {
    width: 10px; height: 10px; border-radius: 3px;
}
.info-panel { font-size: 0.85rem; line-height: 1.6; color: var(--text-light); }
.info-panel h3 {
    font-size: 0.9rem; color: var(--purple-700); margin-bottom: 4px; font-weight: 700;
}
.info-panel p { margin-bottom: 8px; }
.info-panel .rule-example {
    background: var(--purple-50); padding: 6px 10px; border-radius: 6px;
    font-family: 'Courier New', monospace; font-size: 0.82rem;
    border-left: 3px solid var(--purple-400); margin: 6px 0;
    color: var(--text);
}
.check-all-btn {
    display: block; width: 100%; padding: 10px;
    background: var(--purple-500); color: white; border: none;
    border-radius: 6px; font-size: 0.9rem; font-weight: 700;
    cursor: pointer; transition: var(--transition); margin-top: 6px;
}
.check-all-btn:hover { background: var(--purple-600); }
.reset-btn {
    display: block; width: 100%; padding: 8px;
    background: transparent; color: var(--purple-500); border: 2px solid var(--purple-300);
    border-radius: 6px; font-size: 0.82rem; font-weight: 600;
    cursor: pointer; transition: var(--transition);
}
.reset-btn:hover { background: var(--purple-50); }
.placeholder-msg {
    text-align: center; padding: 40px 20px; color: var(--text-light);
    font-size: 0.95rem;
}
.placeholder-msg .arrow { font-size: 2rem; display: block; margin-bottom: 8px; }
@media (max-width: 768px) {
    .layout { grid-template-columns: 1fr; }
    .header-row { justify-content: center; text-align: center; }
    .wheel-container { max-width: 320px; }
    header h1 { font-size: 1.1rem; }
    .verb-selector { gap: 4px; }
    .verb-btn { padding: 5px 10px; font-size: 0.78rem; }
}
</style>
</head>
<body>

<header>
    <div class="header-row">
        <h1>Verb Tense Wheel <span>- MFL Conjugation</span></h1>
        <div class="lang-tabs" id="langTabs"></div>
        <div class="score-badge">
            Score: <strong id="scoreDisplay">0</strong> / <span id="totalDisplay">0</span>
            <span class="streak" id="streakDisplay"></span>
        </div>
    </div>
</header>

<main>
    <div class="verb-selector" id="verbSelector"></div>
    <div class="layout">
        <div class="wheel-panel">
            <div class="wheel-container" id="wheelContainer">
                <svg id="wheelSvg" viewBox="0 0 420 420"></svg>
            </div>
            <div class="spin-hint">Click a segment to select a tense, or click the centre to spin</div>
        </div>
        <div class="right-panel" id="rightPanel">
            <div class="card">
                <div class="placeholder-msg">
                    <span class="arrow">&larr;</span>
                    Select a verb above, then click a tense segment on the wheel to begin conjugating.
                </div>
            </div>
        </div>
    </div>
</main>

<script>
/* ====== DATA ====== */
const LANGUAGES = {
    French: {
        pronouns: ['je', 'tu', 'il/elle', 'nous', 'vous', 'ils/elles'],
        tenses: ['Present', 'Perfect', 'Imperfect', 'Future', 'Conditional', 'Pluperfect', 'Subjunctive'],
        verbs: {
            'avoir': {
                meaning: 'to have', irregular: true,
                conjugations: {
                    Present: ['ai','as','a','avons','avez','ont'],
                    Perfect: ["ai eu","as eu","a eu","avons eu","avez eu","ont eu"],
                    Imperfect: ['avais','avais','avait','avions','aviez','avaient'],
                    Future: ['aurai','auras','aura','aurons','aurez','auront'],
                    Conditional: ['aurais','aurais','aurait','aurions','auriez','auraient'],
                    Pluperfect: ['avais eu','avais eu','avait eu','avions eu','aviez eu','avaient eu'],
                    Subjunctive: ['aie','aies','ait','ayons','ayez','aient']
                },
                info: {
                    Present: {formation:'Irregular: unique stem changes throughout.',usage:'Expressing possession or as an auxiliary for compound tenses.'},
                    Perfect: {formation:'Present of avoir + past participle "eu".',usage:'Completed actions in the past: "I had / I have had".'},
                    Imperfect: {formation:'Stem av- + imperfect endings (-ais, -ais, -ait, -ions, -iez, -aient).',usage:'Describing ongoing or habitual past states.'},
                    Future: {formation:'Irregular stem aur- + future endings.',usage:'Expressing future possession.'},
                    Conditional: {formation:'Irregular stem aur- + conditional endings.',usage:'Hypothetical situations: "I would have".'},
                    Pluperfect: {formation:'Imperfect of avoir + past participle "eu".',usage:'"I had had": action before another past action.'},
                    Subjunctive: {formation:'Irregular subjunctive forms.',usage:'After expressions of doubt, wish, necessity.'}
                }
            },
            'etre': {
                meaning: 'to be', irregular: true, display: '\u00eatre',
                conjugations: {
                    Present: ['suis','es','est','sommes','\u00eates','sont'],
                    Perfect: ["ai \u00e9t\u00e9","as \u00e9t\u00e9","a \u00e9t\u00e9","avons \u00e9t\u00e9","avez \u00e9t\u00e9","ont \u00e9t\u00e9"],
                    Imperfect: ['\u00e9tais','\u00e9tais','\u00e9tait','\u00e9tions','\u00e9tiez','\u00e9taient'],
                    Future: ['serai','seras','sera','serons','serez','seront'],
                    Conditional: ['serais','serais','serait','serions','seriez','seraient'],
                    Pluperfect: ['avais \u00e9t\u00e9','avais \u00e9t\u00e9','avait \u00e9t\u00e9','avions \u00e9t\u00e9','aviez \u00e9t\u00e9','avaient \u00e9t\u00e9'],
                    Subjunctive: ['sois','sois','soit','soyons','soyez','soient']
                },
                info: {
                    Present: {formation:'Fully irregular.',usage:'Describing states, identity, nationality.'},
                    Perfect: {formation:'Present of avoir + past participle "\u00e9t\u00e9".',usage:'"I was / I have been".'},
                    Imperfect: {formation:'Stem \u00e9t- + imperfect endings.',usage:'Describing how things were, background descriptions.'},
                    Future: {formation:'Irregular stem ser- + future endings.',usage:'"I will be".'},
                    Conditional: {formation:'Irregular stem ser- + conditional endings.',usage:'"I would be".'},
                    Pluperfect: {formation:'Imperfect of avoir + "\u00e9t\u00e9".',usage:'"I had been".'},
                    Subjunctive: {formation:'Irregular subjunctive forms.',usage:'After expressions requiring subjunctive.'}
                }
            },
            'parler': {
                meaning: 'to speak', irregular: false,
                conjugations: {
                    Present: ['parle','parles','parle','parlons','parlez','parlent'],
                    Perfect: ['ai parl\u00e9','as parl\u00e9','a parl\u00e9','avons parl\u00e9','avez parl\u00e9','ont parl\u00e9'],
                    Imperfect: ['parlais','parlais','parlait','parlions','parliez','parlaient'],
                    Future: ['parlerai','parleras','parlera','parlerons','parlerez','parleront'],
                    Conditional: ['parlerais','parlerais','parlerait','parlerions','parleriez','parleraient'],
                    Pluperfect: ['avais parl\u00e9','avais parl\u00e9','avait parl\u00e9','avions parl\u00e9','aviez parl\u00e9','avaient parl\u00e9'],
                    Subjunctive: ['parle','parles','parle','parlions','parliez','parlent']
                },
                info: {
                    Present: {formation:'Stem parl- + -e, -es, -e, -ons, -ez, -ent.',usage:'Regular -er verb pattern. Current actions or habits.'},
                    Perfect: {formation:'Present of avoir + parl\u00e9.',usage:'"I spoke / I have spoken". Completed past actions.'},
                    Imperfect: {formation:'Stem parl- + -ais, -ais, -ait, -ions, -iez, -aient.',usage:'Ongoing/habitual past actions.'},
                    Future: {formation:'Infinitive parler + -ai, -as, -a, -ons, -ez, -ont.',usage:'"I will speak".'},
                    Conditional: {formation:'Infinitive parler + -ais, -ais, -ait, -ions, -iez, -aient.',usage:'"I would speak".'},
                    Pluperfect: {formation:'Imperfect of avoir + parl\u00e9.',usage:'"I had spoken".'},
                    Subjunctive: {formation:'Stem parl- + -e, -es, -e, -ions, -iez, -ent.',usage:'After conjunctions like "que".'}
                }
            },
            'finir': {
                meaning: 'to finish', irregular: false,
                conjugations: {
                    Present: ['finis','finis','finit','finissons','finissez','finissent'],
                    Perfect: ['ai fini','as fini','a fini','avons fini','avez fini','ont fini'],
                    Imperfect: ['finissais','finissais','finissait','finissions','finissiez','finissaient'],
                    Future: ['finirai','finiras','finira','finirons','finirez','finiront'],
                    Conditional: ['finirais','finirais','finirait','finirions','finiriez','finiraient'],
                    Pluperfect: ['avais fini','avais fini','avait fini','avions fini','aviez fini','avaient fini'],
                    Subjunctive: ['finisse','finisses','finisse','finissions','finissiez','finissent']
                },
                info: {
                    Present: {formation:'Stem fin- + -is, -is, -it, -issons, -issez, -issent.',usage:'Regular -ir verb pattern. Note the -iss- infix in plural.'},
                    Perfect: {formation:'Present of avoir + fini.',usage:'"I finished".'},
                    Imperfect: {formation:'Stem finiss- + imperfect endings.',usage:'"I was finishing / I used to finish".'},
                    Future: {formation:'Infinitive finir + future endings.',usage:'"I will finish".'},
                    Conditional: {formation:'Infinitive finir + conditional endings.',usage:'"I would finish".'},
                    Pluperfect: {formation:'Imperfect of avoir + fini.',usage:'"I had finished".'},
                    Subjunctive: {formation:'Stem finiss- + subjunctive endings.',usage:'After expressions of necessity/desire.'}
                }
            },
            'aller': {
                meaning: 'to go', irregular: true,
                conjugations: {
                    Present: ['vais','vas','va','allons','allez','vont'],
                    Perfect: ['suis all\u00e9(e)','es all\u00e9(e)','est all\u00e9(e)','sommes all\u00e9(e)s','\u00eates all\u00e9(e)s','sont all\u00e9(e)s'],
                    Imperfect: ['allais','allais','allait','allions','alliez','allaient'],
                    Future: ['irai','iras','ira','irons','irez','iront'],
                    Conditional: ['irais','irais','irait','irions','iriez','iraient'],
                    Pluperfect: ['\u00e9tais all\u00e9(e)','\u00e9tais all\u00e9(e)','\u00e9tait all\u00e9(e)','\u00e9tions all\u00e9(e)s','\u00e9tiez all\u00e9(e)s','\u00e9taient all\u00e9(e)s'],
                    Subjunctive: ['aille','ailles','aille','allions','alliez','aillent']
                },
                info: {
                    Present: {formation:'Fully irregular: vais, vas, va, allons, allez, vont.',usage:'Movement and near future (aller + infinitive).'},
                    Perfect: {formation:'Present of \u00eatre + all\u00e9(e)(s). Agreement with subject.',usage:'"I went". Uses \u00eatre as auxiliary (MRS VANDERTRAMP).'},
                    Imperfect: {formation:'Stem all- + imperfect endings (regular pattern).',usage:'"I used to go / I was going".'},
                    Future: {formation:'Irregular stem ir- + future endings.',usage:'"I will go".'},
                    Conditional: {formation:'Irregular stem ir- + conditional endings.',usage:'"I would go".'},
                    Pluperfect: {formation:'Imperfect of \u00eatre + all\u00e9(e)(s).',usage:'"I had gone".'},
                    Subjunctive: {formation:'Irregular: aille/allions pattern.',usage:'After expressions requiring subjunctive.'}
                }
            },
            'faire': {
                meaning: 'to do/make', irregular: true,
                conjugations: {
                    Present: ['fais','fais','fait','faisons','faites','font'],
                    Perfect: ['ai fait','as fait','a fait','avons fait','avez fait','ont fait'],
                    Imperfect: ['faisais','faisais','faisait','faisions','faisiez','faisaient'],
                    Future: ['ferai','feras','fera','ferons','ferez','feront'],
                    Conditional: ['ferais','ferais','ferait','ferions','feriez','feraient'],
                    Pluperfect: ['avais fait','avais fait','avait fait','avions fait','aviez fait','avaient fait'],
                    Subjunctive: ['fasse','fasses','fasse','fassions','fassiez','fassent']
                },
                info: {
                    Present: {formation:'Irregular: fais, fais, fait, faisons, faites, font.',usage:'Very common verb for doing, making, weather.'},
                    Perfect: {formation:'Present of avoir + fait.',usage:'"I did / I have done".'},
                    Imperfect: {formation:'Stem fais- + imperfect endings.',usage:'"I was doing / I used to do".'},
                    Future: {formation:'Irregular stem fer- + future endings.',usage:'"I will do".'},
                    Conditional: {formation:'Irregular stem fer- + conditional endings.',usage:'"I would do".'},
                    Pluperfect: {formation:'Imperfect of avoir + fait.',usage:'"I had done".'},
                    Subjunctive: {formation:'Irregular: fasse forms.',usage:'After expressions of wanting, doubt.'}
                }
            },
            'prendre': {
                meaning: 'to take', irregular: true,
                conjugations: {
                    Present: ['prends','prends','prend','prenons','prenez','prennent'],
                    Perfect: ['ai pris','as pris','a pris','avons pris','avez pris','ont pris'],
                    Imperfect: ['prenais','prenais','prenait','prenions','preniez','prenaient'],
                    Future: ['prendrai','prendras','prendra','prendrons','prendrez','prendront'],
                    Conditional: ['prendrais','prendrais','prendrait','prendrions','prendriez','prendraient'],
                    Pluperfect: ['avais pris','avais pris','avait pris','avions pris','aviez pris','avaient pris'],
                    Subjunctive: ['prenne','prennes','prenne','prenions','preniez','prennent']
                },
                info: {
                    Present: {formation:'Stem change: prend-/pren-/prenn-.',usage:'"To take". Note double n in ils/elles form.'},
                    Perfect: {formation:'Present of avoir + pris (irregular past participle).',usage:'"I took".'},
                    Imperfect: {formation:'Stem pren- + imperfect endings.',usage:'"I was taking".'},
                    Future: {formation:'Stem prendr- + future endings.',usage:'"I will take".'},
                    Conditional: {formation:'Stem prendr- + conditional endings.',usage:'"I would take".'},
                    Pluperfect: {formation:'Imperfect of avoir + pris.',usage:'"I had taken".'},
                    Subjunctive: {formation:'Stem prenn-/pren- + subjunctive endings.',usage:'After subjunctive triggers.'}
                }
            },
            'vouloir': {
                meaning: 'to want', irregular: true,
                conjugations: {
                    Present: ['veux','veux','veut','voulons','voulez','veulent'],
                    Perfect: ['ai voulu','as voulu','a voulu','avons voulu','avez voulu','ont voulu'],
                    Imperfect: ['voulais','voulais','voulait','voulions','vouliez','voulaient'],
                    Future: ['voudrai','voudras','voudra','voudrons','voudrez','voudront'],
                    Conditional: ['voudrais','voudrais','voudrait','voudrions','voudriez','voudraient'],
                    Pluperfect: ['avais voulu','avais voulu','avait voulu','avions voulu','aviez voulu','avaient voulu'],
                    Subjunctive: ['veuille','veuilles','veuille','voulions','vouliez','veuillent']
                },
                info: {
                    Present: {formation:'Stem change: veu-/voul-/veul-.',usage:'Expressing wants, wishes, polite requests.'},
                    Perfect: {formation:'Present of avoir + voulu.',usage:'"I wanted".'},
                    Imperfect: {formation:'Stem voul- + imperfect endings.',usage:'"I wanted / I used to want".'},
                    Future: {formation:'Irregular stem voudr- + future endings.',usage:'"I will want".'},
                    Conditional: {formation:'Irregular stem voudr- + conditional endings.',usage:'"I would like" (polite requests).'},
                    Pluperfect: {formation:'Imperfect of avoir + voulu.',usage:'"I had wanted".'},
                    Subjunctive: {formation:'Stem veuill-/voul- pattern.',usage:'After subjunctive triggers.'}
                }
            },
            'pouvoir': {
                meaning: 'to be able to', irregular: true,
                conjugations: {
                    Present: ['peux','peux','peut','pouvons','pouvez','peuvent'],
                    Perfect: ['ai pu','as pu','a pu','avons pu','avez pu','ont pu'],
                    Imperfect: ['pouvais','pouvais','pouvait','pouvions','pouviez','pouvaient'],
                    Future: ['pourrai','pourras','pourra','pourrons','pourrez','pourront'],
                    Conditional: ['pourrais','pourrais','pourrait','pourrions','pourriez','pourraient'],
                    Pluperfect: ['avais pu','avais pu','avait pu','avions pu','aviez pu','avaient pu'],
                    Subjunctive: ['puisse','puisses','puisse','puissions','puissiez','puissent']
                },
                info: {
                    Present: {formation:'Stem change: peu-/pouv-/peuv-.',usage:'Expressing ability or possibility.'},
                    Perfect: {formation:'Present of avoir + pu.',usage:'"I was able to / I could".'},
                    Imperfect: {formation:'Stem pouv- + imperfect endings.',usage:'"I could / I was able to".'},
                    Future: {formation:'Irregular stem pourr- (double r) + future endings.',usage:'"I will be able to".'},
                    Conditional: {formation:'Irregular stem pourr- + conditional endings.',usage:'"I could / I would be able to".'},
                    Pluperfect: {formation:'Imperfect of avoir + pu.',usage:'"I had been able to".'},
                    Subjunctive: {formation:'Stem puiss- + subjunctive endings.',usage:'After subjunctive triggers.'}
                }
            }
        }
    },
    German: {
        pronouns: ['ich', 'du', 'er/sie/es', 'wir', 'ihr', 'sie/Sie'],
        tenses: ['Present', 'Perfect', 'Imperfect', 'Future', 'Conditional', 'Pluperfect', 'Subjunctive'],
        verbs: {
            'haben': {
                meaning: 'to have', irregular: true,
                conjugations: {
                    Present: ['habe','hast','hat','haben','habt','haben'],
                    Perfect: ['habe gehabt','hast gehabt','hat gehabt','haben gehabt','habt gehabt','haben gehabt'],
                    Imperfect: ['hatte','hattest','hatte','hatten','hattet','hatten'],
                    Future: ['werde haben','wirst haben','wird haben','werden haben','werdet haben','werden haben'],
                    Conditional: ['w\u00fcrde haben','w\u00fcrdest haben','w\u00fcrde haben','w\u00fcrden haben','w\u00fcrdet haben','w\u00fcrden haben'],
                    Pluperfect: ['hatte gehabt','hattest gehabt','hatte gehabt','hatten gehabt','hattet gehabt','hatten gehabt'],
                    Subjunctive: ['habe','habest','habe','haben','habet','haben']
                },
                info: {
                    Present: {formation:'Irregular: habe, hast, hat, haben, habt, haben.',usage:'Expressing possession. Key auxiliary verb.'},
                    Perfect: {formation:'Present of haben + gehabt.',usage:'"I have had". Most common past tense in spoken German.'},
                    Imperfect: {formation:'Irregular stem hatt- + endings.',usage:'"I had". More common in writing.'},
                    Future: {formation:'werden + haben (infinitive at end).',usage:'"I will have".'},
                    Conditional: {formation:'w\u00fcrde + haben.',usage:'"I would have".'},
                    Pluperfect: {formation:'Imperfect of haben + gehabt.',usage:'"I had had".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech, formal writing.'}
                }
            },
            'sein': {
                meaning: 'to be', irregular: true,
                conjugations: {
                    Present: ['bin','bist','ist','sind','seid','sind'],
                    Perfect: ['bin gewesen','bist gewesen','ist gewesen','sind gewesen','seid gewesen','sind gewesen'],
                    Imperfect: ['war','warst','war','waren','wart','waren'],
                    Future: ['werde sein','wirst sein','wird sein','werden sein','werdet sein','werden sein'],
                    Conditional: ['w\u00fcrde sein','w\u00fcrdest sein','w\u00fcrde sein','w\u00fcrden sein','w\u00fcrdet sein','w\u00fcrden sein'],
                    Pluperfect: ['war gewesen','warst gewesen','war gewesen','waren gewesen','wart gewesen','waren gewesen'],
                    Subjunctive: ['sei','seist','sei','seien','seiet','seien']
                },
                info: {
                    Present: {formation:'Fully irregular: bin, bist, ist, sind, seid, sind.',usage:'Identity, state, location. Key auxiliary.'},
                    Perfect: {formation:'Present of sein + gewesen. Uses sein as its own auxiliary.',usage:'"I have been".'},
                    Imperfect: {formation:'Irregular: war forms.',usage:'"I was". Very common even in spoken German.'},
                    Future: {formation:'werden + sein.',usage:'"I will be".'},
                    Conditional: {formation:'w\u00fcrde + sein.',usage:'"I would be".'},
                    Pluperfect: {formation:'Imperfect of sein + gewesen.',usage:'"I had been".'},
                    Subjunctive: {formation:'Subjunctive I: sei forms.',usage:'Indirect speech.'}
                }
            },
            'machen': {
                meaning: 'to do/make', irregular: false,
                conjugations: {
                    Present: ['mache','machst','macht','machen','macht','machen'],
                    Perfect: ['habe gemacht','hast gemacht','hat gemacht','haben gemacht','habt gemacht','haben gemacht'],
                    Imperfect: ['machte','machtest','machte','machten','machtet','machten'],
                    Future: ['werde machen','wirst machen','wird machen','werden machen','werdet machen','werden machen'],
                    Conditional: ['w\u00fcrde machen','w\u00fcrdest machen','w\u00fcrde machen','w\u00fcrden machen','w\u00fcrdet machen','w\u00fcrden machen'],
                    Pluperfect: ['hatte gemacht','hattest gemacht','hatte gemacht','hatten gemacht','hattet gemacht','hatten gemacht'],
                    Subjunctive: ['mache','machest','mache','machen','machet','machen']
                },
                info: {
                    Present: {formation:'Stem mach- + -e, -st, -t, -en, -t, -en.',usage:'Regular weak verb pattern.'},
                    Perfect: {formation:'haben + gemacht (ge- prefix + -t suffix).',usage:'"I made/did".'},
                    Imperfect: {formation:'Stem mach- + -te, -test, -te, -ten, -tet, -ten.',usage:'"I made/did" (written German).'},
                    Future: {formation:'werden + machen.',usage:'"I will make/do".'},
                    Conditional: {formation:'w\u00fcrde + machen.',usage:'"I would make/do".'},
                    Pluperfect: {formation:'hatte + gemacht.',usage:'"I had made/done".'},
                    Subjunctive: {formation:'Stem mach- + subjunctive endings.',usage:'Indirect speech.'}
                }
            },
            'gehen': {
                meaning: 'to go', irregular: true,
                conjugations: {
                    Present: ['gehe','gehst','geht','gehen','geht','gehen'],
                    Perfect: ['bin gegangen','bist gegangen','ist gegangen','sind gegangen','seid gegangen','sind gegangen'],
                    Imperfect: ['ging','gingst','ging','gingen','gingt','gingen'],
                    Future: ['werde gehen','wirst gehen','wird gehen','werden gehen','werdet gehen','werden gehen'],
                    Conditional: ['w\u00fcrde gehen','w\u00fcrdest gehen','w\u00fcrde gehen','w\u00fcrden gehen','w\u00fcrdet gehen','w\u00fcrden gehen'],
                    Pluperfect: ['war gegangen','warst gegangen','war gegangen','waren gegangen','wart gegangen','waren gegangen'],
                    Subjunctive: ['gehe','gehest','gehe','gehen','gehet','gehen']
                },
                info: {
                    Present: {formation:'Regular present endings on stem geh-.',usage:'Movement. Regular in present tense.'},
                    Perfect: {formation:'sein + gegangen (uses sein for movement verbs).',usage:'"I went / I have gone".'},
                    Imperfect: {formation:'Strong verb: stem changes to ging-.',usage:'"I went".'},
                    Future: {formation:'werden + gehen.',usage:'"I will go".'},
                    Conditional: {formation:'w\u00fcrde + gehen.',usage:'"I would go".'},
                    Pluperfect: {formation:'Imperfect of sein + gegangen.',usage:'"I had gone".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech.'}
                }
            },
            'kommen': {
                meaning: 'to come', irregular: true,
                conjugations: {
                    Present: ['komme','kommst','kommt','kommen','kommt','kommen'],
                    Perfect: ['bin gekommen','bist gekommen','ist gekommen','sind gekommen','seid gekommen','sind gekommen'],
                    Imperfect: ['kam','kamst','kam','kamen','kamt','kamen'],
                    Future: ['werde kommen','wirst kommen','wird kommen','werden kommen','werdet kommen','werden kommen'],
                    Conditional: ['w\u00fcrde kommen','w\u00fcrdest kommen','w\u00fcrde kommen','w\u00fcrden kommen','w\u00fcrdet kommen','w\u00fcrden kommen'],
                    Pluperfect: ['war gekommen','warst gekommen','war gekommen','waren gekommen','wart gekommen','waren gekommen'],
                    Subjunctive: ['komme','kommest','komme','kommen','kommet','kommen']
                },
                info: {
                    Present: {formation:'Regular present endings on stem komm-.',usage:'Expressing arrival, origin.'},
                    Perfect: {formation:'sein + gekommen (movement verb).',usage:'"I came / I have come".'},
                    Imperfect: {formation:'Strong verb: stem changes to kam-.',usage:'"I came".'},
                    Future: {formation:'werden + kommen.',usage:'"I will come".'},
                    Conditional: {formation:'w\u00fcrde + kommen.',usage:'"I would come".'},
                    Pluperfect: {formation:'Imperfect of sein + gekommen.',usage:'"I had come".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech.'}
                }
            },
            'sehen': {
                meaning: 'to see', irregular: true,
                conjugations: {
                    Present: ['sehe','siehst','sieht','sehen','seht','sehen'],
                    Perfect: ['habe gesehen','hast gesehen','hat gesehen','haben gesehen','habt gesehen','haben gesehen'],
                    Imperfect: ['sah','sahst','sah','sahen','saht','sahen'],
                    Future: ['werde sehen','wirst sehen','wird sehen','werden sehen','werdet sehen','werden sehen'],
                    Conditional: ['w\u00fcrde sehen','w\u00fcrdest sehen','w\u00fcrde sehen','w\u00fcrden sehen','w\u00fcrdet sehen','w\u00fcrden sehen'],
                    Pluperfect: ['hatte gesehen','hattest gesehen','hatte gesehen','hatten gesehen','hattet gesehen','hatten gesehen'],
                    Subjunctive: ['sehe','sehest','sehe','sehen','sehet','sehen']
                },
                info: {
                    Present: {formation:'Stem change e>ie in du/er: siehst, sieht.',usage:'Seeing, watching. Common stem-changing verb.'},
                    Perfect: {formation:'haben + gesehen.',usage:'"I saw / I have seen".'},
                    Imperfect: {formation:'Strong verb: stem changes to sah-.',usage:'"I saw".'},
                    Future: {formation:'werden + sehen.',usage:'"I will see".'},
                    Conditional: {formation:'w\u00fcrde + sehen.',usage:'"I would see".'},
                    Pluperfect: {formation:'hatte + gesehen.',usage:'"I had seen".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech.'}
                }
            },
            'sprechen': {
                meaning: 'to speak', irregular: true,
                conjugations: {
                    Present: ['spreche','sprichst','spricht','sprechen','sprecht','sprechen'],
                    Perfect: ['habe gesprochen','hast gesprochen','hat gesprochen','haben gesprochen','habt gesprochen','haben gesprochen'],
                    Imperfect: ['sprach','sprachst','sprach','sprachen','spracht','sprachen'],
                    Future: ['werde sprechen','wirst sprechen','wird sprechen','werden sprechen','werdet sprechen','werden sprechen'],
                    Conditional: ['w\u00fcrde sprechen','w\u00fcrdest sprechen','w\u00fcrde sprechen','w\u00fcrden sprechen','w\u00fcrdet sprechen','w\u00fcrden sprechen'],
                    Pluperfect: ['hatte gesprochen','hattest gesprochen','hatte gesprochen','hatten gesprochen','hattet gesprochen','hatten gesprochen'],
                    Subjunctive: ['spreche','sprechest','spreche','sprechen','sprechet','sprechen']
                },
                info: {
                    Present: {formation:'Stem change e>i in du/er: sprichst, spricht.',usage:'Speaking. Common stem-changing verb (e>i pattern).'},
                    Perfect: {formation:'haben + gesprochen.',usage:'"I spoke / I have spoken".'},
                    Imperfect: {formation:'Strong verb: stem changes to sprach-.',usage:'"I spoke".'},
                    Future: {formation:'werden + sprechen.',usage:'"I will speak".'},
                    Conditional: {formation:'w\u00fcrde + sprechen.',usage:'"I would speak".'},
                    Pluperfect: {formation:'hatte + gesprochen.',usage:'"I had spoken".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech.'}
                }
            },
            'wissen': {
                meaning: 'to know (a fact)', irregular: true,
                conjugations: {
                    Present: ['wei\u00df','wei\u00dft','wei\u00df','wissen','wisst','wissen'],
                    Perfect: ['habe gewusst','hast gewusst','hat gewusst','haben gewusst','habt gewusst','haben gewusst'],
                    Imperfect: ['wusste','wusstest','wusste','wussten','wusstet','wussten'],
                    Future: ['werde wissen','wirst wissen','wird wissen','werden wissen','werdet wissen','werden wissen'],
                    Conditional: ['w\u00fcrde wissen','w\u00fcrdest wissen','w\u00fcrde wissen','w\u00fcrden wissen','w\u00fcrdet wissen','w\u00fcrden wissen'],
                    Pluperfect: ['hatte gewusst','hattest gewusst','hatte gewusst','hatten gewusst','hattet gewusst','hatten gewusst'],
                    Subjunctive: ['wisse','wissest','wisse','wissen','wisset','wissen']
                },
                info: {
                    Present: {formation:'Mixed verb: wei\u00df, wei\u00dft, wei\u00df, wissen, wisst, wissen.',usage:'Knowing facts. Distinct from kennen (knowing people/places).'},
                    Perfect: {formation:'haben + gewusst (mixed verb: ge- + -t but with stem change).',usage:'"I knew / I have known".'},
                    Imperfect: {formation:'Stem changes to wusst-.',usage:'"I knew".'},
                    Future: {formation:'werden + wissen.',usage:'"I will know".'},
                    Conditional: {formation:'w\u00fcrde + wissen.',usage:'"I would know".'},
                    Pluperfect: {formation:'hatte + gewusst.',usage:'"I had known".'},
                    Subjunctive: {formation:'Subjunctive I forms.',usage:'Indirect speech.'}
                }
            }
        }
    },
    Spanish: {
        pronouns: ['yo', 't\u00fa', '\u00e9l/ella', 'nosotros', 'vosotros', 'ellos/ellas'],
        tenses: ['Present', 'Perfect', 'Imperfect', 'Future', 'Conditional', 'Pluperfect', 'Subjunctive'],
        verbs: {
            'tener': {
                meaning: 'to have', irregular: true,
                conjugations: {
                    Present: ['tengo','tienes','tiene','tenemos','ten\u00e9is','tienen'],
                    Perfect: ['he tenido','has tenido','ha tenido','hemos tenido','hab\u00e9is tenido','han tenido'],
                    Imperfect: ['ten\u00eda','ten\u00edas','ten\u00eda','ten\u00edamos','ten\u00edais','ten\u00edan'],
                    Future: ['tendr\u00e9','tendr\u00e1s','tendr\u00e1','tendremos','tendr\u00e9is','tendr\u00e1n'],
                    Conditional: ['tendr\u00eda','tendr\u00edas','tendr\u00eda','tendr\u00edamos','tendr\u00edais','tendr\u00edan'],
                    Pluperfect: ['hab\u00eda tenido','hab\u00edas tenido','hab\u00eda tenido','hab\u00edamos tenido','hab\u00edais tenido','hab\u00edan tenido'],
                    Subjunctive: ['tenga','tengas','tenga','tengamos','teng\u00e1is','tengan']
                },
                info: {
                    Present: {formation:'Stem change e>ie + irregular yo: tengo, tienes, tiene...',usage:'Possession, age, expressions (tener hambre, etc.).'},
                    Perfect: {formation:'haber (present) + tenido.',usage:'"I have had".'},
                    Imperfect: {formation:'Regular -er imperfect: ten\u00eda, ten\u00edas...',usage:'"I had / I used to have".'},
                    Future: {formation:'Irregular stem tendr- + future endings.',usage:'"I will have".'},
                    Conditional: {formation:'Irregular stem tendr- + conditional endings.',usage:'"I would have".'},
                    Pluperfect: {formation:'haber (imperfect) + tenido.',usage:'"I had had".'},
                    Subjunctive: {formation:'Irregular: tenga forms.',usage:'After expressions of doubt, desire, necessity.'}
                }
            },
            'ser': {
                meaning: 'to be (permanent)', irregular: true,
                conjugations: {
                    Present: ['soy','eres','es','somos','sois','son'],
                    Perfect: ['he sido','has sido','ha sido','hemos sido','hab\u00e9is sido','han sido'],
                    Imperfect: ['era','eras','era','\u00e9ramos','erais','eran'],
                    Future: ['ser\u00e9','ser\u00e1s','ser\u00e1','seremos','ser\u00e9is','ser\u00e1n'],
                    Conditional: ['ser\u00eda','ser\u00edas','ser\u00eda','ser\u00edamos','ser\u00edais','ser\u00edan'],
                    Pluperfect: ['hab\u00eda sido','hab\u00edas sido','hab\u00eda sido','hab\u00edamos sido','hab\u00edais sido','hab\u00edan sido'],
                    Subjunctive: ['sea','seas','sea','seamos','se\u00e1is','sean']
                },
                info: {
                    Present: {formation:'Fully irregular: soy, eres, es, somos, sois, son.',usage:'Identity, nationality, profession, characteristics.'},
                    Perfect: {formation:'haber (present) + sido.',usage:'"I have been".'},
                    Imperfect: {formation:'One of only 3 irregular imperfects: era, eras...',usage:'"I was" (permanent qualities in the past).'},
                    Future: {formation:'Regular future on infinitive: ser\u00e9, ser\u00e1s...',usage:'"I will be".'},
                    Conditional: {formation:'Regular conditional on infinitive: ser\u00eda...',usage:'"I would be".'},
                    Pluperfect: {formation:'haber (imperfect) + sido.',usage:'"I had been".'},
                    Subjunctive: {formation:'Irregular: sea forms.',usage:'After subjunctive triggers.'}
                }
            },
            'hablar': {
                meaning: 'to speak', irregular: false,
                conjugations: {
                    Present: ['hablo','hablas','habla','hablamos','habl\u00e1is','hablan'],
                    Perfect: ['he hablado','has hablado','ha hablado','hemos hablado','hab\u00e9is hablado','han hablado'],
                    Imperfect: ['hablaba','hablabas','hablaba','habl\u00e1bamos','hablabais','hablaban'],
                    Future: ['hablar\u00e9','hablar\u00e1s','hablar\u00e1','hablaremos','hablar\u00e9is','hablar\u00e1n'],
                    Conditional: ['hablar\u00eda','hablar\u00edas','hablar\u00eda','hablar\u00edamos','hablar\u00edais','hablar\u00edan'],
                    Pluperfect: ['hab\u00eda hablado','hab\u00edas hablado','hab\u00eda hablado','hab\u00edamos hablado','hab\u00edais hablado','hab\u00edan hablado'],
                    Subjunctive: ['hable','hables','hable','hablemos','habl\u00e9is','hablen']
                },
                info: {
                    Present: {formation:'Stem habl- + -o, -as, -a, -amos, -\u00e1is, -an.',usage:'Regular -ar verb pattern. Current or habitual actions.'},
                    Perfect: {formation:'haber (present) + hablado.',usage:'"I have spoken".'},
                    Imperfect: {formation:'Stem habl- + -aba, -abas, -aba, -\u00e1bamos, -abais, -aban.',usage:'"I was speaking / I used to speak".'},
                    Future: {formation:'Infinitive hablar + -\u00e9, -\u00e1s, -\u00e1, -emos, -\u00e9is, -\u00e1n.',usage:'"I will speak".'},
                    Conditional: {formation:'Infinitive hablar + -\u00eda, -\u00edas, -\u00eda, -\u00edamos, -\u00edais, -\u00edan.',usage:'"I would speak".'},
                    Pluperfect: {formation:'haber (imperfect) + hablado.',usage:'"I had spoken".'},
                    Subjunctive: {formation:'Stem habl- + -e, -es, -e, -emos, -\u00e9is, -en.',usage:'After expressions of doubt, desire.'}
                }
            },
            'comer': {
                meaning: 'to eat', irregular: false,
                conjugations: {
                    Present: ['como','comes','come','comemos','com\u00e9is','comen'],
                    Perfect: ['he comido','has comido','ha comido','hemos comido','hab\u00e9is comido','han comido'],
                    Imperfect: ['com\u00eda','com\u00edas','com\u00eda','com\u00edamos','com\u00edais','com\u00edan'],
                    Future: ['comer\u00e9','comer\u00e1s','comer\u00e1','comeremos','comer\u00e9is','comer\u00e1n'],
                    Conditional: ['comer\u00eda','comer\u00edas','comer\u00eda','comer\u00edamos','comer\u00edais','comer\u00edan'],
                    Pluperfect: ['hab\u00eda comido','hab\u00edas comido','hab\u00eda comido','hab\u00edamos comido','hab\u00edais comido','hab\u00edan comido'],
                    Subjunctive: ['coma','comas','coma','comamos','com\u00e1is','coman']
                },
                info: {
                    Present: {formation:'Stem com- + -o, -es, -e, -emos, -\u00e9is, -en.',usage:'Regular -er verb pattern.'},
                    Perfect: {formation:'haber + comido.',usage:'"I have eaten".'},
                    Imperfect: {formation:'Stem com- + -\u00eda, -\u00edas, -\u00eda, -\u00edamos, -\u00edais, -\u00edan.',usage:'"I was eating / I used to eat".'},
                    Future: {formation:'Infinitive comer + future endings.',usage:'"I will eat".'},
                    Conditional: {formation:'Infinitive comer + conditional endings.',usage:'"I would eat".'},
                    Pluperfect: {formation:'haber (imperfect) + comido.',usage:'"I had eaten".'},
                    Subjunctive: {formation:'Stem com- + -a, -as, -a, -amos, -\u00e1is, -an.',usage:'After subjunctive triggers.'}
                }
            },
            'ir': {
                meaning: 'to go', irregular: true,
                conjugations: {
                    Present: ['voy','vas','va','vamos','vais','van'],
                    Perfect: ['he ido','has ido','ha ido','hemos ido','hab\u00e9is ido','han ido'],
                    Imperfect: ['iba','ibas','iba','\u00edbamos','ibais','iban'],
                    Future: ['ir\u00e9','ir\u00e1s','ir\u00e1','iremos','ir\u00e9is','ir\u00e1n'],
                    Conditional: ['ir\u00eda','ir\u00edas','ir\u00eda','ir\u00edamos','ir\u00edais','ir\u00edan'],
                    Pluperfect: ['hab\u00eda ido','hab\u00edas ido','hab\u00eda ido','hab\u00edamos ido','hab\u00edais ido','hab\u00edan ido'],
                    Subjunctive: ['vaya','vayas','vaya','vayamos','vay\u00e1is','vayan']
                },
                info: {
                    Present: {formation:'Fully irregular: voy, vas, va, vamos, vais, van.',usage:'Movement. Also used for near future (ir + a + infinitive).'},
                    Perfect: {formation:'haber + ido.',usage:'"I have gone".'},
                    Imperfect: {formation:'One of 3 irregular imperfects: iba, ibas, iba...',usage:'"I used to go / I was going".'},
                    Future: {formation:'Regular future on infinitive ir.',usage:'"I will go".'},
                    Conditional: {formation:'Regular conditional on infinitive ir.',usage:'"I would go".'},
                    Pluperfect: {formation:'haber (imperfect) + ido.',usage:'"I had gone".'},
                    Subjunctive: {formation:'Irregular: vaya forms.',usage:'After subjunctive triggers.'}
                }
            },
            'hacer': {
                meaning: 'to do/make', irregular: true,
                conjugations: {
                    Present: ['hago','haces','hace','hacemos','hac\u00e9is','hacen'],
                    Perfect: ['he hecho','has hecho','ha hecho','hemos hecho','hab\u00e9is hecho','han hecho'],
                    Imperfect: ['hac\u00eda','hac\u00edas','hac\u00eda','hac\u00edamos','hac\u00edais','hac\u00edan'],
                    Future: ['har\u00e9','har\u00e1s','har\u00e1','haremos','har\u00e9is','har\u00e1n'],
                    Conditional: ['har\u00eda','har\u00edas','har\u00eda','har\u00edamos','har\u00edais','har\u00edan'],
                    Pluperfect: ['hab\u00eda hecho','hab\u00edas hecho','hab\u00eda hecho','hab\u00edamos hecho','hab\u00edais hecho','hab\u00edan hecho'],
                    Subjunctive: ['haga','hagas','haga','hagamos','hag\u00e1is','hagan']
                },
                info: {
                    Present: {formation:'Irregular yo: hago. Rest: haces, hace, hacemos...',usage:'Doing, making, weather expressions.'},
                    Perfect: {formation:'haber + hecho (irregular past participle).',usage:'"I have done/made".'},
                    Imperfect: {formation:'Regular -er imperfect: hac\u00eda...',usage:'"I was doing / I used to do".'},
                    Future: {formation:'Irregular stem har- + future endings.',usage:'"I will do/make".'},
                    Conditional: {formation:'Irregular stem har- + conditional endings.',usage:'"I would do/make".'},
                    Pluperfect: {formation:'haber (imperfect) + hecho.',usage:'"I had done/made".'},
                    Subjunctive: {formation:'Irregular: haga forms.',usage:'After subjunctive triggers.'}
                }
            },
            'poder': {
                meaning: 'to be able to', irregular: true,
                conjugations: {
                    Present: ['puedo','puedes','puede','podemos','pod\u00e9is','pueden'],
                    Perfect: ['he podido','has podido','ha podido','hemos podido','hab\u00e9is podido','han podido'],
                    Imperfect: ['pod\u00eda','pod\u00edas','pod\u00eda','pod\u00edamos','pod\u00edais','pod\u00edan'],
                    Future: ['podr\u00e9','podr\u00e1s','podr\u00e1','podremos','podr\u00e9is','podr\u00e1n'],
                    Conditional: ['podr\u00eda','podr\u00edas','podr\u00eda','podr\u00edamos','podr\u00edais','podr\u00edan'],
                    Pluperfect: ['hab\u00eda podido','hab\u00edas podido','hab\u00eda podido','hab\u00edamos podido','hab\u00edais podido','hab\u00edan podido'],
                    Subjunctive: ['pueda','puedas','pueda','podamos','pod\u00e1is','puedan']
                },
                info: {
                    Present: {formation:'Stem change o>ue: puedo, puedes, puede... podemos (no change in nosotros/vosotros).',usage:'Ability, possibility.'},
                    Perfect: {formation:'haber + podido.',usage:'"I have been able to".'},
                    Imperfect: {formation:'Regular -er imperfect: pod\u00eda...',usage:'"I could / I was able to".'},
                    Future: {formation:'Irregular stem podr- + future endings.',usage:'"I will be able to".'},
                    Conditional: {formation:'Irregular stem podr- + conditional endings.',usage:'"I could / I would be able to".'},
                    Pluperfect: {formation:'haber (imperfect) + podido.',usage:'"I had been able to".'},
                    Subjunctive: {formation:'Stem change o>ue: pueda... (nosotros/vosotros regular).',usage:'After subjunctive triggers.'}
                }
            },
            'querer': {
                meaning: 'to want/love', irregular: true,
                conjugations: {
                    Present: ['quiero','quieres','quiere','queremos','quer\u00e9is','quieren'],
                    Perfect: ['he querido','has querido','ha querido','hemos querido','hab\u00e9is querido','han querido'],
                    Imperfect: ['quer\u00eda','quer\u00edas','quer\u00eda','quer\u00edamos','quer\u00edais','quer\u00edan'],
                    Future: ['querr\u00e9','querr\u00e1s','querr\u00e1','querremos','querr\u00e9is','querr\u00e1n'],
                    Conditional: ['querr\u00eda','querr\u00edas','querr\u00eda','querr\u00edamos','querr\u00edais','querr\u00edan'],
                    Pluperfect: ['hab\u00eda querido','hab\u00edas querido','hab\u00eda querido','hab\u00edamos querido','hab\u00edais querido','hab\u00edan querido'],
                    Subjunctive: ['quiera','quieras','quiera','queramos','quer\u00e1is','quieran']
                },
                info: {
                    Present: {formation:'Stem change e>ie: quiero, quieres... (nosotros/vosotros regular).',usage:'Wanting, loving. Boot verb pattern.'},
                    Perfect: {formation:'haber + querido.',usage:'"I have wanted/loved".'},
                    Imperfect: {formation:'Regular -er imperfect: quer\u00eda...',usage:'"I wanted / I used to want".'},
                    Future: {formation:'Irregular stem querr- (double r) + future endings.',usage:'"I will want".'},
                    Conditional: {formation:'Irregular stem querr- + conditional endings.',usage:'"I would want/love".'},
                    Pluperfect: {formation:'haber (imperfect) + querido.',usage:'"I had wanted".'},
                    Subjunctive: {formation:'Stem change e>ie: quiera... (boot verb).',usage:'After subjunctive triggers.'}
                }
            },
            'vivir': {
                meaning: 'to live', irregular: false,
                conjugations: {
                    Present: ['vivo','vives','vive','vivimos','viv\u00eds','viven'],
                    Perfect: ['he vivido','has vivido','ha vivido','hemos vivido','hab\u00e9is vivido','han vivido'],
                    Imperfect: ['viv\u00eda','viv\u00edas','viv\u00eda','viv\u00edamos','viv\u00edais','viv\u00edan'],
                    Future: ['vivir\u00e9','vivir\u00e1s','vivir\u00e1','viviremos','vivir\u00e9is','vivir\u00e1n'],
                    Conditional: ['vivir\u00eda','vivir\u00edas','vivir\u00eda','vivir\u00edamos','vivir\u00edais','vivir\u00edan'],
                    Pluperfect: ['hab\u00eda vivido','hab\u00edas vivido','hab\u00eda vivido','hab\u00edamos vivido','hab\u00edais vivido','hab\u00edan vivido'],
                    Subjunctive: ['viva','vivas','viva','vivamos','viv\u00e1is','vivan']
                },
                info: {
                    Present: {formation:'Stem viv- + -o, -es, -e, -imos, -\u00eds, -en.',usage:'Regular -ir verb pattern.'},
                    Perfect: {formation:'haber + vivido.',usage:'"I have lived".'},
                    Imperfect: {formation:'Stem viv- + -\u00eda, -\u00edas, -\u00eda, -\u00edamos, -\u00edais, -\u00edan.',usage:'"I was living / I used to live".'},
                    Future: {formation:'Infinitive vivir + future endings.',usage:'"I will live".'},
                    Conditional: {formation:'Infinitive vivir + conditional endings.',usage:'"I would live".'},
                    Pluperfect: {formation:'haber (imperfect) + vivido.',usage:'"I had lived".'},
                    Subjunctive: {formation:'Stem viv- + -a, -as, -a, -amos, -\u00e1is, -an.',usage:'After subjunctive triggers.'}
                }
            }
        }
    }
};

const TENSE_COLOURS = [
    '#7c4dff', '#e040fb', '#00bcd4', '#ff6d00',
    '#43a047', '#e53935', '#5c6bc0'
];

/* ====== STATE ====== */
let currentLang = 'French';
let currentVerb = null;
let currentTense = null;
let score = 0;
let total = 0;
let streak = 0;
let wheelRotation = 0;
let isSpinning = false;

/* ====== INIT ====== */
function init() {
    renderLangTabs();
    renderVerbSelector();
    drawWheel();
}

function renderLangTabs() {
    const container = document.getElementById('langTabs');
    container.innerHTML = '';
    Object.keys(LANGUAGES).forEach(lang => {
        const btn = document.createElement('button');
        btn.className = 'lang-tab' + (lang === currentLang ? ' active' : '');
        btn.textContent = lang;
        btn.onclick = () => {
            currentLang = lang;
            currentVerb = null;
            currentTense = null;
            renderLangTabs();
            renderVerbSelector();
            drawWheel();
            renderRightPanel();
        };
        container.appendChild(btn);
    });
}

function renderVerbSelector() {
    const container = document.getElementById('verbSelector');
    container.innerHTML = '';
    const verbs = LANGUAGES[currentLang].verbs;
    Object.keys(verbs).forEach(key => {
        const v = verbs[key];
        const btn = document.createElement('button');
        btn.className = 'verb-btn' + (currentVerb === key ? ' active' : '');
        btn.innerHTML = (v.display || key) + ' <span style="font-weight:400;opacity:0.7">(' + v.meaning + ')</span>' +
            (v.irregular ? ' <span class="irr-dot"></span>' : '');
        btn.onclick = () => {
            currentVerb = key;
            currentTense = null;
            renderVerbSelector();
            drawWheel();
            renderRightPanel();
        };
        container.appendChild(btn);
    });
}

/* ====== WHEEL ====== */
function drawWheel() {
    const svg = document.getElementById('wheelSvg');
    svg.innerHTML = '';
    const tenses = LANGUAGES[currentLang].tenses;
    const cx = 210, cy = 210, r = 190, innerR = 55;
    const count = tenses.length;
    const angleStep = (2 * Math.PI) / count;

    // Draw segments
    tenses.forEach((tense, i) => {
        const startAngle = i * angleStep - Math.PI / 2 + (wheelRotation * Math.PI / 180);
        const endAngle = (i + 1) * angleStep - Math.PI / 2 + (wheelRotation * Math.PI / 180);

        const x1 = cx + r * Math.cos(startAngle);
        const y1 = cy + r * Math.sin(startAngle);
        const x2 = cx + r * Math.cos(endAngle);
        const y2 = cy + r * Math.sin(endAngle);
        const ix1 = cx + innerR * Math.cos(startAngle);
        const iy1 = cy + innerR * Math.sin(startAngle);
        const ix2 = cx + innerR * Math.cos(endAngle);
        const iy2 = cy + innerR * Math.sin(endAngle);

        const largeArc = angleStep > Math.PI ? 1 : 0;

        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
        const d = `M ${ix1} ${iy1} L ${x1} ${y1} A ${r} ${r} 0 ${largeArc} 1 ${x2} ${y2} L ${ix2} ${iy2} A ${innerR} ${innerR} 0 ${largeArc} 0 ${ix1} ${iy1} Z`;
        path.setAttribute('d', d);
        path.setAttribute('fill', TENSE_COLOURS[i]);
        path.setAttribute('stroke', 'white');
        path.setAttribute('stroke-width', '2');
        path.classList.add('wheel-segment');

        if (currentTense === tense) {
            path.setAttribute('stroke', '#ffd600');
            path.setAttribute('stroke-width', '4');
            path.style.filter = 'brightness(1.15)';
        }

        path.onclick = (e) => {
            e.stopPropagation();
            if (!isSpinning) {
                currentTense = tense;
                drawWheel();
                renderRightPanel();
            }
        };
        svg.appendChild(path);

        // Label
        const midAngle = (startAngle + endAngle) / 2;
        const labelR = (r + innerR) / 2 + 10;
        const lx = cx + labelR * Math.cos(midAngle);
        const ly = cy + labelR * Math.sin(midAngle);
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('x', lx);
        text.setAttribute('y', ly);
        text.classList.add('wheel-tense-label');

        // Rotate text to be readable
        let rot = (midAngle * 180 / Math.PI) + 90;
        if (rot > 90 && rot < 270) rot += 180;
        if (rot > 360) rot -= 360;
        text.setAttribute('transform', `rotate(${midAngle * 180 / Math.PI}, ${lx}, ${ly})`);
        text.textContent = tense;
        svg.appendChild(text);
    });

    // Centre circle
    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    circle.setAttribute('cx', cx);
    circle.setAttribute('cy', cy);
    circle.setAttribute('r', innerR);
    circle.setAttribute('fill', 'var(--purple-900)');
    circle.setAttribute('stroke', 'white');
    circle.setAttribute('stroke-width', '3');
    circle.style.cursor = 'pointer';
    circle.onclick = () => { if (!isSpinning) spinWheel(); };
    svg.appendChild(circle);

    // Centre text
    const verbData = currentVerb ? LANGUAGES[currentLang].verbs[currentVerb] : null;
    const centerText = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    centerText.setAttribute('x', cx);
    centerText.setAttribute('y', cy);
    centerText.classList.add('wheel-center-label');
    centerText.textContent = verbData ? (verbData.display || currentVerb) : 'Spin';
    centerText.style.pointerEvents = 'none';
    svg.appendChild(centerText);
}

function spinWheel() {
    if (isSpinning) return;
    isSpinning = true;
    const tenses = LANGUAGES[currentLang].tenses;
    const targetIndex = Math.floor(Math.random() * tenses.length);
    const extraSpins = 3 + Math.floor(Math.random() * 3);
    const angleStep = 360 / tenses.length;
    const targetAngle = extraSpins * 360 + targetIndex * angleStep;
    const startRotation = wheelRotation;
    const duration = 2500;
    const startTime = performance.now();

    function animate(now) {
        const elapsed = now - startTime;
        const progress = Math.min(elapsed / duration, 1);
        // Ease out cubic
        const eased = 1 - Math.pow(1 - progress, 3);
        wheelRotation = startRotation + targetAngle * eased;
        drawWheel();
        if (progress < 1) {
            requestAnimationFrame(animate);
        } else {
            isSpinning = false;
            currentTense = tenses[targetIndex];
            drawWheel();
            renderRightPanel();
        }
    }
    requestAnimationFrame(animate);
}

/* ====== RIGHT PANEL ====== */
function renderRightPanel() {
    const panel = document.getElementById('rightPanel');

    if (!currentVerb || !currentTense) {
        panel.innerHTML = '<div class="card"><div class="placeholder-msg"><span class="arrow">&larr;</span>' +
            (currentVerb ? 'Now click a tense segment on the wheel.' : 'Select a verb above, then click a tense segment on the wheel to begin conjugating.') +
            '</div></div>';
        return;
    }

    const langData = LANGUAGES[currentLang];
    const verbData = langData.verbs[currentVerb];
    const conjugations = verbData.conjugations[currentTense];
    const info = verbData.info[currentTense];
    const tenseIndex = langData.tenses.indexOf(currentTense);
    const colour = TENSE_COLOURS[tenseIndex];

    let html = '<div class="card">';
    html += '<h2><span class="tense-title-badge" style="background:' + colour + '">' + currentTense + '</span> ' +
        (verbData.display || currentVerb) + ' (' + verbData.meaning + ')' +
        (verbData.irregular ? ' <span style="color:var(--irregular);font-size:0.75rem;font-weight:600">IRREGULAR</span>' : '') + '</h2>';

    html += '<table class="conj-table"><thead><tr><th>Pronoun</th><th>Your answer</th><th></th></tr></thead><tbody>';

    langData.pronouns.forEach((pronoun, i) => {
        html += '<tr>';
        html += '<td class="pronoun-cell">' + pronoun + '</td>';
        html += '<td class="answer-cell"><input type="text" class="answer-input" id="ans_' + i + '" data-index="' + i + '" autocomplete="off" autocorrect="off" spellcheck="false" placeholder="Type conjugation...">';
        html += '<span class="feedback-icon" id="fb_' + i + '"></span>';
        html += '<div class="correct-answer" id="ca_' + i + '"></div></td>';
        html += '<td id="hl_' + i + '"></td>';
        html += '</tr>';
    });

    html += '</tbody></table>';

    // Legend
    html += '<div class="legend">';
    html += '<div class="legend-item"><div class="legend-dot" style="background:var(--purple-200)"></div> Regular ending</div>';
    html += '<div class="legend-item"><div class="legend-dot" style="background:var(--stem-change)"></div> Stem change</div>';
    html += '<div class="legend-item"><div class="legend-dot" style="background:var(--irregular)"></div> Irregular</div>';
    html += '</div>';

    html += '<button class="check-all-btn" onclick="checkAll()">Check all answers</button>';
    html += '<button class="reset-btn" onclick="resetInputs()" style="margin-top:6px">Clear answers</button>';
    html += '</div>';

    // Info panel
    html += '<div class="card info-panel">';
    html += '<h3>Formation</h3>';
    html += '<div class="rule-example">' + info.formation + '</div>';
    html += '<h3>Usage</h3>';
    html += '<p>' + info.usage + '</p>';
    html += '</div>';

    panel.innerHTML = html;

    // Add live checking to inputs
    langData.pronouns.forEach((_, i) => {
        const input = document.getElementById('ans_' + i);
        if (input) {
            input.addEventListener('input', () => liveCheck(i));
            input.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    const nextInput = document.getElementById('ans_' + (i + 1));
                    if (nextInput) nextInput.focus();
                    else checkAll();
                }
            });
        }
    });

    // Focus first input
    setTimeout(() => {
        const first = document.getElementById('ans_0');
        if (first) first.focus();
    }, 100);
}

function normalise(str) {
    return str.trim().toLowerCase().replace(/\s+/g, ' ');
}

function liveCheck(index) {
    const input = document.getElementById('ans_' + index);
    const fb = document.getElementById('fb_' + index);
    const ca = document.getElementById('ca_' + index);
    const hl = document.getElementById('hl_' + index);
    if (!input || !currentVerb || !currentTense) return;

    const val = normalise(input.value);
    const langData = LANGUAGES[currentLang];
    const verbData = langData.verbs[currentVerb];
    const correct = normalise(verbData.conjugations[currentTense][index]);

    input.classList.remove('correct', 'incorrect');
    fb.textContent = '';
    ca.textContent = '';
    hl.innerHTML = '';

    if (val === '') return;

    // Accept answer with or without brackets content for French aller perfect
    const correctAlts = [correct];
    if (correct.includes('(')) {
        correctAlts.push(correct.replace(/\([^)]*\)/g, '').replace(/\s+/g, ' ').trim());
        correctAlts.push(correct.replace(/[()]/g, '').replace(/\s+/g, ' ').trim());
    }

    if (correctAlts.includes(val)) {
        input.classList.add('correct');
        fb.textContent = '\u2713';
        fb.style.color = 'var(--green-500)';
        showHighlight(index, correct, verbData.irregular);
    }
}

function checkAll() {
    const langData = LANGUAGES[currentLang];
    const verbData = langData.verbs[currentVerb];
    if (!verbData || !currentTense) return;

    let allCorrect = true;
    let answered = 0;

    langData.pronouns.forEach((_, i) => {
        const input = document.getElementById('ans_' + i);
        const fb = document.getElementById('fb_' + i);
        const ca = document.getElementById('ca_' + i);
        if (!input) return;

        const val = normalise(input.value);
        const correct = normalise(verbData.conjugations[currentTense][i]);

        const correctAlts = [correct];
        if (correct.includes('(')) {
            correctAlts.push(correct.replace(/\([^)]*\)/g, '').replace(/\s+/g, ' ').trim());
            correctAlts.push(correct.replace(/[()]/g, '').replace(/\s+/g, ' ').trim());
        }

        input.classList.remove('correct', 'incorrect');

        if (val === '') {
            input.classList.add('incorrect');
            fb.textContent = '\u2717';
            fb.style.color = 'var(--red-500)';
            ca.textContent = verbData.conjugations[currentTense][i];
            allCorrect = false;
            answered++;
        } else if (correctAlts.includes(val)) {
            input.classList.add('correct');
            fb.textContent = '\u2713';
            fb.style.color = 'var(--green-500)';
            ca.textContent = '';
            showHighlight(i, correct, verbData.irregular);
            answered++;
        } else {
            input.classList.add('incorrect');
            fb.textContent = '\u2717';
            fb.style.color = 'var(--red-500)';
            ca.textContent = verbData.conjugations[currentTense][i];
            allCorrect = false;
            answered++;
        }
    });

    // Update score
    langData.pronouns.forEach((_, i) => {
        const input = document.getElementById('ans_' + i);
        if (input && normalise(input.value) !== '') {
            total++;
            if (input.classList.contains('correct')) score++;
        }
    });

    if (allCorrect && answered === langData.pronouns.length) {
        streak++;
    } else {
        streak = 0;
    }

    updateScore();
}

function showHighlight(index, correct, isIrregular) {
    const hl = document.getElementById('hl_' + index);
    if (!hl) return;
    if (isIrregular) {
        hl.innerHTML = '<span class="ending-highlight ending-irregular">irregular</span>';
    } else {
        hl.innerHTML = '<span class="ending-highlight ending-regular">regular</span>';
    }
}

function resetInputs() {
    const langData = LANGUAGES[currentLang];
    langData.pronouns.forEach((_, i) => {
        const input = document.getElementById('ans_' + i);
        const fb = document.getElementById('fb_' + i);
        const ca = document.getElementById('ca_' + i);
        const hl = document.getElementById('hl_' + i);
        if (input) { input.value = ''; input.classList.remove('correct', 'incorrect'); }
        if (fb) fb.textContent = '';
        if (ca) ca.textContent = '';
        if (hl) hl.innerHTML = '';
    });
    const first = document.getElementById('ans_0');
    if (first) first.focus();
}

function updateScore() {
    document.getElementById('scoreDisplay').textContent = score;
    document.getElementById('totalDisplay').textContent = total;
    document.getElementById('streakDisplay').textContent = streak > 1 ? streak + ' streak' : '';
}

init();
</script>
</body>
</html>