<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bloom's Taxonomy Question Builder</title>
<style>
:root {
  --bg: #f5f6fa;
  --surface: #ffffff;
  --text: #1e1e2e;
  --text-light: #5a5a72;
  --border: #e0e0e8;
  --shadow: 0 2px 8px rgba(0,0,0,0.08);
  --shadow-lg: 0 4px 16px rgba(0,0,0,0.12);
  --radius: 8px;
  --radius-lg: 12px;
  --remember: #e74c3c;
  --understand: #e67e22;
  --apply: #f1c40f;
  --analyse: #27ae60;
  --evaluate: #2980b9;
  --create: #8e44ad;
  --remember-bg: #fde8e8;
  --understand-bg: #fef0e2;
  --apply-bg: #fef9e2;
  --analyse-bg: #e8f8ee;
  --evaluate-bg: #e2f0fa;
  --create-bg: #f3e8f9;
  --remember-dark: #c0392b;
  --understand-dark: #d35400;
  --apply-dark: #d4ac0d;
  --analyse-dark: #1e8449;
  --evaluate-dark: #1f6da0;
  --create-dark: #6c3483;
  --header-h: 64px;
  --transition: 0.25s ease;
}

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
}

/* ===== HEADER ===== */
header {
  position: sticky;
  top: 0;
  z-index: 100;
  background: linear-gradient(135deg, var(--create), var(--evaluate));
  color: #fff;
  height: var(--header-h);
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 24px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.18);
}

.header-left { display: flex; flex-direction: column; gap: 1px; }
header h1 { font-size: 1.3rem; font-weight: 700; letter-spacing: -0.3px; }
header p { font-size: 0.78rem; opacity: 0.9; }

nav { display: flex; gap: 6px; }
nav button {
  background: rgba(255,255,255,0.15);
  border: 2px solid transparent;
  color: #fff;
  padding: 6px 16px;
  border-radius: 20px;
  cursor: pointer;
  font-size: 0.84rem;
  font-weight: 600;
  transition: all var(--transition);
}
nav button:hover { background: rgba(255,255,255,0.28); }
nav button.active { background: #fff; color: var(--create); border-color: #fff; }

/* ===== LAYOUT ===== */
.container { max-width: 1120px; margin: 0 auto; padding: 20px 20px 40px; }
.panel { display: none; animation: fadeIn 0.3s ease; }
.panel.active { display: block; }

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ===== EXPLORE: PYRAMID ===== */
.pyramid-wrap {
  display: flex;
  gap: 28px;
  align-items: flex-start;
  margin-bottom: 24px;
}

.pyramid {
  position: relative;
  width: 380px;
  min-width: 320px;
  flex-shrink: 0;
}

.pyramid-level {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 0 auto;
  cursor: pointer;
  color: #fff;
  font-weight: 700;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  transition: all var(--transition);
  border: 3px solid transparent;
  text-shadow: 0 1px 3px rgba(0,0,0,0.25);
  position: relative;
}

.pyramid-level::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255,255,255,0);
  transition: background var(--transition);
  pointer-events: none;
}

.pyramid-level:hover::after { background: rgba(255,255,255,0.12); }
.pyramid-level:hover { transform: scale(1.04); }

.pyramid-level.selected {
  border-color: #fff;
  box-shadow: 0 0 20px rgba(0,0,0,0.25);
  transform: scale(1.06);
}

.pyramid-level.selected::after { background: rgba(255,255,255,0.08); }

/* Pyramid level number badges */
.pyramid-level .level-num {
  position: absolute;
  left: 8px;
  font-size: 0.65rem;
  opacity: 0.7;
  font-weight: 400;
}

/* ===== DETAIL PANEL ===== */
.detail-panel {
  flex: 1;
  background: var(--surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  padding: 24px;
  min-height: 400px;
  transition: box-shadow var(--transition);
}

.detail-panel:hover { box-shadow: var(--shadow-lg); }
.detail-panel h2 { font-size: 1.4rem; margin-bottom: 4px; }
.detail-panel .level-desc { color: var(--text-light); margin-bottom: 14px; font-size: 0.92rem; }

.section-label {
  font-size: 0.75rem;
  text-transform: uppercase;
  letter-spacing: 0.8px;
  color: var(--text-light);
  margin-bottom: 6px;
  font-weight: 700;
}

.verbs {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin-bottom: 18px;
}

.verb-tag {
  padding: 3px 11px;
  border-radius: 12px;
  font-size: 0.78rem;
  font-weight: 600;
  transition: transform 0.15s;
}

.verb-tag:hover { transform: scale(1.08); }

.stems-list {
  list-style: none;
  margin-bottom: 18px;
  columns: 2;
  column-gap: 20px;
}

.stems-list li {
  padding: 5px 0;
  font-size: 0.88rem;
  border-bottom: 1px solid var(--border);
  break-inside: avoid;
}

.stems-list li::before { content: '\201C'; font-weight: 700; margin-right: 2px; }
.stems-list li::after { content: '\201D'; font-weight: 700; }

.subject-row {
  display: flex;
  gap: 8px;
  align-items: center;
  margin-bottom: 14px;
  flex-wrap: wrap;
}

.subject-btn {
  padding: 5px 14px;
  border-radius: 16px;
  border: 2px solid var(--border);
  background: var(--surface);
  cursor: pointer;
  font-size: 0.82rem;
  font-weight: 600;
  transition: all var(--transition);
}

.subject-btn:hover { border-color: var(--text-light); }
.subject-btn.active { color: #fff; }

.example-q {
  background: var(--bg);
  border-radius: var(--radius);
  padding: 12px 16px;
  margin-bottom: 8px;
  font-size: 0.9rem;
  border-left: 4px solid var(--border);
  transition: transform 0.15s;
}

.example-q:hover { transform: translateX(4px); }

.generate-area {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-top: 16px;
  flex-wrap: wrap;
}

.generate-btn {
  padding: 10px 24px;
  border: none;
  border-radius: 20px;
  color: #fff;
  font-weight: 700;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all var(--transition);
  box-shadow: 0 2px 8px rgba(0,0,0,0.15);
}

.generate-btn:hover { opacity: 0.88; transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.generate-btn:active { transform: translateY(0); }

.generated-output {
  margin-top: 12px;
  padding: 14px 18px;
  background: var(--bg);
  border-radius: var(--radius);
  font-size: 1rem;
  font-weight: 500;
  min-height: 50px;
  border-left: 4px solid var(--border);
  transition: opacity 0.2s;
}

.empty-state {
  text-align: center;
  padding: 60px 20px;
  color: var(--text-light);
  font-size: 1rem;
}

.empty-state .arrow-hint {
  font-size: 2rem;
  display: block;
  margin-bottom: 8px;
  opacity: 0.4;
}

/* ===== PRACTICE MODE ===== */
.practice-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
  flex-wrap: wrap;
  gap: 10px;
}

.practice-controls {
  display: flex;
  align-items: center;
  gap: 16px;
  flex-wrap: wrap;
}

.score-bar { font-size: 0.92rem; font-weight: 600; color: var(--text-light); }
.score-bar span { font-size: 1.3rem; color: var(--text); }

.progress-bar-wrap {
  width: 160px;
  height: 8px;
  background: var(--border);
  border-radius: 4px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--evaluate), var(--create));
  border-radius: 4px;
  transition: width 0.4s ease;
}

.practice-layout {
  display: flex;
  gap: 20px;
  align-items: flex-start;
}

.question-bank {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-height: 200px;
}

.q-card {
  background: var(--surface);
  border: 2px solid var(--border);
  border-radius: var(--radius);
  padding: 11px 15px;
  cursor: grab;
  font-size: 0.88rem;
  transition: all var(--transition);
  user-select: none;
  position: relative;
}

.q-card:hover:not(.correct):not(.incorrect) {
  border-color: var(--evaluate);
  box-shadow: var(--shadow);
  transform: translateX(3px);
}

.q-card:active { cursor: grabbing; }
.q-card.correct { border-color: var(--analyse); background: var(--analyse-bg); cursor: default; }
.q-card.incorrect { border-color: var(--remember); background: var(--remember-bg); cursor: default; }

.q-card .feedback {
  font-size: 0.78rem;
  margin-top: 5px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 4px;
}

.drop-zones {
  width: 260px;
  display: flex;
  flex-direction: column;
  gap: 6px;
  position: sticky;
  top: calc(var(--header-h) + 20px);
}

.drop-zone {
  border: 2px dashed;
  border-radius: var(--radius);
  padding: 12px 10px;
  text-align: center;
  font-weight: 700;
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  min-height: 52px;
  transition: all var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
}

.drop-zone.drag-over {
  transform: scale(1.06);
  box-shadow: 0 0 16px rgba(0,0,0,0.15);
  border-style: solid;
}

.drop-zone .drop-count {
  font-size: 0.7rem;
  opacity: 0.7;
  margin-left: 6px;
  font-weight: 400;
}

.reset-btn {
  padding: 8px 20px;
  border: 2px solid var(--border);
  background: var(--surface);
  border-radius: 20px;
  cursor: pointer;
  font-weight: 600;
  font-size: 0.85rem;
  transition: all var(--transition);
}

.reset-btn:hover { background: var(--bg); border-color: var(--text-light); }

.completion-banner {
  background: linear-gradient(135deg, var(--analyse), var(--evaluate));
  color: #fff;
  padding: 16px 24px;
  border-radius: var(--radius-lg);
  margin-bottom: 16px;
  text-align: center;
  font-weight: 600;
  font-size: 1.05rem;
  box-shadow: var(--shadow-lg);
  display: none;
}

.completion-banner.show { display: block; }

/* ===== REFERENCE GRID ===== */
.ref-intro {
  color: var(--text-light);
  margin-bottom: 16px;
  font-size: 0.92rem;
}

.ref-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 16px;
  margin-bottom: 24px;
}

.ref-card {
  background: var(--surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  overflow: hidden;
  transition: transform var(--transition), box-shadow var(--transition);
}

.ref-card:hover { transform: translateY(-3px); box-shadow: var(--shadow-lg); }

.ref-card-header {
  padding: 14px 18px;
  color: #fff;
  font-weight: 700;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.6px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ref-card-header .level-type {
  font-size: 0.68rem;
  opacity: 0.8;
  font-weight: 400;
  text-transform: none;
  letter-spacing: 0;
}

.ref-card-body { padding: 16px 18px; font-size: 0.85rem; }
.ref-card-body h4 {
  margin-bottom: 4px;
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--text-light);
}

.ref-card-body p.ref-desc {
  color: var(--text-light);
  margin-bottom: 10px;
  font-size: 0.84rem;
  font-style: italic;
}

.ref-card-body .verb-list { margin-bottom: 10px; color: var(--text); }
.ref-card-body ul { list-style: none; margin-bottom: 10px; }
.ref-card-body li { padding: 2px 0; font-size: 0.84rem; }
.ref-card-body li::before { content: '> '; font-weight: 700; opacity: 0.5; }

/* ===== INFO PANEL ===== */
.info-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 16px;
}

.info-section {
  background: var(--surface);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  padding: 24px 28px;
}

.info-section h2 {
  font-size: 1.15rem;
  margin-bottom: 10px;
  color: var(--create);
  display: flex;
  align-items: center;
  gap: 8px;
}

.info-section h3 { font-size: 0.98rem; margin: 14px 0 6px; color: var(--text); }
.info-section p { font-size: 0.9rem; color: var(--text-light); margin-bottom: 8px; }
.info-section ul { margin-left: 20px; margin-bottom: 10px; }
.info-section li { font-size: 0.9rem; color: var(--text-light); margin-bottom: 3px; }

.info-section .highlight-box {
  background: var(--create-bg);
  border-left: 4px solid var(--create);
  padding: 12px 16px;
  border-radius: 0 var(--radius) var(--radius) 0;
  margin: 12px 0;
  font-size: 0.9rem;
  color: var(--text);
}

/* ===== RESPONSIVE ===== */
@media (max-width: 900px) {
  .stems-list { columns: 1; }
}

@media (max-width: 768px) {
  .pyramid-wrap { flex-direction: column; }
  .pyramid { width: 100%; min-width: unset; }
  .practice-layout { flex-direction: column-reverse; }
  .drop-zones {
    width: 100%;
    flex-direction: row;
    flex-wrap: wrap;
    position: static;
  }
  .drop-zone { flex: 1; min-width: 130px; }
  header { padding: 0 12px; flex-wrap: wrap; height: auto; min-height: var(--header-h); padding: 10px 12px; }
  header h1 { font-size: 1.05rem; }
  nav { gap: 4px; }
  nav button { padding: 4px 10px; font-size: 0.76rem; }
  .ref-grid { grid-template-columns: 1fr; }
}

@media print {
  header, nav { position: static; }
  .panel { display: block !important; page-break-inside: avoid; margin-bottom: 24px; }
  .pyramid-level { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
  .ref-card-header { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
}
</style>
</head>
<body>

<header>
  <div class="header-left">
    <h1>Bloom's Taxonomy Question Builder</h1>
    <p>Classify and generate questions across six cognitive levels</p>
  </div>
  <nav>
    <button class="active" data-tab="explore">Explore</button>
    <button data-tab="practice">Practice</button>
    <button data-tab="reference">Reference</button>
    <button data-tab="info">Info</button>
  </nav>
</header>

<div class="container">
  <!-- ===== EXPLORE ===== -->
  <div id="explore" class="panel active">
    <div class="pyramid-wrap">
      <div class="pyramid" id="pyramidContainer"></div>
      <div class="detail-panel" id="detailPanel">
        <div class="empty-state">
          <span class="arrow-hint">&larr;</span>
          Click a level on the pyramid to explore its question stems, key verbs, and subject-specific examples.
        </div>
      </div>
    </div>
  </div>

  <!-- ===== PRACTICE ===== -->
  <div id="practice" class="panel">
    <div id="completionBanner" class="completion-banner">
      All questions sorted! Well done.
    </div>
    <div class="practice-header">
      <div>
        <h2>Sort the Questions</h2>
        <p style="color:var(--text-light);font-size:0.88rem;">Drag each question card to the correct Bloom's level on the right.</p>
      </div>
      <div class="practice-controls">
        <div class="score-bar">Score: <span id="scoreVal">0</span> / <span id="totalVal">0</span></div>
        <div class="progress-bar-wrap">
          <div class="progress-bar-fill" id="progressBar" style="width:0%"></div>
        </div>
        <button class="reset-btn" onclick="resetPractice()">Reset</button>
      </div>
    </div>
    <div class="practice-layout">
      <div class="question-bank" id="questionBank"></div>
      <div class="drop-zones" id="dropZones"></div>
    </div>
  </div>

  <!-- ===== REFERENCE ===== -->
  <div id="reference" class="panel">
    <h2 style="margin-bottom:6px;">Quick Reference: All Levels</h2>
    <p class="ref-intro">A printable overview of every Bloom's level with key verbs and question stems. Use Ctrl+P to print.</p>
    <div class="ref-grid" id="refGrid"></div>
  </div>

  <!-- ===== INFO ===== -->
  <div id="info" class="panel">
    <div class="info-grid">
      <div class="info-section">
        <h2>What is Bloom's Taxonomy?</h2>
        <p>Bloom's Taxonomy is a hierarchical framework for classifying educational learning objectives into levels of complexity and specificity. Originally published in 1956 by Benjamin Bloom and a committee of educational psychologists, it remains one of the most widely used tools in education for lesson planning, assessment design, and curriculum development.</p>
        <p>The taxonomy organises cognitive skills into six levels, from lower-order thinking (remembering facts) through to higher-order thinking (creating new ideas and evaluating arguments). The framework helps teachers ensure their questioning and assessment tasks span the full range of cognitive demand.</p>
        <div class="highlight-box">
          The three lower levels (Remember, Understand, Apply) are often grouped as "lower-order thinking skills" (LOTS), while the three upper levels (Analyse, Evaluate, Create) are "higher-order thinking skills" (HOTS).
        </div>
      </div>

      <div class="info-section">
        <h2>The Revised Taxonomy (Anderson and Krathwohl, 2001)</h2>
        <p>In 2001, Lorin Anderson (a former student of Bloom) and David Krathwohl published a revised version of the taxonomy. Key changes included:</p>
        <ul>
          <li>Renaming categories from nouns to verbs (e.g. "Knowledge" became "Remember", "Synthesis" became "Create").</li>
          <li>Swapping the top two levels: "Create" (formerly Synthesis) moved above "Evaluate", reflecting the view that generating original work is the highest cognitive demand.</li>
          <li>Adding a Knowledge Dimension (Factual, Conceptual, Procedural, Metacognitive) alongside the Cognitive Process Dimension.</li>
        </ul>
        <p>The revised taxonomy is the version most commonly used in schools today and is the basis for this tool.</p>
        <h3>The Knowledge Dimension</h3>
        <p>The revised taxonomy added a second axis. Any learning objective can be classified by both its cognitive process (the six levels) and the type of knowledge involved: <strong>Factual</strong> (basic elements, terminology), <strong>Conceptual</strong> (principles, theories, models), <strong>Procedural</strong> (methods, techniques, algorithms), and <strong>Metacognitive</strong> (awareness of one's own cognition).</p>
      </div>

      <div class="info-section">
        <h2>Why Higher-Order Thinking Matters</h2>
        <p>Research consistently shows that students who are regularly exposed to higher-order questioning and tasks develop deeper understanding, stronger problem-solving skills, and better retention. Lower-order questions (recall and comprehension) are necessary but not sufficient. Effective teaching moves students up through the taxonomy so they can:</p>
        <ul>
          <li>Transfer knowledge to new contexts (Apply).</li>
          <li>Break problems into components and identify patterns (Analyse).</li>
          <li>Make evidence-based judgements (Evaluate).</li>
          <li>Produce original solutions, arguments, or products (Create).</li>
        </ul>
        <p>A common pitfall is spending too much lesson time at the Remember and Understand levels. Bloom's Taxonomy helps teachers audit the cognitive demand of their lessons and deliberately build in higher-order tasks.</p>
        <div class="highlight-box">
          Research by Hattie (2009) found that higher-order questioning has an effect size of 0.73 on student achievement, placing it well above the average intervention.
        </div>
      </div>

      <div class="info-section">
        <h2>Planning Lessons Using Bloom's Taxonomy</h2>
        <h3>Step 1: Identify the Learning Objective</h3>
        <p>Start with the knowledge or skill you want students to acquire. Use a verb from the appropriate Bloom's level. For example: "Students will evaluate the reliability of primary sources" (Evaluate level).</p>
        <h3>Step 2: Design Questions Across Levels</h3>
        <p>Plan a sequence of questions that scaffolds from lower to higher order. Begin with recall questions to activate prior knowledge, then move through understanding and application before reaching analysis, evaluation, or creation.</p>
        <h3>Step 3: Match Activities to Levels</h3>
        <p>Choose learning activities that demand the right level of thinking. A "sort these into categories" task targets Analyse; a "write a persuasive speech" task targets Create. Use the verb lists and question stems in this tool to help align your activities.</p>
        <h3>Step 4: Differentiate Through the Taxonomy</h3>
        <p>The taxonomy provides a natural scaffold for differentiation. All students can access lower-order tasks; extension tasks push into higher-order levels. This is more effective than simply giving faster students more of the same work.</p>
        <h3>Step 5: Assess at the Right Level</h3>
        <p>Align your assessment with your learning objectives. If the objective targets "Evaluate", the assessment should demand evaluation, not just recall. Use the verb lists to audit your exam questions and ensure they match the intended cognitive level.</p>
      </div>

      <div class="info-section">
        <h2>Common Misconceptions</h2>
        <ul>
          <li><strong>"You must always start at the bottom."</strong> While scaffolding is valuable, experienced learners can engage with higher-order tasks directly. The taxonomy is not a rigid sequence.</li>
          <li><strong>"Higher is always better."</strong> All levels are important. A lesson consolidating factual recall can be just as valuable as one requiring evaluation.</li>
          <li><strong>"Each question fits neatly into one level."</strong> In practice, questions often span multiple levels. The taxonomy is a planning tool, not a strict classification.</li>
          <li><strong>"Bloom's applies only to questions."</strong> The taxonomy applies to any learning activity, task, or outcome, not just teacher questions.</li>
        </ul>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== DATA ===== */
const LEVELS = [
  {
    key: 'create', label: 'Create', color: 'var(--create)', bg: 'var(--create-bg)', hex: '#8e44ad',
    order: 6, type: 'Higher-Order',
    desc: 'Produce new or original work. Combine elements to form a coherent whole, generate new ideas, or design novel solutions.',
    verbs: ['design','construct','develop','formulate','compose','invent','plan','produce','propose','assemble'],
    stems: [
      'How would you design...?',
      'What would happen if you combined...?',
      'Can you propose a solution to...?',
      'How could you improve...?',
      'What alternative would you suggest for...?',
      'How would you compose...?',
      'Can you invent a new way to...?',
      'What plan would you devise for...?',
      'How would you construct a model of...?',
      'Can you formulate a theory about...?'
    ],
    examples: {
      English: [
        'Write an alternative ending for the novel that changes the theme.',
        'Design a poetry anthology around the concept of identity.',
        'Compose a monologue for a new character who could appear in the play.'
      ],
      Maths: [
        'Develop a real-world problem that requires simultaneous equations to solve.',
        'Design a survey and sampling method for a statistical investigation.',
        'Construct a proof for why the interior angles of a polygon sum to (n-2) x 180.'
      ],
      Science: [
        'Design an experiment to test how temperature affects enzyme activity.',
        'Propose a method to reduce carbon emissions in your local area.',
        'Invent a device that uses electromagnetic induction for a practical purpose.'
      ],
      History: [
        'Compose a diary entry from the perspective of a soldier at the Somme.',
        'Design a memorial that represents the causes and consequences of the English Civil War.',
        'Propose an alternative treaty that might have prevented World War II.'
      ]
    }
  },
  {
    key: 'evaluate', label: 'Evaluate', color: 'var(--evaluate)', bg: 'var(--evaluate-bg)', hex: '#2980b9',
    order: 5, type: 'Higher-Order',
    desc: 'Justify a decision or course of action. Make judgements based on criteria and evidence; critique and appraise.',
    verbs: ['justify','judge','critique','assess','argue','defend','evaluate','prioritise','recommend','appraise'],
    stems: [
      'Do you agree that...? Why or why not?',
      'How would you justify...?',
      'What is the strongest argument for...?',
      'Which is more important,...?',
      'How would you evaluate the effectiveness of...?',
      'What criteria would you use to assess...?',
      'Can you defend the position that...?',
      'What are the strengths and weaknesses of...?',
      'How would you prioritise...?',
      'Is there a better solution than...?'
    ],
    examples: {
      English: [
        'Do you agree that the narrator is unreliable? Justify your answer with evidence.',
        'Evaluate how effectively the writer uses pathetic fallacy in Chapter 3.',
        'Which character has the strongest claim to being the tragic hero? Defend your choice.'
      ],
      Maths: [
        'Is the mean or median a better measure of average for this data set? Justify your answer.',
        'Evaluate whether a sample size of 30 is sufficient for this investigation.',
        'Critique the following proof and identify any logical errors.'
      ],
      Science: [
        'Evaluate the reliability of this experiment given the sample size and method.',
        'Which renewable energy source would be most effective for the UK? Justify your recommendation.',
        'Assess the ethical arguments for and against genetic modification of crops.'
      ],
      History: [
        'How far do you agree that the Treaty of Versailles was the main cause of World War II?',
        'Evaluate the usefulness of Source B for an enquiry into life in the trenches.',
        'Which factor was most significant in causing the decline of the Roman Empire? Justify your choice.'
      ]
    }
  },
  {
    key: 'analyse', label: 'Analyse', color: 'var(--analyse)', bg: 'var(--analyse-bg)', hex: '#27ae60',
    order: 4, type: 'Higher-Order',
    desc: 'Break information into parts. Identify patterns, causes, motives, and relationships between components.',
    verbs: ['compare','contrast','examine','categorise','distinguish','investigate','analyse','deconstruct','differentiate','organise'],
    stems: [
      'What are the differences between...?',
      'How does... relate to...?',
      'What patterns can you identify in...?',
      'What is the relationship between...?',
      'How would you categorise...?',
      'What evidence supports...?',
      'What are the causes of...?',
      'How can you distinguish between...?',
      'What motives are behind...?',
      'How would you deconstruct the argument that...?'
    ],
    examples: {
      English: [
        'Compare how the two poets present the theme of conflict.',
        'What patterns can you identify in the writer\'s use of sentence structure?',
        'Examine the relationship between setting and mood in the opening chapter.'
      ],
      Maths: [
        'Compare the two methods for solving this quadratic and identify when each is more efficient.',
        'What patterns can you see in the sequence 2, 6, 18, 54...?',
        'Analyse the correlation shown in this scatter graph and discuss its strength.'
      ],
      Science: [
        'Compare the structure of animal and plant cells and explain the functional reasons for differences.',
        'Analyse the energy transfer diagram and identify where efficiency is lost.',
        'What is the relationship between current, voltage, and resistance in this circuit?'
      ],
      History: [
        'Compare the interpretations of historians A and B on the causes of the French Revolution.',
        'What evidence from Sources C and D supports the view that propaganda was effective?',
        'Examine the relationship between industrialisation and urbanisation in 19th-century Britain.'
      ]
    }
  },
  {
    key: 'apply', label: 'Apply', color: 'var(--apply)', bg: 'var(--apply-bg)', hex: '#d4ac0d',
    order: 3, type: 'Lower-Order',
    desc: 'Use information in new situations. Implement procedures and methods in different contexts; solve problems.',
    verbs: ['apply','demonstrate','solve','use','illustrate','implement','calculate','execute','show','practise'],
    stems: [
      'How would you use... to solve...?',
      'Can you apply this method to...?',
      'What would happen if...?',
      'How would you demonstrate...?',
      'Can you show how... works in practice?',
      'How would you solve... using...?',
      'What approach would you use for...?',
      'Can you illustrate how...?',
      'How would you implement... in a new context?',
      'What examples can you find of...?'
    ],
    examples: {
      English: [
        'Apply the PEEL structure to write a paragraph analysing the use of metaphor.',
        'Use the persuasive techniques we studied to write a letter to the headteacher.',
        'Demonstrate how to embed a quotation using the writer\'s name.'
      ],
      Maths: [
        'Calculate the area of this compound shape using the formulae we have learned.',
        'Solve the following simultaneous equations using the elimination method.',
        'Apply Pythagoras\' theorem to find the missing side of this real-world problem.'
      ],
      Science: [
        'Use the particle model to explain what happens when a solid is heated.',
        'Calculate the speed of the object using the distance-time graph.',
        'Apply your knowledge of food webs to predict what would happen if the frog population declined.'
      ],
      History: [
        'Use the concept of causation to explain why the Weimar Republic failed.',
        'Apply the criteria for source utility to evaluate Source A.',
        'Demonstrate how the concept of significance applies to the invention of the printing press.'
      ]
    }
  },
  {
    key: 'understand', label: 'Understand', color: 'var(--understand)', bg: 'var(--understand-bg)', hex: '#e67e22',
    order: 2, type: 'Lower-Order',
    desc: 'Explain ideas or concepts. Interpret meaning, summarise information, and translate understanding into your own words.',
    verbs: ['explain','summarise','describe','interpret','paraphrase','classify','discuss','predict','translate','restate'],
    stems: [
      'Can you explain why...?',
      'What is the meaning of...?',
      'How would you summarise...?',
      'Can you describe in your own words...?',
      'What is the main idea of...?',
      'How would you interpret...?',
      'Why do you think...?',
      'What does... suggest about...?',
      'Can you paraphrase...?',
      'How does this connect to...?'
    ],
    examples: {
      English: [
        'Explain why the writer chose to use a first-person narrator.',
        'Summarise the key events of Act 3 in your own words.',
        'What does the word "fractured" suggest about the character\'s emotional state?'
      ],
      Maths: [
        'Explain why dividing by a fraction is the same as multiplying by its reciprocal.',
        'Describe in your own words what the gradient of a line represents.',
        'Interpret the meaning of the y-intercept in this real-world context.'
      ],
      Science: [
        'Explain why metals are good conductors of electricity.',
        'Describe in your own words how natural selection leads to evolution.',
        'What does a steeper section of the distance-time graph tell us?'
      ],
      History: [
        'Explain why the assassination of Archduke Franz Ferdinand led to a wider conflict.',
        'Summarise the main features of the feudal system.',
        'What does Source A suggest about attitudes towards women in the 1920s?'
      ]
    }
  },
  {
    key: 'remember', label: 'Remember', color: 'var(--remember)', bg: 'var(--remember-bg)', hex: '#e74c3c',
    order: 1, type: 'Lower-Order',
    desc: 'Recall facts, terms, basic concepts, and answers. Retrieve relevant knowledge from long-term memory.',
    verbs: ['list','define','name','recall','identify','state','label','match','recognise','memorise'],
    stems: [
      'What is...?',
      'Can you list...?',
      'Who was...?',
      'When did...?',
      'Where does...?',
      'How many...?',
      'Can you name...?',
      'What do we call...?',
      'Can you recall...?',
      'Which... is correct?'
    ],
    examples: {
      English: [
        'What is the definition of a simile?',
        'Name three plays written by Shakespeare.',
        'List the features of a persuasive text.'
      ],
      Maths: [
        'What is the formula for the area of a circle?',
        'List the first ten prime numbers.',
        'Define the term "integer".'
      ],
      Science: [
        'Name the three states of matter.',
        'What is the chemical symbol for oxygen?',
        'List the planets in order from the Sun.'
      ],
      History: [
        'When did World War I begin?',
        'Name the six wives of Henry VIII.',
        'What was the name of the treaty that ended World War I?'
      ]
    }
  }
];

const SUBJECTS = ['English', 'Maths', 'Science', 'History'];

const PRACTICE_QUESTIONS = [
  { q: 'List the features of a formal letter.', level: 'remember' },
  { q: 'Explain why the author chose to set the story during winter.', level: 'understand' },
  { q: 'Use Pythagoras\' theorem to calculate the hypotenuse of a right-angled triangle with sides 3cm and 4cm.', level: 'apply' },
  { q: 'Compare how two different poets present the theme of loss.', level: 'analyse' },
  { q: 'Do you agree that the protagonist made the right decision? Justify your answer.', level: 'evaluate' },
  { q: 'Design an experiment to investigate the effect of light on plant growth.', level: 'create' },
  { q: 'What is the chemical formula for water?', level: 'remember' },
  { q: 'Summarise the causes of the English Civil War in your own words.', level: 'understand' },
  { q: 'Apply the concept of supply and demand to explain why ticket prices rise for popular concerts.', level: 'apply' },
  { q: 'What patterns can you identify in the frequency of prime numbers?', level: 'analyse' },
  { q: 'Evaluate the effectiveness of the government\'s response to the pandemic.', level: 'evaluate' },
  { q: 'Compose a short story that explores the theme of isolation.', level: 'create' },
  { q: 'Name the three branches of the UK government.', level: 'remember' },
  { q: 'Describe in your own words how photosynthesis works.', level: 'understand' },
  { q: 'Solve the equation 3x + 7 = 22.', level: 'apply' },
  { q: 'Examine the relationship between poverty and crime rates using the data provided.', level: 'analyse' },
  { q: 'Which renewable energy source is most suitable for the UK? Defend your choice with evidence.', level: 'evaluate' },
  { q: 'Propose a plan to reduce food waste in your school.', level: 'create' },
  { q: 'When did the Battle of Hastings take place?', level: 'remember' },
  { q: 'What does the metaphor "a sea of troubles" suggest about Hamlet\'s state of mind?', level: 'understand' }
];

/* ===== TAB NAVIGATION ===== */
document.querySelectorAll('nav button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById(btn.dataset.tab).classList.add('active');
  });
});

/* ===== EXPLORE: BUILD PYRAMID ===== */
function buildPyramid() {
  const container = document.getElementById('pyramidContainer');
  container.innerHTML = '';
  const totalH = 380;
  const levelH = totalH / LEVELS.length;

  LEVELS.forEach((lv, i) => {
    const div = document.createElement('div');
    div.className = 'pyramid-level';
    div.dataset.key = lv.key;
    const widthPct = 28 + (i * 72 / (LEVELS.length - 1));
    div.style.width = widthPct + '%';
    div.style.height = levelH + 'px';
    div.style.background = lv.color;
    if (i === 0) div.style.borderRadius = '10px 10px 0 0';
    if (i === LEVELS.length - 1) div.style.borderRadius = '0 0 10px 10px';
    const numSpan = document.createElement('span');
    numSpan.className = 'level-num';
    numSpan.textContent = 'L' + lv.order;
    div.appendChild(numSpan);
    div.appendChild(document.createTextNode(lv.label));
    div.addEventListener('click', () => selectLevel(lv.key));
    container.appendChild(div);
  });
}

let selectedLevel = null;
let selectedSubject = 'English';

function selectLevel(key) {
  selectedLevel = key;
  document.querySelectorAll('.pyramid-level').forEach(el => {
    el.classList.toggle('selected', el.dataset.key === key);
  });
  renderDetail();
}

function renderDetail() {
  const panel = document.getElementById('detailPanel');
  if (!selectedLevel) {
    panel.innerHTML = '<div class="empty-state"><span class="arrow-hint">&larr;</span>Click a level on the pyramid to explore.</div>';
    return;
  }

  const lv = LEVELS.find(l => l.key === selectedLevel);
  const verbHtml = lv.verbs.map(v =>
    `<span class="verb-tag" style="background:${lv.bg};color:${lv.hex}">${v}</span>`
  ).join('');

  const stemsHtml = lv.stems.map(s => `<li>${s}</li>`).join('');

  const subjectBtns = SUBJECTS.map(s =>
    `<button class="subject-btn ${s === selectedSubject ? 'active' : ''}"
      style="${s === selectedSubject ? 'background:' + lv.hex + ';border-color:' + lv.hex : ''}"
      onclick="pickSubject('${s}')">${s}</button>`
  ).join('');

  const examples = (lv.examples[selectedSubject] || []).map(e =>
    `<div class="example-q" style="border-left-color:${lv.hex}">${e}</div>`
  ).join('');

  panel.innerHTML = `
    <h2 style="color:${lv.hex}">${lv.label}</h2>
    <p class="level-desc">${lv.desc}</p>
    <p class="section-label">Key Verbs</p>
    <div class="verbs">${verbHtml}</div>
    <p class="section-label">Question Stems</p>
    <ul class="stems-list">${stemsHtml}</ul>
    <p class="section-label">Subject Examples</p>
    <div class="subject-row">${subjectBtns}</div>
    ${examples}
    <div class="generate-area">
      <button class="generate-btn" style="background:${lv.hex}" onclick="generateQuestion()">
        Generate Random Question
      </button>
    </div>
    <div class="generated-output" id="genOutput" style="border-left-color:${lv.hex}"></div>
  `;
}

function pickSubject(s) {
  selectedSubject = s;
  renderDetail();
}

function generateQuestion() {
  const lv = LEVELS.find(l => l.key === selectedLevel);
  if (!lv) return;
  const pool = [...lv.stems, ...(lv.examples[selectedSubject] || [])];
  const pick = pool[Math.floor(Math.random() * pool.length)];
  const out = document.getElementById('genOutput');
  if (out) {
    out.style.opacity = '0';
    setTimeout(() => {
      out.textContent = pick;
      out.style.opacity = '1';
    }, 150);
  }
}

/* ===== PRACTICE MODE ===== */
let practiceData = [];
let practiceScore = 0;
let practiceAttempted = 0;

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

function capitalise(s) { return s.charAt(0).toUpperCase() + s.slice(1); }

function initPractice() {
  practiceScore = 0;
  practiceAttempted = 0;
  practiceData = shuffle([...PRACTICE_QUESTIONS]).map((q, i) => ({
    ...q, id: i, answered: false, correct: false
  }));
  document.getElementById('completionBanner').classList.remove('show');
  renderPractice();
}

function renderPractice() {
  const bank = document.getElementById('questionBank');
  const zones = document.getElementById('dropZones');
  bank.innerHTML = '';
  zones.innerHTML = '';

  /* Render question cards */
  practiceData.forEach(q => {
    const card = document.createElement('div');
    card.className = 'q-card';
    if (q.answered) card.classList.add(q.correct ? 'correct' : 'incorrect');
    card.draggable = !q.answered;
    card.id = 'qcard-' + q.id;

    let inner = q.q;
    if (q.answered && q.correct) {
      inner += '<div class="feedback" style="color:var(--analyse)">Correct!</div>';
    } else if (q.answered && !q.correct) {
      inner += `<div class="feedback" style="color:var(--remember)">Correct answer: ${capitalise(q.level)}</div>`;
    }
    card.innerHTML = inner;

    card.addEventListener('dragstart', e => {
      if (q.answered) { e.preventDefault(); return; }
      e.dataTransfer.setData('text/plain', String(q.id));
      e.dataTransfer.effectAllowed = 'move';
    });

    bank.appendChild(card);
  });

  /* Render drop zones */
  const levelOrder = ['create','evaluate','analyse','apply','understand','remember'];
  levelOrder.forEach(key => {
    const lv = LEVELS.find(l => l.key === key);
    const count = practiceData.filter(q => q.answered && q.correct && q.level === key).length;
    const zone = document.createElement('div');
    zone.className = 'drop-zone';
    zone.dataset.level = key;
    zone.style.borderColor = lv.hex;
    zone.style.color = lv.hex;
    zone.style.background = lv.bg;
    zone.innerHTML = lv.label + (count > 0 ? `<span class="drop-count">(${count})</span>` : '');

    zone.addEventListener('dragover', e => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      zone.classList.add('drag-over');
    });
    zone.addEventListener('dragleave', () => zone.classList.remove('drag-over'));
    zone.addEventListener('drop', e => {
      e.preventDefault();
      zone.classList.remove('drag-over');
      const id = parseInt(e.dataTransfer.getData('text/plain'));
      handleDrop(id, key);
    });

    zones.appendChild(zone);
  });

  updateScore();
}

function handleDrop(id, droppedLevel) {
  const q = practiceData.find(x => x.id === id);
  if (!q || q.answered) return;
  q.answered = true;
  q.correct = (q.level === droppedLevel);
  practiceAttempted++;
  if (q.correct) practiceScore++;
  renderPractice();

  /* Check completion */
  if (practiceAttempted === practiceData.length) {
    const banner = document.getElementById('completionBanner');
    const pct = Math.round((practiceScore / practiceData.length) * 100);
    banner.textContent = `All questions sorted! You scored ${practiceScore} / ${practiceData.length} (${pct}%).`;
    banner.classList.add('show');
  }
}

function updateScore() {
  document.getElementById('scoreVal').textContent = practiceScore;
  document.getElementById('totalVal').textContent = practiceData.length;
  const pct = practiceData.length
    ? Math.round((practiceAttempted / practiceData.length) * 100)
    : 0;
  document.getElementById('progressBar').style.width = pct + '%';
}

function resetPractice() { initPractice(); }

/* ===== REFERENCE GRID ===== */
function buildReference() {
  const grid = document.getElementById('refGrid');
  grid.innerHTML = '';
  const order = ['create','evaluate','analyse','apply','understand','remember'];

  order.forEach(key => {
    const lv = LEVELS.find(l => l.key === key);
    const card = document.createElement('div');
    card.className = 'ref-card';
    card.innerHTML = `
      <div class="ref-card-header" style="background:${lv.hex}">
        ${lv.label}
        <span class="level-type">${lv.type}</span>
      </div>
      <div class="ref-card-body">
        <p class="ref-desc">${lv.desc}</p>
        <h4>Key Verbs</h4>
        <p class="verb-list">${lv.verbs.join(', ')}</p>
        <h4>Question Stems</h4>
        <ul>${lv.stems.map(s => `<li>${s}</li>`).join('')}</ul>
      </div>
    `;
    grid.appendChild(card);
  });
}

/* ===== TOUCH SUPPORT FOR DRAG AND DROP ===== */
let draggedCard = null;
let dragClone = null;
let touchOffsetX = 0;
let touchOffsetY = 0;

document.addEventListener('touchstart', function(e) {
  const card = e.target.closest('.q-card');
  if (!card || card.classList.contains('correct') || card.classList.contains('incorrect')) return;
  draggedCard = card;
  const rect = card.getBoundingClientRect();
  touchOffsetX = e.touches[0].clientX - rect.left;
  touchOffsetY = e.touches[0].clientY - rect.top;

  dragClone = card.cloneNode(true);
  dragClone.style.position = 'fixed';
  dragClone.style.width = rect.width + 'px';
  dragClone.style.zIndex = '9999';
  dragClone.style.opacity = '0.85';
  dragClone.style.pointerEvents = 'none';
  dragClone.style.boxShadow = '0 4px 16px rgba(0,0,0,0.2)';
  dragClone.style.left = (e.touches[0].clientX - touchOffsetX) + 'px';
  dragClone.style.top = (e.touches[0].clientY - touchOffsetY) + 'px';
  document.body.appendChild(dragClone);
  card.style.opacity = '0.3';
}, { passive: true });

document.addEventListener('touchmove', function(e) {
  if (!dragClone) return;
  dragClone.style.left = (e.touches[0].clientX - touchOffsetX) + 'px';
  dragClone.style.top = (e.touches[0].clientY - touchOffsetY) + 'px';

  document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('drag-over'));
  const el = document.elementFromPoint(e.touches[0].clientX, e.touches[0].clientY);
  if (el && el.closest('.drop-zone')) {
    el.closest('.drop-zone').classList.add('drag-over');
  }
}, { passive: true });

document.addEventListener('touchend', function(e) {
  if (!draggedCard || !dragClone) return;
  const touch = e.changedTouches[0];
  const el = document.elementFromPoint(touch.clientX, touch.clientY);
  const zone = el ? el.closest('.drop-zone') : null;

  if (zone) {
    const id = parseInt(draggedCard.id.replace('qcard-', ''));
    handleDrop(id, zone.dataset.level);
  }

  draggedCard.style.opacity = '1';
  if (dragClone.parentNode) dragClone.remove();
  draggedCard = null;
  dragClone = null;
  document.querySelectorAll('.drop-zone').forEach(z => z.classList.remove('drag-over'));
});

/* ===== INIT ===== */
buildPyramid();
initPractice();
buildReference();
</script>
</body>
</html>
